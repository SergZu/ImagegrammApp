(self.webpackChunk=self.webpackChunk||[]).push([[867],{9438:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,i=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){return r.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91}))},8669:function(t,e,n){var r=n(211),i=n(4710),s=n(7826),o=r("unscopables"),a=Array.prototype;null==a[o]&&s.f(a,o,{configurable:!0,value:i(null)}),t.exports=function(t){a[o][t]=!0}},9955:function(t,e,n){var r=n(3677),i=n(211),s=n(1448),o=i("species");t.exports=function(t){return s>=51||!r((function(){var e=[];return(e.constructor={})[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},3002:function(t,e,n){var r=n(5283),i=n(3677),s=n(3167),o=Object.defineProperty,a={},u=function(t){throw t};t.exports=function(t,e){if(s(a,t))return a[t];e||(e={});var n=[][t],c=!!s(e,"ACCESSORS")&&e.ACCESSORS,l=s(e,0)?e[0]:u,h=s(e,1)?e[1]:void 0;return a[t]=!!n&&!i((function(){if(c&&!r)return!0;var t={length:-1};c?o(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,l,h)}))}},5469:function(t,e,n){var r=n(211)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},9720:function(t,e,n){"use strict";var r=n(1288),i=n(7826),s=n(5736);t.exports=function(t,e,n){var o=r(e);o in t?i.f(t,o,s(0,n)):t[o]=n}},2331:function(t,e,n){"use strict";n(2077);var r=n(1007),i=n(3677),s=n(211),o=n(4861),a=n(2585),u=s("species"),c=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l="$0"==="a".replace(/./,"$0"),h=s("replace"),f=!!/./[h]&&""===/./[h]("a","$0"),d=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,h){var p=s(t),m=!i((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),g=m&&!i((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e}));if(!m||!g||"replace"===t&&(!c||!l||f)||"split"===t&&!d){var v=/./[p],y=n(p,""[t],(function(t,e,n,r,i){return e.exec===o?m&&!i?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),w=y[0],b=y[1];r(String.prototype,t,w),r(RegExp.prototype,p,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}h&&a(RegExp.prototype[p],"sham",!0)}},6526:function(t,e,n){var r=n(2306);t.exports=Array.isArray||function(t){return"Array"==r(t)}},7994:function(t,e,n){var r=n(8759),i=n(2306),s=n(211)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==i(t))}},7725:function(t,e,n){var r=n(7994);t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},4710:function(t,e,n){var r,i=n(6112),s=n(7711),o=n(8684),a=n(7153),u=n(5963),c=n(821),l=n(8944),h=l("IE_PROTO"),f=function(){},d=function(t){return"<script>"+t+"</"+"script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;p=r?function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=c("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F);for(var n=o.length;n--;)delete p.prototype[o[n]];return p()};a[h]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(f.prototype=i(t),n=new f,f.prototype=null,n[h]=t):n=p(),void 0===e?n:s(n,e)}},7711:function(t,e,n){var r=n(5283),i=n(7826),s=n(6112),o=n(8779);t.exports=r?Object.defineProperties:function(t,e){s(t);for(var n,r=o(e),a=r.length,u=0;a>u;)i.f(t,n=r[u++],e[n]);return t}},8779:function(t,e,n){var r=n(1352),i=n(8684);t.exports=Object.keys||function(t){return r(t,i)}},1189:function(t,e,n){var r=n(2306),i=n(4861);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var s=n.call(t,e);if("object"!=typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},4861:function(t,e,n){"use strict";var r,i,s=n(4276),o=n(4930),a=RegExp.prototype.exec,u=String.prototype.replace,c=a,l=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),h=o.UNSUPPORTED_Y||o.BROKEN_CARET,f=void 0!==/()??/.exec("")[1];(l||f||h)&&(c=function(t){var e,n,r,i,o=this,c=h&&o.sticky,d=s.call(o),p=o.source,m=0,g=t;return c&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),g=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(p="(?: "+p+")",g=" "+g,m++),n=new RegExp("^(?:"+p+")",d)),f&&(n=new RegExp("^"+p+"$(?!\\s)",d)),l&&(e=o.lastIndex),r=a.call(c?n:o,g),c?r?(r.input=r.input.slice(m),r[0]=r[0].slice(m),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:l&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),f&&r&&r.length>1&&u.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=c},4276:function(t,e,n){"use strict";var r=n(6112);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},4930:function(t,e,n){"use strict";var r=n(3677);function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},2031:function(t){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},3060:function(t,e,n){var r=n(9586);t.exports=function(t){return Object(r(t))}},5623:function(t,e,n){"use strict";var r=n(1695),i=n(6198).includes,s=n(8669);r({target:"Array",proto:!0,forced:!n(3002)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},2410:function(t,e,n){"use strict";var r=n(1695),i=n(8759),s=n(6526),o=n(7740),a=n(4005),u=n(4088),c=n(9720),l=n(211),h=n(9955),f=n(3002),d=h("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),m=l("species"),g=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!d||!p},{slice:function(t,e){var n,r,l,h=u(this),f=a(h.length),d=o(t,f),p=o(void 0===e?f:e,f);if(s(h)&&("function"!=typeof(n=h.constructor)||n!==Array&&!s(n.prototype)?i(n)&&null===(n=n[m])&&(n=void 0):n=void 0,n===Array||void 0===n))return g.call(h,d,p);for(r=new(void 0===n?Array:n)(v(p-d,0)),l=0;d<p;d++,l++)d in h&&c(r,l,h[d]);return r.length=l,r}})},3352:function(t,e,n){var r=n(5283),i=n(7826).f,s=Function.prototype,o=s.toString,a=/^\s*function ([^ (]*)/,u="name";r&&!(u in s)&&i(s,u,{configurable:!0,get:function(){try{return o.call(this).match(a)[1]}catch(t){return""}}})},2571:function(t,e,n){var r=n(1695),i=n(3060),s=n(8779);r({target:"Object",stat:!0,forced:n(3677)((function(){s(1)}))},{keys:function(t){return s(i(t))}})},2077:function(t,e,n){"use strict";var r=n(1695),i=n(4861);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},1514:function(t,e,n){"use strict";var r=n(1695),i=n(7725),s=n(9586);r({target:"String",proto:!0,forced:!n(5469)("includes")},{includes:function(t){return!!~String(s(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},3526:function(t,e,n){"use strict";var r=n(2331),i=n(6112),s=n(9586),o=n(2031),a=n(1189);r("search",1,(function(t,e,n){return[function(e){var n=s(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var s=i(t),u=String(this),c=s.lastIndex;o(c,0)||(s.lastIndex=0);var l=a(s,u);return o(s.lastIndex,c)||(s.lastIndex=c),null===l?-1:l.index}]}))},8115:function(t,e,n){"use strict";n.d(e,{ET:function(){return Vl},hJ:function(){return Bc},JU:function(){return qc},ad:function(){return Kc},cf:function(){return Ul},Xo:function(){return Pl},IO:function(){return Cl},Bt:function(){return ql},r7:function(){return Ml}});var r=n(3464),i=n(9259),s=n(1549),o=n(1988),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var c,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},h=h||{},f=l||self;function d(){}function p(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function m(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var g="closure_uid_"+(1e9*Math.random()>>>0),v=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function T(){return Date.now()}function _(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function x(){this.j=this.j,this.i=this.i}x.prototype.j=!1,x.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,g)&&t[g]||(t[g]=++v)})(this)},x.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var S=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},A=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function I(t){return Array.prototype.concat.apply([],arguments)}function k(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function C(t){return/^[\s\xa0]*$/.test(t)}var R,P=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function D(t,e){return-1!=t.indexOf(e)}function N(t,e){return t<e?-1:t>e?1:0}t:{var L=f.navigator;if(L){var O=L.userAgent;if(O){R=O;break t}}R=""}function M(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function V(t){var e={};for(var n in t)e[n]=t[n];return e}var U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var s=0;s<U.length;s++)n=U[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function B(t){return B[" "](t),t}B[" "]=d;var q,j,H=D(R,"Opera"),z=D(R,"Trident")||D(R,"MSIE"),K=D(R,"Edge"),G=K||z,$=D(R,"Gecko")&&!(D(R.toLowerCase(),"webkit")&&!D(R,"Edge"))&&!(D(R,"Trident")||D(R,"MSIE"))&&!D(R,"Edge"),X=D(R.toLowerCase(),"webkit")&&!D(R,"Edge");function W(){var t=f.document;return t?t.documentMode:void 0}t:{var Y="",Q=(j=R,$?/rv:([^\);]+)(\)|;)/.exec(j):K?/Edge\/([\d\.]+)/.exec(j):z?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(j):X?/WebKit\/(\S+)/.exec(j):H?/(?:Version)[ \/]?(\S+)/.exec(j):void 0);if(Q&&(Y=Q?Q[1]:""),z){var J=W();if(null!=J&&J>parseFloat(Y)){q=String(J);break t}}q=Y}var Z,tt={};function et(t){return function(t,e){var n=tt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=P(String(q)).split("."),r=P(String(t)).split("."),i=Math.max(n.length,r.length),s=0;0==e&&s<i;s++){var o=n[s]||"",a=r[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=N(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||N(0==o[2].length,0==a[2].length)||N(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}if(f.document&&z){var nt=W();Z=nt||(parseInt(q,10)||void 0)}else Z=void 0;var rt=Z,it=!z||9<=Number(rt),st=z&&!et("9"),ot=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{f.addEventListener("test",d,e),f.removeEventListener("test",d,e)}catch(t){}return t}();function at(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ut(t,e){if(at.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if($){t:{try{B(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ct[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}at.prototype.b=function(){this.defaultPrevented=!0},_(ut,at);var ct={2:"touch",3:"pen",4:"mouse"};ut.prototype.b=function(){ut.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,st)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var lt="closure_listenable_"+(1e6*Math.random()|0),ht=0;function ft(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ht,this.Y=this.Z=!1}function dt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function pt(t){this.src=t,this.a={},this.b=0}function mt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],s=S(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(dt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function gt(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.Y&&s.listener==e&&s.capture==!!n&&s.ca==r)return i}return-1}pt.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.a[s])||(t=this.a[s]=[],this.b++);var o=gt(t,e,r,i);return-1<o?(e=t[o],n||(e.Z=!1)):((e=new ft(e,this.src,s,!!r,i)).Z=n,t.push(e)),e};var vt="closure_lm_"+(1e6*Math.random()|0),yt={};function wt(t,e,n,r,i){if(r&&r.once)return Et(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)wt(t,e[s],n,r,i);return null}return n=Ct(n),t&&t[lt]?t.va(e,n,m(r)?!!r.capture:!!r,i):bt(t,e,n,!1,r,i)}function bt(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=m(i)?!!i.capture:!!i;if(o&&!it)return null;var a=It(t);if(a||(t[vt]=a=new pt(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=At,e=it?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ot||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(xt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Et(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Et(t,e[s],n,r,i);return null}return n=Ct(n),t&&t[lt]?t.wa(e,n,m(r)?!!r.capture:!!r,i):bt(t,e,n,!0,r,i)}function Tt(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Tt(t,e[s],n,r,i);else r=m(r)?!!r.capture:!!r,n=Ct(n),t&&t[lt]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=gt(s=t.a[e],n,r,i))&&(dt(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.a[e],t.b--)))):t&&(t=It(t))&&(e=t.a[e.toString()],t=-1,e&&(t=gt(e,n,r,i)),(n=-1<t?e[t]:null)&&_t(n))}function _t(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[lt])mt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=It(e))?(mt(n,t),0==n.b&&(n.src=null,e[vt]=null)):dt(t)}}}function xt(t){return t in yt?yt[t]:yt[t]="on"+t}function St(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&_t(t),n.call(r,e)}function At(t,e){if(t.Y)return!0;if(!it){if(!e)t:{e=["window","event"];for(var n=f,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return St(t,e=new ut(e,this))}return St(t,new ut(e,this))}function It(t){return(t=t[vt])instanceof pt?t:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(t){return"function"==typeof t?t:(t[kt]||(t[kt]=function(e){return t.handleEvent(e)}),t[kt])}function Rt(){x.call(this),this.c=new pt(this),this.J=this,this.C=null}function Pt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new at(e,t);else if(e instanceof at)e.target=e.target||t;else{var i=e;F(e=new at(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.a=n[s];i=Dt(o,r,!0,e)&&i}if(i=Dt(o=e.a=t,r,!0,e)&&i,i=Dt(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Dt(o=e.a=n[s],r,!1,e)&&i}function Dt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.Y&&o.capture==n){var a=o.listener,u=o.ca||o.src;o.Z&&mt(t.c,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}_(Rt,x),Rt.prototype[lt]=!0,(c=Rt.prototype).addEventListener=function(t,e,n,r){wt(this,t,e,n,r)},c.removeEventListener=function(t,e,n,r){Tt(this,t,e,n,r)},c.G=function(){if(Rt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)dt(n[r]);delete e.a[t],e.b--}}this.C=null},c.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},c.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Nt=f.JSON.stringify;function Lt(){this.b=this.a=null}var Ot,Mt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Ut}),(function(t){t.reset()}));function Vt(){var t=jt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ut(){this.next=this.b=this.a=null}function Ft(t){f.setTimeout((function(){throw t}),0)}function Bt(t,e){Ot||function(){var t=f.Promise.resolve(void 0);Ot=function(){t.then(Ht)}}(),qt||(Ot(),qt=!0),jt.add(t,e)}Lt.prototype.add=function(t,e){var n=Mt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ut.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ut.prototype.reset=function(){this.next=this.b=this.a=null};var qt=!1,jt=new Lt;function Ht(){for(var t;t=Vt();){try{t.a.call(t.b)}catch(t){Ft(t)}var e=Mt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}qt=!1}function zt(t,e){Rt.call(this),this.b=t||1,this.a=e||f,this.f=b(this.Za,this),this.g=T()}function Kt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Gt(t,e,n){if("function"==typeof t)n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:f.setTimeout(t,e||0)}function $t(t){t.a=Gt((function(){t.a=null,t.c&&(t.c=!1,$t(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}_(zt,Rt),(c=zt.prototype).aa=!1,c.M=null,c.Za=function(){if(this.aa){var t=T()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Pt(this,"tick"),this.aa&&(Kt(this),this.start()))}},c.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=T())},c.G=function(){zt.X.G.call(this),Kt(this),delete this.a};var Xt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:$t(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(f.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(x);function Wt(t){x.call(this),this.b=t,this.a={}}_(Wt,x);var Yt=[];function Qt(t,e,n,r){Array.isArray(n)||(n&&(Yt[0]=n.toString()),n=Yt);for(var i=0;i<n.length;i++){var s=wt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!s)break;t.a[s.key]=s}}function Jt(t){M(t.a,(function(t,e){this.a.hasOwnProperty(e)&&_t(t)}),t),t.a={}}function Zt(){this.a=!0}function te(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Nt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Wt.prototype.G=function(){Wt.X.G.call(this),Jt(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zt.prototype.info=function(){};var ee={},ne=null;function re(){return ne=ne||new Rt}function ie(t){at.call(this,ee.Fa,t)}function se(t){var e=re();Pt(e,new ie(e,t))}function oe(t,e){at.call(this,ee.STAT_EVENT,t),this.stat=e}function ae(t){var e=re();Pt(e,new oe(e,t))}function ue(t){at.call(this,ee.Ga,t)}function ce(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return f.setTimeout((function(){t()}),e)}ee.Fa="serverreachability",_(ie,at),ee.STAT_EVENT="statevent",_(oe,at),ee.Ga="timingevent",_(ue,at);var le={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},he={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function fe(){}function de(t){var e;return(e=t.a)||(e=t.a={}),e}function pe(){}fe.prototype.a=null;var me,ge={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ve(){at.call(this,"d")}function ye(){at.call(this,"c")}function we(){}function be(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Wt(this),this.P=Ee,t=G?125:void 0,this.R=new zt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}_(ve,at),_(ye,at),_(we,fe),me=new we;var Ee=45e3,Te={},_e={};function xe(t,e,n){t.H=1,t.i=Ge(Be(e)),t.j=n,t.I=!0,Se(t,null)}function Se(t,e){t.u=T(),ke(t),t.l=Be(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),on(n.b,"t",r),t.D=0,t.a=tr(t.g,t.g.C?e:null),0<t.O&&(t.F=new Xt(b(t.Ca,t,t.a),t.O)),Qt(t.J,t.a,"readystatechange",t.Xa),e=t.B?V(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),se(1),function(t,e,n,r,i,s){t.info((function(){if(t.a)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ae(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ie(t,n);if(i==_e){4==e&&(t.h=4,ae(14),r=!1),te(t.c,t.f,null,"[Incomplete Response]");break}if(i==Te){t.h=4,ae(15),te(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}te(t.c,t.f,i,null),Ne(t,i)}4==e&&0==n.length&&(t.h=1,ae(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gn(e),e.F=!0,ae(11))):(te(t.c,t.f,n,"[Invalid Chunked Response]"),De(t),Pe(t))}function Ie(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?_e:(n=Number(e.substring(n,r)),isNaN(n)?Te:(r+=1)+n>e.length?_e:(e=e.substr(r,n),t.D=r+n,e))}function ke(t){t.T=T()+t.P,Ce(t,t.P)}function Ce(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ce(b(t.Va,t),e)}function Re(t){t.o&&(f.clearTimeout(t.o),t.o=null)}function Pe(t){0==t.g.v||t.A||Wn(t.g,t)}function De(t){Re(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Kt(t.R),Jt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ne(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||dn(n.b,t)))if(n.I=t.N,!t.C&&dn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Xn(n),Vn(n)}Kn(n),ae(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ce(b(n.Sa,n),6e3));if(1>=fn(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Qn(n,11)}else if((t.C||n.a==t)&&Xn(n),!C(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var s=i[3];null!=s&&(n.ha=s,n.c.info("VER="+n.ha));var o=i[4];null!=o&&(n.pa=o,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(D(l,"spdy")||D(l,"quic")||D(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(pn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ke(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=T()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Zn(u,u.C?u.ga:null,u.fa),d.C){mn(u.b,d);var p=d,m=u.D;m&&p.setTimeout(m),p.o&&(Re(p),ke(p)),u.a=d}else zn(u);0<n.g.length&&Bn(n)}else"stop"!=i[0]&&"close"!=i[0]||Qn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Qn(n,7):Mn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);se(4)}catch(t){}}function Le(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)A(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(p(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Oe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Oe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Me(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ve(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ve(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ve(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(c=be.prototype).setTimeout=function(t){this.P=t},c.Xa=function(t){t=t.target;var e=this.F;e&&3==Dn(t)?e.f():this.Ca(t)},c.Ca=function(t){try{if(t==this.a)t:{var e=Dn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!G&&!this.a.$())){this.A||4!=e||7==n||se(8==n||0>=r?3:2),Re(this);var i=this.a.W();this.N=i;var s=this.a.$();if(this.b=200==i,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var o,a=this.a;if((o=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(o)){var u=o;break e}}u=null}if(!u){this.b=!1,this.h=3,ae(12),De(this),Pe(this);break t}te(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ne(this,u)}this.I?(Ae(this,e,s),G&&this.b&&3==e&&(Qt(this.J,this.R,"tick",this.Wa),this.R.start())):(te(this.c,this.f,s,null),Ne(this,s)),4==e&&De(this),this.b&&!this.A&&(4==e?Wn(this.g,this):(this.b=!1,ke(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.h=3,ae(12)):(this.h=0,ae(13)),De(this),Pe(this)}}}catch(t){}},c.Wa=function(){if(this.a){var t=Dn(this.a),e=this.a.$();this.D<e.length&&(Re(this),Ae(this,t,e),this.b&&4!=t&&ke(this))}},c.cancel=function(){this.A=!0,De(this)},c.Va=function(){this.o=null;var t=T();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(se(3),ae(17)),De(this),this.h=2,Pe(this)):Ce(this,this.T-t)},(c=Oe.prototype).K=function(){Me(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},c.L=function(){return Me(this),this.a.concat()},c.get=function(t,e){return Ve(this.b,t)?this.b[t]:e},c.set=function(t,e){Ve(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},c.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var Ue=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fe(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Fe){this.a=void 0!==e?e:t.a,qe(this,t.f),this.j=t.j,je(this,t.c),He(this,t.h),this.g=t.g,e=t.b;var n=new en;n.c=e.c,e.a&&(n.a=new Oe(e.a),n.b=e.b),ze(this,n),this.i=t.i}else t&&(n=String(t).match(Ue))?(this.a=!!e,qe(this,n[1]||"",!0),this.j=$e(n[2]||""),je(this,n[3]||"",!0),He(this,n[4]),this.g=$e(n[5]||"",!0),ze(this,n[6]||"",!0),this.i=$e(n[7]||"")):(this.a=!!e,this.b=new en(null,this.a))}function Be(t){return new Fe(t)}function qe(t,e,n){t.f=n?$e(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function je(t,e,n){t.c=n?$e(e,!0):e}function He(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ze(t,e,n){e instanceof en?(t.b=e,function(t,e){e&&!t.f&&(nn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(rn(this,e),on(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Xe(e,Ze)),t.b=new en(e,t.a))}function Ke(t,e,n){t.b.set(e,n)}function Ge(t){return Ke(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^T()).toString(36)),t}function $e(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Xe(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,We),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function We(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Fe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Xe(e,Ye,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Xe(e,Ye,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Xe(n,"/"==n.charAt(0)?Je:Qe,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Xe(n,tn)),t.join("")};var Ye=/[#\/\?@]/g,Qe=/[#\?:]/g,Je=/[#\?]/g,Ze=/[#\?@]/g,tn=/#/g;function en(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function nn(t){t.a||(t.a=new Oe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function rn(t,e){nn(t),e=an(t,e),Ve(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ve((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Me(t)))}function sn(t,e){return nn(t),e=an(t,e),Ve(t.a.b,e)}function on(t,e,n){rn(t,e),0<n.length&&(t.c=null,t.a.set(an(t,e),k(n)),t.b+=n.length)}function an(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(c=en.prototype).add=function(t,e){nn(this),this.c=null,t=an(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},c.forEach=function(t,e){nn(this),this.a.forEach((function(n,r){A(n,(function(n){t.call(e,n,r,this)}),this)}),this)},c.L=function(){nn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},c.K=function(t){nn(this);var e=[];if("string"==typeof t)sn(this,t)&&(e=I(e,this.a.get(an(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=I(e,t[n])}return e},c.set=function(t,e){return nn(this),this.c=null,sn(this,t=an(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},c.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},c.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.c=t.join("&")};var un=function(t,e){this.b=t,this.a=e};function cn(t){this.g=t||ln,f.PerformanceNavigationTiming?t=0<(t=f.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(f.ia&&f.ia.ya&&f.ia.ya()&&f.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var ln=10;function hn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function fn(t){return t.b?1:t.a?t.a.size:0}function dn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function pn(t,e){t.a?t.a.add(e):t.b=e}function mn(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function gn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=u(t.a.values()),s=i.next();!s.done;s=i.next()){var o=s.value;r=r.concat(o.s)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return k(t.c)}function vn(){}function yn(){this.a=new vn}function wn(t,e,n){var r=n||"";try{Le(t,(function(t,n){var i=t;m(t)&&(i=Nt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function bn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}cn.prototype.cancel=function(){var t,e;if(this.c=gn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=u(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},vn.prototype.stringify=function(t){return f.JSON.stringify(t,void 0)},vn.prototype.parse=function(t){return f.JSON.parse(t,void 0)};var En=f.JSON.parse;function Tn(t){Rt.call(this),this.headers=new Oe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=_n,this.D=this.F=!1}_(Tn,Rt);var _n="",xn=/^https?$/i,Sn=["POST","PUT"];function An(t){return"content-type"==t.toLowerCase()}function In(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,kn(t),Rn(t)}function kn(t){t.u||(t.u=!0,Pt(t,"complete"),Pt(t,"error"))}function Cn(t){if(t.b&&void 0!==h&&(!t.s[1]||4!=Dn(t)||2!=t.W()))if(t.l&&4==Dn(t))Gt(t.za,0,t);else if(Pt(t,"readystatechange"),4==Dn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.B).match(Ue)[1]||null;if(!s&&f.self&&f.self.location){var o=f.self.location.protocol;s=o.substr(0,o.length-1)}i=!xn.test(s?s.toLowerCase():"")}e=i}if(e)Pt(t,"complete"),Pt(t,"success");else{t.h=6;try{var a=2<Dn(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",kn(t)}}finally{Rn(t)}}}function Rn(t,e){if(t.a){Pn(t);var n=t.a,r=t.s[0]?d:null;t.a=null,t.s=null,e||Pt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Pn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(f.clearTimeout(t.m),t.m=null)}function Dn(t){return t.a?t.a.readyState:0}function Nn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return M(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ke(t,e,n))}function Ln(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function On(t){this.pa=0,this.g=[],this.c=new Zt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Ln("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Ln("baseRetryDelayMs",5e3,t),this.Ra=Ln("retryDelaySeedMs",1e4,t),this.Ma=Ln("forwardChannelMaxRetries",2,t),this.ma=Ln("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new cn(t&&t.concurrentRequestLimit),this.ka=new yn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Mn(t){if(Un(t),3==t.v){var e=t.R++,n=Be(t.B);Ke(n,"SID",t.J),Ke(n,"RID",e),Ke(n,"TYPE","terminate"),jn(t,n),(e=new be(t,t.c,e,void 0)).H=2,e.i=Ge(Be(n)),n=!1,f.navigator&&f.navigator.sendBeacon&&(n=f.navigator.sendBeacon(e.i.toString(),"")),!n&&f.Image&&((new Image).src=e.i,n=!0),n||(e.a=tr(e.g,null),e.a.ba(e.i)),e.u=T(),ke(e)}Jn(t)}function Vn(t){t.a&&(Gn(t),t.a.cancel(),t.a=null)}function Un(t){Vn(t),t.j&&(f.clearTimeout(t.j),t.j=null),Xn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&f.clearTimeout(t.h),t.h=null)}function Fn(t,e){t.g.push(new un(t.Oa++,e)),3==t.v&&Bn(t)}function Bn(t){hn(t.b)||t.h||(t.h=!0,Bt(t.Ba,t),t.u=0)}function qn(t,e){var n;n=e?e.f:t.R++;var r=Be(t.B);Ke(r,"SID",t.J),Ke(r,"RID",n),Ke(r,"AID",t.P),jn(t,r),t.i&&t.l&&Nn(r,t.i,t.l),n=new be(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Hn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),pn(t.b,n),xe(n,r,e)}function jn(t,e){t.f&&Le({},(function(t,n){Ke(e,n,t)}))}function Hn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?b(t.f.Ja,t.f,t):null;t:for(var i=t.g,s=-1;;){var o=["count="+n];-1==s?0<n?(s=i[0].b,o.push("ofs="+s)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=s))s=Math.max(0,i[u].b-100),a=!1;else try{wn(l,o,"req"+c+"_")}catch(t){r&&r(l)}}if(a){r=o.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function zn(t){t.a||t.j||(t.T=1,Bt(t.Aa,t),t.o=0)}function Kn(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=ce(b(t.Aa,t),Yn(t,t.o)),t.o++,!0)}function Gn(t){null!=t.s&&(f.clearTimeout(t.s),t.s=null)}function $n(t){t.a=new be(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Be(t.la);Ke(e,"RID","rpc"),Ke(e,"SID",t.J),Ke(e,"CI",t.H?"0":"1"),Ke(e,"AID",t.P),jn(t,e),Ke(e,"TYPE","xmlhttp"),t.i&&t.l&&Nn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ge(Be(e)),n.j=null,n.I=!0,Se(n,t)}function Xn(t){null!=t.m&&(f.clearTimeout(t.m),t.m=null)}function Wn(t,e){var n=null;if(t.a==e){Xn(t),Gn(t),t.a=null;var r=2}else{if(!dn(t.b,e))return;n=e.s,mn(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=T()-e.u;var i=t.u;Pt(r=re(),new ue(r,n,e,i)),Bn(t)}else zn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(fn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=ce(b(t.Ba,t,e),Yn(t,t.u)),t.u++,0)))}(t,e)||2==r&&Kn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Qn(t,5);break;case 4:Qn(t,10);break;case 3:Qn(t,6);break;default:Qn(t,2)}}function Yn(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Qn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=b(t.Ya,t);n||(n=new Fe("//www.google.com/images/cleardot.gif"),f.location&&"http"==f.location.protocol||qe(n,"https"),Ge(n)),function(t,e){var n=new Zt;if(f.Image){var r=new Image;r.onload=E(bn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=E(bn,n,r,"TestLoadImage: error",!1,e),r.onabort=E(bn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=E(bn,n,r,"TestLoadImage: timeout",!1,e),f.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ae(2);t.v=0,t.f&&t.f.ra(e),Jn(t),Un(t)}function Jn(t){t.v=0,t.I=-1,t.f&&(0==gn(t.b).length&&0==t.g.length||(t.b.c.length=0,k(t.g),t.g.length=0),t.f.qa())}function Zn(t,e,n){var r=function(t){return t instanceof Fe?Be(t):new Fe(t,void 0)}(n);if(""!=r.c)e&&je(r,e+"."+r.c),He(r,r.h);else{var i=f.location;r=function(t,e,n,r){var i=new Fe(null,void 0);return t&&qe(i,t),e&&je(i,e),n&&He(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&M(t.V,(function(t,e){Ke(r,e,t)})),e=t.A,n=t.na,e&&n&&Ke(r,e,n),Ke(r,"VER",t.ha),jn(t,r),r}function tr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Tn(t.Na)).F=t.C,e}function er(){}function nr(){if(z&&!(10<=Number(rt)))throw Error("Environmental error: no available transport.")}function rr(t,e){Rt.call(this),this.a=new On(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!C(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!C(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new or(this)}function ir(t){ve.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function sr(){ye.call(this),this.status=1}function or(t){this.a=t}(c=Tn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?de(this.H):de(me),this.a.onreadystatechange=b(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void In(this,t)}t=n||"";var i=new Oe(this.headers);r&&Le(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=An,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=f.FormData&&t instanceof f.FormData,!(0<=S(Sn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Pn(this),0<this.o&&((this.D=function(t){return z&&et(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.xa,this)):this.m=Gt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){In(this,t)}},c.xa=function(){void 0!==h&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Pt(this,"timeout"),this.abort(8))},c.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Pt(this,"complete"),Pt(this,"abort"),Rn(this))},c.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Rn(this,!0)),Tn.X.G.call(this)},c.za=function(){this.j||(this.A||this.l||this.g?Cn(this):this.Ua())},c.Ua=function(){Cn(this)},c.W=function(){try{return 2<Dn(this)?this.a.status:-1}catch(t){return-1}},c.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},c.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),En(e)}},c.ua=function(){return this.h},c.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(c=On.prototype).ha=8,c.v=1,c.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new be(this,this.c,t,void 0),r=this.l;if(this.O&&(r?F(r=V(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var s=this.g[i];if(void 0===(s="__data__"in s.a&&"string"==typeof(s=s.a.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Hn(this,n,e),Ke(i=Be(this.B),"RID",t),Ke(i,"CVER",22),this.A&&Ke(i,"X-HTTP-Session-Id",this.A),jn(this,i),this.i&&r&&Nn(i,this.i,r),pn(this.b,n),this.Ia&&Ke(i,"TYPE","init"),this.da?(Ke(i,"$req",e),Ke(i,"SID","null"),n.U=!0,xe(n,i,null)):xe(n,i,e),this.v=2}}else 3==this.v&&(t?qn(this,t):0==this.g.length||hn(this.b)||qn(this))},c.Aa=function(){if(this.j=null,$n(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ce(b(this.Ta,this),t)}},c.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ae(10),Vn(this),$n(this))},c.Sa=function(){null!=this.m&&(this.m=null,Vn(this),Kn(this),ae(19))},c.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),ae(2)):(this.c.info("Failed to ping google.com"),ae(1))},(c=er.prototype).ta=function(){},c.sa=function(){},c.ra=function(){},c.qa=function(){},c.Ja=function(){},nr.prototype.a=function(t,e){return new rr(t,e)},_(rr,Rt),rr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;ae(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Zn(t,null,t.fa),Bn(t)},rr.prototype.close=function(){Mn(this.a)},rr.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Fn(this.a,e)}else this.l?((e={}).__data__=Nt(t),Fn(this.a,e)):Fn(this.a,t)},rr.prototype.G=function(){this.a.f=null,delete this.f,Mn(this.a),delete this.a,rr.X.G.call(this)},_(ir,ve),_(sr,ye),_(or,er),or.prototype.ta=function(){Pt(this.a,"a")},or.prototype.sa=function(t){Pt(this.a,new ir(t))},or.prototype.ra=function(t){Pt(this.a,new sr(t))},or.prototype.qa=function(){Pt(this.a,"b")},nr.prototype.createWebChannel=nr.prototype.a,rr.prototype.send=rr.prototype.h,rr.prototype.open=rr.prototype.g,rr.prototype.close=rr.prototype.close,le.NO_ERROR=0,le.TIMEOUT=8,le.HTTP_ERROR=6,he.COMPLETE="complete",pe.EventType=ge,ge.OPEN="a",ge.CLOSE="b",ge.ERROR="c",ge.MESSAGE="d",Rt.prototype.listen=Rt.prototype.va,Tn.prototype.listenOnce=Tn.prototype.wa,Tn.prototype.getLastError=Tn.prototype.Qa,Tn.prototype.getLastErrorCode=Tn.prototype.ua,Tn.prototype.getStatus=Tn.prototype.W,Tn.prototype.getResponseJson=Tn.prototype.Pa,Tn.prototype.getResponseText=Tn.prototype.$,Tn.prototype.send=Tn.prototype.ba;var ar=function(){return new nr},ur=function(){return re()},cr=le,lr=he,hr=ee,fr={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},dr=pe,pr=Tn;class mr{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.t(t),this.i=t=>e.writeSequenceNumber(t))}t(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.i&&this.i(t),t}}mr.o=-1;const gr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vr extends Error{constructor(t,e){super(e),this.code=t,this.message=e,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}const yr=new s.Yd("@firebase/firestore");function wr(){return yr.logLevel}function br(t,...e){if(yr.logLevel<=s.in.DEBUG){const n=e.map(_r);yr.debug(`Firestore (8.4.1): ${t}`,...n)}}function Er(t,...e){if(yr.logLevel<=s.in.ERROR){const n=e.map(_r);yr.error(`Firestore (8.4.1): ${t}`,...n)}}function Tr(t,...e){if(yr.logLevel<=s.in.WARN){const n=e.map(_r);yr.warn(`Firestore (8.4.1): ${t}`,...n)}}function _r(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function xr(t="Unexpected state"){const e="FIRESTORE (8.4.1) INTERNAL ASSERTION FAILED: "+t;throw Er(e),new Error(e)}function Sr(t,e){t||xr()}function Ar(t,e){return t}function Ir(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class kr{static u(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=Ir(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length))}return n}}function Cr(t,e){return t<e?-1:t>e?1:0}function Rr(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}class Pr{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new vr(gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new vr(gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new vr(gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new vr(gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Pr.fromMillis(Date.now())}static fromDate(t){return Pr.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Pr(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Cr(this.nanoseconds,t.nanoseconds):Cr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dr{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Dr(t)}static min(){return new Dr(new Pr(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Nr(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Lr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Or(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Mr{constructor(t,e,n){void 0===e?e=0:e>t.length&&xr(),void 0===n?n=t.length-e:n>t.length-e&&xr(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Mr.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Mr?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Vr extends Mr{construct(t,e,n){return new Vr(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new vr(gr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Vr(e)}static emptyPath(){return new Vr([])}}const Ur=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fr extends Mr{construct(t,e,n){return new Fr(t,e,n)}static isValidIdentifier(t){return Ur.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fr.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fr(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new vr(gr.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new vr(gr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new vr(gr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new vr(gr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Fr(e)}static emptyPath(){return new Fr([])}}class Br{constructor(t){this.fields=t,t.sort(Fr.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Rr(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class qr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new qr(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new qr(e)}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Cr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}qr.EMPTY_BYTE_STRING=new qr("");const jr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(t){if(Sr(!!t),"string"==typeof t){let e=0;const n=jr.exec(t);if(Sr(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zr(t.seconds),nanos:zr(t.nanos)}}function zr(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Kr(t){return"string"==typeof t?qr.fromBase64String(t):qr.fromUint8Array(t)}function Gr(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function $r(t){const e=t.mapValue.fields.__previous_value__;return Gr(e)?$r(e):e}function Xr(t){const e=Hr(t.mapValue.fields.__local_write_time__.timestampValue);return new Pr(e.seconds,e.nanos)}function Wr(t){return null==t}function Yr(t){return 0===t&&1/t==-1/0}function Qr(t){return"number"==typeof t&&Number.isInteger(t)&&!Yr(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}class Jr{constructor(t){this.path=t}static fromPath(t){return new Jr(Vr.fromString(t))}static fromName(t){return new Jr(Vr.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===Vr.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Vr.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Jr(new Vr(t.slice()))}}function Zr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gr(t)?4:10:xr()}function ti(t,e){const n=Zr(t);if(n!==Zr(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xr(t).isEqual(Xr(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Hr(t.timestampValue),r=Hr(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Kr(t.bytesValue).isEqual(Kr(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return zr(t.geoPointValue.latitude)===zr(e.geoPointValue.latitude)&&zr(t.geoPointValue.longitude)===zr(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return zr(t.integerValue)===zr(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=zr(t.doubleValue),r=zr(e.doubleValue);return n===r?Yr(n)===Yr(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Rr(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Nr(n)!==Nr(r))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===r[t]||!ti(n[t],r[t])))return!1;return!0}(t,e);default:return xr()}}function ei(t,e){return void 0!==(t.values||[]).find((t=>ti(t,e)))}function ni(t,e){const n=Zr(t),r=Zr(e);if(n!==r)return Cr(n,r);switch(n){case 0:return 0;case 1:return Cr(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=zr(t.integerValue||t.doubleValue),r=zr(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ri(t.timestampValue,e.timestampValue);case 4:return ri(Xr(t),Xr(e));case 5:return Cr(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Kr(t),r=Kr(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let t=0;t<n.length&&t<r.length;t++){const e=Cr(n[t],r[t]);if(0!==e)return e}return Cr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Cr(zr(t.latitude),zr(e.latitude));return 0!==n?n:Cr(zr(t.longitude),zr(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let t=0;t<n.length&&t<r.length;++t){const e=ni(n[t],r[t]);if(e)return e}return Cr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let t=0;t<r.length&&t<s.length;++t){const e=Cr(r[t],s[t]);if(0!==e)return e;const o=ni(n[r[t]],i[s[t]]);if(0!==o)return o}return Cr(r.length,s.length)}(t.mapValue,e.mapValue);default:throw xr()}}function ri(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Cr(t,e);const n=Hr(t),r=Hr(e),i=Cr(n.seconds,r.seconds);return 0!==i?i:Cr(n.nanos,r.nanos)}function ii(t){return si(t)}function si(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Hr(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Kr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Jr.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=si(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${si(t.fields[i])}`;return n+"}"}(t.mapValue):xr();var e,n}function oi(t){return!!t&&"integerValue"in t}function ai(t){return!!t&&"arrayValue"in t}function ui(t){return!!t&&"nullValue"in t}function ci(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function li(t){return!!t&&"mapValue"in t}class hi{constructor(t){this.overlayMap=new Map,this.partialValue=t}static empty(){return new hi({mapValue:{}})}field(t){return hi.extractNestedValue(this.buildProto(),t)}toProto(){return this.field(Fr.emptyPath())}set(t,e){this.setOverlay(t,e)}setAll(t){t.forEach(((t,e)=>{t?this.set(e,t):this.delete(e)}))}delete(t){this.setOverlay(t,null)}isEqual(t){return ti(this.buildProto(),t.buildProto())}setOverlay(t,e){let n=this.overlayMap;for(let e=0;e<t.length-1;++e){const r=t.get(e);let i=n.get(r);i instanceof Map?n=i:i&&10===Zr(i)?(i=new Map(Object.entries(i.mapValue.fields||{})),n.set(r,i),n=i):(i=new Map,n.set(r,i),n=i)}n.set(t.lastSegment(),e)}applyOverlay(t,e){let n=!1;const r=hi.extractNestedValue(this.partialValue,t),i=li(r)?Object.assign({},r.mapValue.fields):{};return e.forEach(((e,r)=>{if(e instanceof Map){const s=this.applyOverlay(t.child(r),e);null!=s&&(i[r]=s,n=!0)}else null!==e?(i[r]=e,n=!0):i.hasOwnProperty(r)&&(delete i[r],n=!0)})),n?{mapValue:{fields:i}}:null}buildProto(){const t=this.applyOverlay(Fr.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue}static extractNestedValue(t,e){if(e.isEmpty())return t;{let n=t;for(let t=0;t<e.length-1;++t){if(!n.mapValue.fields)return null;if(n=n.mapValue.fields[e.get(t)],!li(n))return null}return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}clone(){return new hi(this.buildProto())}}function fi(t){const e=[];return Lr(t.fields||{},((t,n)=>{const r=new Fr([t]);if(li(n)){const t=fi(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)})),new Br(e)}class di{constructor(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(t){return new di(t,0,Dr.min(),hi.empty(),0)}static newFoundDocument(t,e,n){return new di(t,1,e,n,0)}static newNoDocument(t,e){return new di(t,2,e,hi.empty(),0)}static newUnknownDocument(t,e){return new di(t,3,e,hi.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof di&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}clone(){return new di(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.toProto())}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pi{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.h=null}}function mi(t,e=null,n=[],r=[],i=null,s=null,o=null){return new pi(t,e,n,r,i,s,o)}function gi(t){const e=Ar(t);if(null===e.h){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>function(t){return t.field.canonicalString()+t.op.toString()+ii(t.value)}(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Wr(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Ci(e.startAt)),e.endAt&&(t+="|ub:",t+=Ci(e.endAt)),e.h=t}return e.h}function vi(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Pi(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if(n=t.filters[i],r=e.filters[i],n.op!==r.op||!n.field.isEqual(r.field)||!ti(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ni(t.startAt,e.startAt)&&Ni(t.endAt,e.endAt)}function yi(t){return Jr.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class wi extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.l(t,e,n):new bi(t,e,n):"array-contains"===e?new xi(t,n):"in"===e?new Si(t,n):"not-in"===e?new Ai(t,n):"array-contains-any"===e?new Ii(t,n):new wi(t,e,n)}static l(t,e,n){return"in"===e?new Ei(t,n):new Ti(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(ni(e,this.value)):null!==e&&Zr(this.value)===Zr(e)&&this.m(ni(e,this.value))}m(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return xr()}}g(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class bi extends wi{constructor(t,e,n){super(t,e,n),this.key=Jr.fromName(n.referenceValue)}matches(t){const e=Jr.comparator(t.key,this.key);return this.m(e)}}class Ei extends wi{constructor(t,e){super(t,"in",e),this.keys=_i("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Ti extends wi{constructor(t,e){super(t,"not-in",e),this.keys=_i("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function _i(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Jr.fromName(t.referenceValue)))}class xi extends wi{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return ai(e)&&ei(e.arrayValue,this.value)}}class Si extends wi{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&ei(this.value.arrayValue,e)}}class Ai extends wi{constructor(t,e){super(t,"not-in",e)}matches(t){if(ei(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!ei(this.value.arrayValue,e)}}class Ii extends wi{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!ai(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>ei(this.value.arrayValue,t)))}}class ki{constructor(t,e){this.position=t,this.before=e}}function Ci(t){return`${t.before?"b":"a"}:${t.position.map((t=>ii(t))).join(",")}`}class Ri{constructor(t,e="asc"){this.field=t,this.dir=e}}function Pi(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Di(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?Jr.comparator(Jr.fromName(o.referenceValue),n.key):ni(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ni(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}class Li{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt}}function Oi(t,e,n,r,i,s,o,a){return new Li(t,e,n,r,i,s,o,a)}function Mi(t){return new Li(t)}function Vi(t){return!Wr(t.limit)&&"F"===t.limitType}function Ui(t){return!Wr(t.limit)&&"L"===t.limitType}function Fi(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Bi(t){for(const e of t.filters)if(e.g())return e.field;return null}function qi(t){return null!==t.collectionGroup}function ji(t){const e=Ar(t);if(null===e.p){e.p=[];const t=Bi(e),n=Fi(e);if(null!==t&&null===n)t.isKeyField()||e.p.push(new Ri(t)),e.p.push(new Ri(Fr.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.p.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Ri(Fr.keyField(),t))}}}return e.p}function Hi(t){const e=Ar(t);if(!e.T)if("F"===e.limitType)e.T=mi(e.path,e.collectionGroup,ji(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const n of ji(e)){const e="desc"===n.dir?"asc":"desc";t.push(new Ri(n.field,e))}const n=e.endAt?new ki(e.endAt.position,!e.endAt.before):null,r=e.startAt?new ki(e.startAt.position,!e.startAt.before):null;e.T=mi(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}return e.T}function zi(t,e,n){return new Li(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ki(t,e){return vi(Hi(t),Hi(e))&&t.limitType===e.limitType}function Gi(t){return`${gi(Hi(t))}|lt:${t.limitType}`}function $i(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>{return`${(e=t).field.canonicalString()} ${e.op} ${ii(e.value)}`;var e})).join(", ")}]`),Wr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: "+Ci(t.startAt)),t.endAt&&(e+=", endAt: "+Ci(t.endAt)),`Target(${e})`}(Hi(t))}; limitType=${t.limitType})`}function Xi(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Jr.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Di(t.startAt,ji(t),e))&&(!t.endAt||!Di(t.endAt,ji(t),e))}(t,e)}function Wi(t){return(e,n)=>{let r=!1;for(const i of ji(t)){const t=Yi(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function Yi(t,e,n){const r=t.field.isKeyField()?Jr.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?ni(r,i):xr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return xr()}}function Qi(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yr(e)?"-0":e}}function Ji(t){return{integerValue:""+t}}function Zi(t,e){return Qr(e)?Ji(e):Qi(t,e)}class ts{constructor(){this._=void 0}}function es(t,e,n){return t instanceof is?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ss?os(t,e):t instanceof as?us(t,e):function(t,e){const n=rs(t,e),r=ls(n)+ls(t.A);return oi(n)&&oi(t.A)?Ji(r):Qi(t.R,r)}(t,e)}function ns(t,e,n){return t instanceof ss?os(t,e):t instanceof as?us(t,e):n}function rs(t,e){return t instanceof cs?oi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class is extends ts{}class ss extends ts{constructor(t){super(),this.elements=t}}function os(t,e){const n=hs(e);for(const e of t.elements)n.some((t=>ti(t,e)))||n.push(e);return{arrayValue:{values:n}}}class as extends ts{constructor(t){super(),this.elements=t}}function us(t,e){let n=hs(e);for(const e of t.elements)n=n.filter((t=>!ti(t,e)));return{arrayValue:{values:n}}}class cs extends ts{constructor(t,e){super(),this.R=t,this.A=e}}function ls(t){return zr(t.integerValue||t.doubleValue)}function hs(t){return ai(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class fs{constructor(t,e){this.field=t,this.transform=e}}class ds{constructor(t,e){this.version=t,this.transformResults=e}}class ps{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ps}static exists(t){return new ps(void 0,t)}static updateTime(t){return new ps(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ms(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class gs{}function vs(t,e,n){t instanceof Ts?function(t,e,n){const r=t.value.clone(),i=Ss(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof _s?function(t,e,n){if(!ms(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=Ss(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(xs(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ys(t,e,n){t instanceof Ts?function(t,e,n){if(!ms(t.precondition,e))return;const r=t.value.clone(),i=As(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Es(e),r).setHasLocalMutations()}(t,e,n):t instanceof _s?function(t,e,n){if(!ms(t.precondition,e))return;const r=As(t.fieldTransforms,n,e),i=e.data;i.setAll(xs(t)),i.setAll(r),e.convertToFoundDocument(Es(e),i).setHasLocalMutations()}(t,e,n):function(t,e){ms(t.precondition,e)&&e.convertToNoDocument(Dr.min())}(t,e)}function ws(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=rs(r.transform,t||null);null!=i&&(null==n&&(n=hi.empty()),n.set(r.field,i))}return n||null}function bs(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Rr(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ss&&e instanceof ss||t instanceof as&&e instanceof as?Rr(t.elements,e.elements,ti):t instanceof cs&&e instanceof cs?ti(t.A,e.A):t instanceof is&&e instanceof is}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Es(t){return t.isFoundDocument()?t.version:Dr.min()}class Ts extends gs{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}}class _s extends gs{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function xs(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Ss(t,e,n){const r=new Map;Sr(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ns(o,a,n[i]))}return r}function As(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,es(t,s,e))}return r}class Is extends gs{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class ks extends gs{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class Cs{constructor(t){this.count=t}}var Rs,Ps;function Ds(t){switch(t){case gr.OK:return xr();case gr.CANCELLED:case gr.UNKNOWN:case gr.DEADLINE_EXCEEDED:case gr.RESOURCE_EXHAUSTED:case gr.INTERNAL:case gr.UNAVAILABLE:case gr.UNAUTHENTICATED:return!1;case gr.INVALID_ARGUMENT:case gr.NOT_FOUND:case gr.ALREADY_EXISTS:case gr.PERMISSION_DENIED:case gr.FAILED_PRECONDITION:case gr.ABORTED:case gr.OUT_OF_RANGE:case gr.UNIMPLEMENTED:case gr.DATA_LOSS:return!0;default:return xr()}}function Ns(t){if(void 0===t)return Er("GRPC error has no .code"),gr.UNKNOWN;switch(t){case Rs.OK:return gr.OK;case Rs.CANCELLED:return gr.CANCELLED;case Rs.UNKNOWN:return gr.UNKNOWN;case Rs.DEADLINE_EXCEEDED:return gr.DEADLINE_EXCEEDED;case Rs.RESOURCE_EXHAUSTED:return gr.RESOURCE_EXHAUSTED;case Rs.INTERNAL:return gr.INTERNAL;case Rs.UNAVAILABLE:return gr.UNAVAILABLE;case Rs.UNAUTHENTICATED:return gr.UNAUTHENTICATED;case Rs.INVALID_ARGUMENT:return gr.INVALID_ARGUMENT;case Rs.NOT_FOUND:return gr.NOT_FOUND;case Rs.ALREADY_EXISTS:return gr.ALREADY_EXISTS;case Rs.PERMISSION_DENIED:return gr.PERMISSION_DENIED;case Rs.FAILED_PRECONDITION:return gr.FAILED_PRECONDITION;case Rs.ABORTED:return gr.ABORTED;case Rs.OUT_OF_RANGE:return gr.OUT_OF_RANGE;case Rs.UNIMPLEMENTED:return gr.UNIMPLEMENTED;case Rs.DATA_LOSS:return gr.DATA_LOSS;default:return xr()}}(Ps=Rs||(Rs={}))[Ps.OK=0]="OK",Ps[Ps.CANCELLED=1]="CANCELLED",Ps[Ps.UNKNOWN=2]="UNKNOWN",Ps[Ps.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ps[Ps.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ps[Ps.NOT_FOUND=5]="NOT_FOUND",Ps[Ps.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ps[Ps.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ps[Ps.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ps[Ps.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ps[Ps.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ps[Ps.ABORTED=10]="ABORTED",Ps[Ps.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ps[Ps.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ps[Ps.INTERNAL=13]="INTERNAL",Ps[Ps.UNAVAILABLE=14]="UNAVAILABLE",Ps[Ps.DATA_LOSS=15]="DATA_LOSS";class Ls{constructor(t,e){this.comparator=t,this.root=e||Ms.EMPTY}insert(t,e){return new Ls(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ms.BLACK,null,null))}remove(t){return new Ls(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ms.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Os(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Os(this.root,t,this.comparator,!1)}getReverseIterator(){return new Os(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Os(this.root,t,this.comparator,!0)}}class Os{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ms{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Ms.RED,this.left=null!=r?r:Ms.EMPTY,this.right=null!=i?i:Ms.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new Ms(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ms.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Ms.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ms.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ms.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xr();if(this.right.isRed())throw xr();const t=this.left.check();if(t!==this.right.check())throw xr();return t+(this.isRed()?0:1)}}Ms.EMPTY=null,Ms.RED=!0,Ms.BLACK=!1,Ms.EMPTY=new class{constructor(){this.size=0}get key(){throw xr()}get value(){throw xr()}get color(){throw xr()}get left(){throw xr()}get right(){throw xr()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Ms(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vs{constructor(t){this.comparator=t,this.data=new Ls(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Us(this.data.getIterator())}getIteratorFrom(t){return new Us(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Vs))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Vs(this.comparator);return e.data=t,e}}class Us{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Fs=new Ls(Jr.comparator);function Bs(){return Fs}const qs=new Ls(Jr.comparator);function js(){return qs}const Hs=new Ls(Jr.comparator);function zs(){return Hs}const Ks=new Vs(Jr.comparator);function Gs(...t){let e=Ks;for(const n of t)e=e.add(n);return e}const $s=new Vs(Cr);function Xs(){return $s}class Ws{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,Ys.createSynthesizedTargetChangeForCurrentChange(t,e)),new Ws(Dr.min(),n,Xs(),Bs(),Gs())}}class Ys{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e){return new Ys(qr.EMPTY_BYTE_STRING,e,Gs(),Gs(),Gs())}}class Qs{constructor(t,e,n,r){this.P=t,this.removedTargetIds=e,this.key=n,this.v=r}}class Js{constructor(t,e){this.targetId=t,this.V=e}}class Zs{constructor(t,e,n=qr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class to{constructor(){this.S=0,this.D=ro(),this.C=qr.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}get current(){return this.N}get resumeToken(){return this.C}get O(){return 0!==this.S}get $(){return this.k}M(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)}F(){let t=Gs(),e=Gs(),n=Gs();return this.D.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:xr()}})),new Ys(this.C,this.N,t,e,n)}L(){this.k=!1,this.D=ro()}B(t,e){this.k=!0,this.D=this.D.insert(t,e)}q(t){this.k=!0,this.D=this.D.remove(t)}U(){this.S+=1}K(){this.S-=1}j(){this.k=!0,this.N=!0}}class eo{constructor(t){this.W=t,this.G=new Map,this.H=Bs(),this.J=no(),this.Y=new Vs(Cr)}X(t){for(const e of t.P)t.v&&t.v.isFoundDocument()?this.Z(e,t.v):this.tt(e,t.key,t.v);for(const e of t.removedTargetIds)this.tt(e,t.key,t.v)}et(t){this.forEachTarget(t,(e=>{const n=this.nt(e);switch(t.state){case 0:this.st(e)&&n.M(t.resumeToken);break;case 1:n.K(),n.O||n.L(),n.M(t.resumeToken);break;case 2:n.K(),n.O||this.removeTarget(e);break;case 3:this.st(e)&&(n.j(),n.M(t.resumeToken));break;case 4:this.st(e)&&(this.it(e),n.M(t.resumeToken));break;default:xr()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(((t,n)=>{this.st(n)&&e(n)}))}rt(t){const e=t.targetId,n=t.V.count,r=this.ot(e);if(r){const t=r.target;if(yi(t))if(0===n){const n=new Jr(t.path);this.tt(e,n,di.newNoDocument(n,Dr.min()))}else Sr(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}}ut(t){const e=new Map;this.G.forEach(((n,r)=>{const i=this.ot(r);if(i){if(n.current&&yi(i.target)){const e=new Jr(i.target.path);null!==this.H.get(e)||this.at(r,e)||this.tt(r,e,di.newNoDocument(e,t))}n.$&&(e.set(r,n.F()),n.L())}}));let n=Gs();this.J.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.ot(t);return!e||2===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))}));const r=new Ws(t,e,this.Y,this.H,n);return this.H=Bs(),this.J=no(),this.Y=new Vs(Cr),r}Z(t,e){if(!this.st(t))return;const n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}tt(t,e,n){if(!this.st(t))return;const r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}removeTarget(t){this.G.delete(t)}ct(t){const e=this.nt(t).F();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}U(t){this.nt(t).U()}nt(t){let e=this.G.get(t);return e||(e=new to,this.G.set(t,e)),e}ht(t){let e=this.J.get(t);return e||(e=new Vs(Cr),this.J=this.J.insert(t,e)),e}st(t){const e=null!==this.ot(t);return e||br("WatchChangeAggregator","Detected inactive target",t),e}ot(t){const e=this.G.get(t);return e&&e.O?null:this.W.lt(t)}it(t){this.G.set(t,new to),this.W.getRemoteKeysForTarget(t).forEach((e=>{this.tt(t,e,null)}))}at(t,e){return this.W.getRemoteKeysForTarget(t).has(e)}}function no(){return new Ls(Jr.comparator)}function ro(){return new Ls(Jr.comparator)}const io={asc:"ASCENDING",desc:"DESCENDING"},so={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class oo{constructor(t,e){this.databaseId=t,this.I=e}}function ao(t,e){return t.I?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uo(t,e){return t.I?e.toBase64():e.toUint8Array()}function co(t,e){return ao(t,e.toTimestamp())}function lo(t){return Sr(!!t),Dr.fromTimestamp(function(t){const e=Hr(t);return new Pr(e.seconds,e.nanos)}(t))}function ho(t,e){return function(t){return new Vr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function fo(t){const e=Vr.fromString(t);return Sr(Oo(e)),e}function po(t,e){return ho(t.databaseId,e.path)}function mo(t,e){const n=fo(e);if(n.get(1)!==t.databaseId.projectId)throw new vr(gr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new vr(gr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Jr(wo(n))}function go(t,e){return ho(t.databaseId,e)}function vo(t){const e=fo(t);return 4===e.length?Vr.emptyPath():wo(e)}function yo(t){return new Vr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wo(t){return Sr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function bo(t,e,n){return{name:po(t,e),fields:n.toProto().mapValue.fields}}function Eo(t,e){let n;if(e instanceof Ts)n={update:bo(t,e.key,e.value)};else if(e instanceof Is)n={delete:po(t,e.key)};else if(e instanceof _s)n={update:bo(t,e.key,e.data),updateMask:Lo(e.fieldMask)};else{if(!(e instanceof ks))return xr();n={verify:po(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof is)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ss)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof as)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof cs)return{fieldPath:e.field.canonicalString(),increment:n.A};throw xr()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:co(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:xr()}(t,e.precondition)),n}function To(t,e){return{documents:[go(t,e.path)]}}function _o(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=go(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=go(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(t){if(0===t.length)return;const e=t.map((t=>function(t){if("=="===t.op){if(ci(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NAN"}};if(ui(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ci(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NAN"}};if(ui(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(t.field),op:Co(t.op),value:t.value}}}(t)));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Ro(t.field),direction:ko(t.dir)}}(t)))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(t,e){return t.I||Wr(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=Ao(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ao(e.endAt)),n}function xo(t){let e=vo(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Sr(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=So(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>function(t){return new Ri(Po(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Wr(e)?null:e}(n.limit));let u=null;n.startAt&&(u=Io(n.startAt));let c=null;return n.endAt&&(c=Io(n.endAt)),Oi(e,i,o,s,a,"F",u,c)}function So(t){return t?void 0!==t.unaryFilter?[No(t)]:void 0!==t.fieldFilter?[Do(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((t=>So(t))).reduce(((t,e)=>t.concat(e))):xr():[]}function Ao(t){return{before:t.before,values:t.position}}function Io(t){const e=!!t.before,n=t.values||[];return new ki(n,e)}function ko(t){return io[t]}function Co(t){return so[t]}function Ro(t){return{fieldPath:t.canonicalString()}}function Po(t){return Fr.fromServerFormat(t.fieldPath)}function Do(t){return wi.create(Po(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return xr()}}(t.fieldFilter.op),t.fieldFilter.value)}function No(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Po(t.unaryFilter.field);return wi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Po(t.unaryFilter.field);return wi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Po(t.unaryFilter.field);return wi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Po(t.unaryFilter.field);return wi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return xr()}}function Lo(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Oo(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Mo(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Uo(e)),e=Vo(t.get(n),e);return Uo(e)}function Vo(t,e){let n=e;const r=t.length;for(let e=0;e<r;e++){const r=t.charAt(e);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function Uo(t){return t+""}class Fo{constructor(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}}Fo.store="owner",Fo.key="owner";class Bo{constructor(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}}Bo.store="mutationQueues",Bo.keyPath="userId";class qo{constructor(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}qo.store="mutations",qo.keyPath="batchId",qo.userMutationsIndex="userMutationsIndex",qo.userMutationsKeyPath=["userId","batchId"];class jo{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,Mo(e)]}static key(t,e,n){return[t,Mo(e),n]}}jo.store="documentMutations",jo.PLACEHOLDER=new jo;class Ho{constructor(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}Ho.store="remoteDocuments",Ho.readTimeIndex="readTimeIndex",Ho.readTimeIndexPath="readTime",Ho.collectionReadTimeIndex="collectionReadTimeIndex",Ho.collectionReadTimeIndexPath=["parentPath","readTime"];class zo{constructor(t){this.byteSize=t}}zo.store="remoteDocumentGlobal",zo.key="remoteDocumentGlobalKey";class Ko{constructor(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}Ko.store="targets",Ko.keyPath="targetId",Ko.queryTargetsIndexName="queryTargetsIndex",Ko.queryTargetsKeyPath=["canonicalId","targetId"];class Go{constructor(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n}}Go.store="targetDocuments",Go.keyPath=["targetId","path"],Go.documentTargetsIndex="documentTargetsIndex",Go.documentTargetsKeyPath=["path","targetId"];class $o{constructor(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}$o.key="targetGlobalKey",$o.store="targetGlobal";class Xo{constructor(t,e){this.collectionId=t,this.parent=e}}Xo.store="collectionParents",Xo.keyPath=["collectionId","parent"];class Wo{constructor(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}}Wo.store="clientMetadata",Wo.keyPath="clientId";class Yo{constructor(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}}Yo.store="bundles",Yo.keyPath="bundleId";class Qo{constructor(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}}Qo.store="namedQueries",Qo.keyPath="name";Bo.store,qo.store,jo.store,Ho.store,Ko.store,Fo.store,$o.store,Go.store,Wo.store,zo.store,Xo.store,Yo.store,Qo.store;const Jo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}class ta{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class ea{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&xr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new ea(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof ea?e:ea.resolve(e)}catch(t){return ea.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):ea.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):ea.reject(e)}static resolve(t){return new ea(((e,n)=>{e(t)}))}static reject(t){return new ea(((e,n)=>{n(t)}))}static waitFor(t){return new ea(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=ea.resolve(!1);for(const n of t)e=e.next((t=>t?ea.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}}function na(t){return"IndexedDbTransactionError"===t.name}class ra{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const r=this.mutations[e];r.key.isEqual(t.key)&&vs(r,t,n[e])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&ys(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&ys(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach((e=>{const n=t.get(e.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Dr.min())}))}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Gs())}isEqual(t){return this.batchId===t.batchId&&Rr(this.mutations,t.mutations,((t,e)=>bs(t,e)))&&Rr(this.baseMutations,t.baseMutations,((t,e)=>bs(t,e)))}}class ia{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){Sr(t.mutations.length===n.length);let r=zs();const i=t.mutations;for(let t=0;t<i.length;t++)r=r.insert(i[t].key,n[t].version);return new ia(t,e,n,r)}}class sa{constructor(t,e,n,r,i=Dr.min(),s=Dr.min(),o=qr.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(t){return new sa(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class oa{constructor(t){this.Lt=t}}function aa(t){const e=xo({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?zi(e,e.limit,"L"):e}class ua{constructor(){this.Bt=new ca}addToCollectionParentIndex(t,e){return this.Bt.add(e),ea.resolve()}getCollectionParents(t,e){return ea.resolve(this.Bt.getEntries(e))}}class ca{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Vs(Vr.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new Vs(Vr.comparator)).toArray()}}class la{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new la(t,la.DEFAULT_COLLECTION_PERCENTILE,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}la.DEFAULT_COLLECTION_PERCENTILE=10,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,la.DEFAULT=new la(41943040,la.DEFAULT_COLLECTION_PERCENTILE,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),la.DISABLED=new la(-1,0,0);class ha{constructor(t){this.Ht=t}next(){return this.Ht+=2,this.Ht}static Jt(){return new ha(0)}static Yt(){return new ha(-1)}}async function fa(t){if(t.code!==gr.FAILED_PRECONDITION||t.message!==Jo)throw t;br("LocalStore","Unexpectedly lost primary lease")}class da{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,r]of n)if(this.equalsFn(e,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1}forEach(t){Lr(this.inner,((e,n)=>{for(const[e,r]of n)t(e,r)}))}isEmpty(){return Or(this.inner)}}class pa{constructor(){this.changes=new da((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:Dr.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:di.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?ea.resolve(n.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class ma{constructor(t,e,n){this.Ue=t,this._n=e,this.Ut=n}mn(t,e){return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((n=>this.gn(t,e,n)))}gn(t,e,n){return this.Ue.getEntry(t,e).next((t=>{for(const e of n)e.applyToLocalView(t);return t}))}yn(t,e){t.forEach(((t,n)=>{for(const t of e)t.applyToLocalView(n)}))}pn(t,e){return this.Ue.getEntries(t,e).next((e=>this.En(t,e).next((()=>e))))}En(t,e){return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>this.yn(e,t)))}getDocumentsMatchingQuery(t,e,n){return function(t){return Jr.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):qi(e)?this.In(t,e,n):this.An(t,e,n)}Tn(t,e){return this.mn(t,new Jr(e)).next((t=>{let e=js();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}In(t,e,n){const r=e.collectionGroup;let i=js();return this.Ut.getCollectionParents(t,r).next((s=>ea.forEach(s,(s=>{const o=function(t,e){return new Li(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(r));return this.An(t,o,n).next((t=>{t.forEach(((t,e)=>{i=i.insert(t,e)}))}))})).next((()=>i))))}An(t,e,n){let r,i;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((n=>(r=n,this._n.getAllMutationBatchesAffectingQuery(t,e)))).next((e=>(i=e,this.Rn(t,i,r).next((t=>{r=t;for(const t of i)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=di.newInvalidDocument(n),r=r.insert(n,i)),ys(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))))).next((()=>(r.forEach(((t,n)=>{Xi(e,n)||(r=r.remove(t))})),r)))}Rn(t,e,n){let r=Gs();for(const t of e)for(const e of t.mutations)e instanceof _s&&null===n.get(e.key)&&(r=r.add(e.key));let i=n;return this.Ue.getEntries(t,r).next((t=>(t.forEach(((t,e)=>{e.isFoundDocument()&&(i=i.insert(t,e))})),i)))}}class ga{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Pn=n,this.bn=r}static vn(t,e){let n=Gs(),r=Gs();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:r=r.add(t.doc.key)}return new ga(t,e.fromCache,n,r)}}class va{Vn(t){this.Sn=t}getDocumentsMatchingQuery(t,e,n,r){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Dr.min())?this.Dn(t,e):this.Sn.pn(t,r).next((i=>{const o=this.Cn(e,i);return(Vi(e)||Ui(e))&&this.Nn(e.limitType,o,r,n)?this.Dn(t,e):(wr()<=s.in.DEBUG&&br("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),$i(e)),this.Sn.getDocumentsMatchingQuery(t,e,n).next((t=>(o.forEach((e=>{t=t.insert(e.key,e)})),t))))}))}Cn(t,e){let n=new Vs(Wi(t));return e.forEach(((e,r)=>{Xi(t,r)&&(n=n.add(r))})),n}Nn(t,e,n,r){if(n.size!==e.size)return!0;const i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Dn(t,e){return wr()<=s.in.DEBUG&&br("QueryEngine","Using full collection scan to execute query:",$i(e)),this.Sn.getDocumentsMatchingQuery(t,e,Dr.min())}}class ya{constructor(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new Ls(Cr),this.On=new da((t=>gi(t)),vi),this.$n=Dr.min(),this._n=t.getMutationQueue(n),this.Mn=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Fn=new ma(this.Mn,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Fn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.kn)))}}function wa(t,e,n,r){return new ya(t,e,n,r)}async function ba(t,e){const n=Ar(t);let r=n._n,i=n.Fn;const s=await n.persistence.runTransaction("Handle user change","readonly",(t=>{let s;return n._n.getAllMutationBatches(t).next((o=>(s=o,r=n.persistence.getMutationQueue(e),i=new ma(n.Mn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)))).next((e=>{const n=[],r=[];let o=Gs();for(const t of s){n.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return i.pn(t,o).next((t=>({Ln:t,removedBatchIds:n,addedBatchIds:r})))}))}));return n._n=r,n.Fn=i,n.xn.Vn(n.Fn),s}function Ea(t){const e=Ar(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.qe.getLastRemoteSnapshotVersion(t)))}function Ta(t,e,n,r,i){let s=Gs();return n.forEach((t=>s=s.add(t))),e.getEntries(t,s).next((t=>{let s=Bs();return n.forEach(((n,o)=>{const a=t.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Dr.min())?(e.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,u),s=s.insert(n,o)):br("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),s}))}function _a(t,e){const n=Ar(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e))))}function xa(t,e){const n=Ar(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.qe.getTargetData(t,e).next((i=>i?(r=i,ea.resolve(r)):n.qe.allocateTargetId(t).next((i=>(r=new sa(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.On.set(e,t.targetId)),t}))}async function Sa(t,e,n){const r=Ar(t),i=r.kn.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!na(t))throw t;br("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.kn=r.kn.remove(e),r.On.delete(i.target)}function Aa(t,e,n){const r=Ar(t);let i=Dr.min(),s=Gs();return r.persistence.runTransaction("Execute query","readonly",(t=>function(t,e,n){const r=Ar(t),i=r.On.get(n);return void 0!==i?ea.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,Hi(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>r.xn.getDocumentsMatchingQuery(t,e,n?i:Dr.min(),n?s:Gs()))).next((t=>({documents:t,Bn:s})))))}class Ia{constructor(t){this.R=t,this.Qn=new Map,this.jn=new Map}getBundleMetadata(t,e){return ea.resolve(this.Qn.get(e))}saveBundleMetadata(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:lo(n.createTime)}),ea.resolve()}getNamedQuery(t,e){return ea.resolve(this.jn.get(e))}saveNamedQuery(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:aa(t.bundledQuery),readTime:lo(t.readTime)}}(e)),ea.resolve()}}class ka{constructor(){this.Wn=new Vs(Ca.Gn),this.zn=new Vs(Ca.Hn)}isEmpty(){return this.Wn.isEmpty()}addReference(t,e){const n=new Ca(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)}Jn(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Yn(new Ca(t,e))}Xn(t,e){t.forEach((t=>this.removeReference(t,e)))}Zn(t){const e=new Jr(new Vr([])),n=new Ca(e,t),r=new Ca(e,t+1),i=[];return this.zn.forEachInRange([n,r],(t=>{this.Yn(t),i.push(t.key)})),i}ts(){this.Wn.forEach((t=>this.Yn(t)))}Yn(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)}es(t){const e=new Jr(new Vr([])),n=new Ca(e,t),r=new Ca(e,t+1);let i=Gs();return this.zn.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new Ca(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Ca{constructor(t,e){this.key=t,this.ns=e}static Gn(t,e){return Jr.comparator(t.key,e.key)||Cr(t.ns,e.ns)}static Hn(t,e){return Cr(t.ns,e.ns)||Jr.comparator(t.key,e.key)}}class Ra{constructor(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Vs(Ca.Gn)}checkEmpty(t){return ea.resolve(0===this._n.length)}addMutationBatch(t,e,n,r){const i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];const s=new ra(i,e,n,r);this._n.push(s);for(const e of r)this.rs=this.rs.add(new Ca(e.key,i)),this.Ut.addToCollectionParentIndex(t,e.key.path.popLast());return ea.resolve(s)}lookupMutationBatch(t,e){return ea.resolve(this.os(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.cs(n),i=r<0?0:r;return ea.resolve(this._n.length>i?this._n[i]:null)}getHighestUnacknowledgedBatchId(){return ea.resolve(0===this._n.length?-1:this.ss-1)}getAllMutationBatches(t){return ea.resolve(this._n.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Ca(e,0),r=new Ca(e,Number.POSITIVE_INFINITY),i=[];return this.rs.forEachInRange([n,r],(t=>{const e=this.os(t.ns);i.push(e)})),ea.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Vs(Cr);return e.forEach((t=>{const e=new Ca(t,0),r=new Ca(t,Number.POSITIVE_INFINITY);this.rs.forEachInRange([e,r],(t=>{n=n.add(t.ns)}))})),ea.resolve(this.us(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;Jr.isDocumentKey(i)||(i=i.child(""));const s=new Ca(new Jr(i),0);let o=new Vs(Cr);return this.rs.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.ns)),!0)}),s),ea.resolve(this.us(o))}us(t){const e=[];return t.forEach((t=>{const n=this.os(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Sr(0===this.hs(e.batchId,"removed")),this._n.shift();let n=this.rs;return ea.forEach(e.mutations,(r=>{const i=new Ca(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.rs=n}))}Gt(t){}containsKey(t,e){const n=new Ca(e,0),r=this.rs.firstAfterOrEqual(n);return ea.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this._n.length,ea.resolve()}hs(t,e){return this.cs(t)}cs(t){return 0===this._n.length?0:t-this._n[0].batchId}os(t){const e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]}}class Pa{constructor(t,e){this.Ut=t,this.ls=e,this.docs=new Ls(Jr.comparator),this.size=0}addEntry(t,e,n){const r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Ut.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return ea.resolve(n?n.document.clone():di.newInvalidDocument(e))}getEntries(t,e){let n=Bs();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.clone():di.newInvalidDocument(t))})),ea.resolve(n)}getDocumentsMatchingQuery(t,e,n){let r=Bs();const i=new Jr(e.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:t,value:{document:i,readTime:o}}=s.getNext();if(!e.path.isPrefixOf(t.path))break;o.compareTo(n)<=0||Xi(e,i)&&(r=r.insert(i.key,i.clone()))}return ea.resolve(r)}fs(t,e){return ea.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Da(this)}getSize(t){return ea.resolve(this.size)}}class Da extends pa{constructor(t){super(),this.Ie=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.document.isValidDocument()?e.push(this.Ie.addEntry(t,r.document,this.getReadTime(n))):this.Ie.removeEntry(n)})),ea.waitFor(e)}getFromCache(t,e){return this.Ie.getEntry(t,e)}getAllFromCache(t,e){return this.Ie.getEntries(t,e)}}class Na{constructor(t){this.persistence=t,this.ds=new da((t=>gi(t)),vi),this.lastRemoteSnapshotVersion=Dr.min(),this.highestTargetId=0,this.ws=0,this._s=new ka,this.targetCount=0,this.gs=ha.Jt()}forEachTarget(t,e){return this.ds.forEach(((t,n)=>e(n))),ea.resolve()}getLastRemoteSnapshotVersion(t){return ea.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ea.resolve(this.ws)}allocateTargetId(t){return this.highestTargetId=this.gs.next(),ea.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),ea.resolve()}te(t){this.ds.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.gs=new ha(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)}addTargetData(t,e){return this.te(e),this.targetCount+=1,ea.resolve()}updateTargetData(t,e){return this.te(e),ea.resolve()}removeTargetData(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,ea.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.ds.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.ds.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),ea.waitFor(i).next((()=>r))}getTargetCount(t){return ea.resolve(this.targetCount)}getTargetData(t,e){const n=this.ds.get(e)||null;return ea.resolve(n)}addMatchingKeys(t,e,n){return this._s.Jn(e,n),ea.resolve()}removeMatchingKeys(t,e,n){this._s.Xn(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),ea.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this._s.Zn(e),ea.resolve()}getMatchingKeysForTargetId(t,e){const n=this._s.es(e);return ea.resolve(n)}containsKey(t,e){return ea.resolve(this._s.containsKey(e))}}class La{constructor(t,e){this.ys={},this.Ne=new mr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Na(this),this.Ut=new ua,this.Ue=function(t,e){return new Pa(t,e)}(this.Ut,(t=>this.referenceDelegate.ps(t))),this.R=new oa(e),this.Ke=new Ia(this.R)}start(){return Promise.resolve()}shutdown(){return this.xe=!1,Promise.resolve()}get started(){return this.xe}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ut}getMutationQueue(t){let e=this.ys[t.toKey()];return e||(e=new Ra(this.Ut,this.referenceDelegate),this.ys[t.toKey()]=e),e}getTargetCache(){return this.qe}getRemoteDocumentCache(){return this.Ue}getBundleCache(){return this.Ke}runTransaction(t,e,n){br("MemoryPersistence","Starting transaction:",t);const r=new Oa(this.Ne.next());return this.referenceDelegate.Es(),n(r).next((t=>this.referenceDelegate.Ts(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Is(t,e){return ea.or(Object.values(this.ys).map((n=>()=>n.containsKey(t,e))))}}class Oa extends Zo{constructor(t){super(),this.currentSequenceNumber=t}}class Ma{constructor(t){this.persistence=t,this.As=new ka,this.Rs=null}static Ps(t){return new Ma(t)}get bs(){if(this.Rs)return this.Rs;throw xr()}addReference(t,e,n){return this.As.addReference(n,e),this.bs.delete(n.toString()),ea.resolve()}removeReference(t,e,n){return this.As.removeReference(n,e),this.bs.add(n.toString()),ea.resolve()}markPotentiallyOrphaned(t,e){return this.bs.add(e.toString()),ea.resolve()}removeTarget(t,e){this.As.Zn(e.targetId).forEach((t=>this.bs.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.bs.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Es(){this.Rs=new Set}Ts(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ea.forEach(this.bs,(n=>{const r=Jr.fromPath(n);return this.vs(t,r).next((t=>{t||e.removeEntry(r)}))})).next((()=>(this.Rs=null,e.apply(t))))}updateLimboDocument(t,e){return this.vs(t,e).next((t=>{t?this.bs.delete(e.toString()):this.bs.add(e.toString())}))}ps(t){return 0}vs(t,e){return ea.or([()=>ea.resolve(this.As.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Is(t,e)])}}class Va{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Va.UNAUTHENTICATED=new Va(null),Va.GOOGLE_CREDENTIALS=new Va("google-credentials-uid"),Va.FIRST_PARTY=new Va("first-party-uid");class Ua{constructor(){this.activeTargetIds=Xs()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}Cs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ss(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Fa{constructor(){this.li=new Ua,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.li.Ds(t),this.fi[t]||"not-current"}updateQueryState(t,e,n){this.fi[t]=e}removeLocalQueryTarget(t){this.li.Cs(t)}isLocalQueryTarget(t){return this.li.activeTargetIds.has(t)}clearQueryState(t){delete this.fi[t]}getAllActiveQueryTargets(){return this.li.activeTargetIds}isActiveQueryTarget(t){return this.li.activeTargetIds.has(t)}start(){return this.li=new Ua,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}class Ba{di(t){}shutdown(){}}class qa{constructor(){this.wi=()=>this._i(),this.mi=()=>this.gi(),this.yi=[],this.pi()}di(t){this.yi.push(t)}shutdown(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)}pi(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)}_i(){br("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.yi)t(0)}gi(){br("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.yi)t(1)}static gt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ja={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Ha{constructor(t){this.Ei=t.Ei,this.Ti=t.Ti}Ii(t){this.Ai=t}Ri(t){this.Pi=t}onMessage(t){this.bi=t}close(){this.Ti()}send(t){this.Ei(t)}vi(){this.Ai()}Vi(t){this.Pi(t)}Si(t){this.bi(t)}}class za extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Ni(t,e,n,r){const i=this.xi(t,e);br("RestConnection","Sending: ",i,n);const s={};return this.ki(s,r),this.Oi(t,i,s,n).then((t=>(br("RestConnection","Received: ",t),t)),(e=>{throw Tr("RestConnection",`${t} failed with error: `,e,"url: ",i,"request:",n),e}))}$i(t,e,n,r){return this.Ni(t,e,n,r)}ki(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.4.1",t["X-Firebase-GMPID"]=this.databaseInfo.appId,t["Content-Type"]="text/plain",e)for(const n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])}xi(t,e){const n=ja[t];return`${this.Di}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling}Oi(t,e,n,r){return new Promise(((i,s)=>{const o=new pr;o.listenOnce(lr.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case cr.NO_ERROR:const e=o.getResponseJson();br("Connection","XHR received:",JSON.stringify(e)),i(e);break;case cr.TIMEOUT:br("Connection",'RPC "'+t+'" timed out'),s(new vr(gr.DEADLINE_EXCEEDED,"Request time out"));break;case cr.HTTP_ERROR:const n=o.getStatus();if(br("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(gr).indexOf(e)>=0?e:gr.UNKNOWN}(t.status);s(new vr(e,t.message))}else s(new vr(gr.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new vr(gr.UNAVAILABLE,"Connection failed."));break;default:xr()}}finally{br("Connection",'RPC "'+t+'" completed.')}}));const a=JSON.stringify(r);o.send(e,"POST",a,n,15)}))}Mi(t,e){const n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=ar(),i=ur(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.ki(s.initMessageHeaders,e),(0,o.uI)()||(0,o.b$)()||(0,o.d)()||(0,o.w1)()||(0,o.Mn)()||(0,o.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");const a=n.join("");br("Connection","Creating WebChannel: "+a,s);const u=r.createWebChannel(a,s);let c=!1,l=!1;const h=new Ha({Ei:t=>{l?br("Connection","Not sending because WebChannel is closed:",t):(c||(br("Connection","Opening WebChannel transport."),u.open(),c=!0),br("Connection","WebChannel sending:",t),u.send(t))},Ti:()=>u.close()}),f=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return f(u,dr.EventType.OPEN,(()=>{l||br("Connection","WebChannel transport opened.")})),f(u,dr.EventType.CLOSE,(()=>{l||(l=!0,br("Connection","WebChannel transport closed"),h.Vi())})),f(u,dr.EventType.ERROR,(t=>{l||(l=!0,Tr("Connection","WebChannel transport errored:",t),h.Vi(new vr(gr.UNAVAILABLE,"The operation could not be completed")))})),f(u,dr.EventType.MESSAGE,(t=>{var e;if(!l){const n=t.data[0];Sr(!!n);const r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){br("Connection","WebChannel received error:",i);const t=i.status;let e=function(t){const e=Rs[t];if(void 0!==e)return Ns(e)}(t),n=i.message;void 0===e&&(e=gr.INTERNAL,n="Unknown error status: "+t+" with message "+i.message),l=!0,h.Vi(new vr(e,n)),u.close()}else br("Connection","WebChannel received:",n),h.Si(n)}})),f(i,hr.STAT_EVENT,(t=>{t.stat===fr.PROXY?br("Connection","Detected buffering proxy"):t.stat===fr.NOPROXY&&br("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.vi()}),0),h}}function Ka(){return"undefined"!=typeof document?document:null}function Ga(t){return new oo(t,!0)}class $a{constructor(t,e,n=1e3,r=1.5,i=6e4){this.Se=t,this.timerId=e,this.Fi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}reset(){this.qi=0}Qi(){this.qi=this.Bi}ji(t){this.cancel();const e=Math.floor(this.qi+this.Wi()),n=Math.max(0,Date.now()-this.Ki),r=Math.max(0,e-n);r>0&&br("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.qi} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Ui=this.Se.enqueueAfterDelay(this.timerId,r,(()=>(this.Ki=Date.now(),t()))),this.qi*=this.Li,this.qi<this.Fi&&(this.qi=this.Fi),this.qi>this.Bi&&(this.qi=this.Bi)}Gi(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)}cancel(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)}Wi(){return(Math.random()-.5)*this.qi}}class Xa{constructor(t,e,n,r,i,s){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new $a(t,e)}tr(){return 1===this.state||2===this.state||4===this.state}er(){return 2===this.state}start(){3!==this.state?this.auth():this.nr()}async stop(){this.tr()&&await this.close(0)}sr(){this.state=0,this.Zi.reset()}ir(){this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(()=>this.rr())))}cr(t){this.ur(),this.stream.send(t)}async rr(){if(this.er())return this.close(0)}ur(){this.Xi&&(this.Xi.cancel(),this.Xi=null)}async close(t,e){this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===gr.RESOURCE_EXHAUSTED?(Er(e.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===gr.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ri(e)}ar(){}auth(){this.state=1;const t=this.hr(this.Yi),e=this.Yi;this.Ji.getToken().then((t=>{this.Yi===e&&this.lr(t)}),(e=>{t((()=>{const t=new vr(gr.UNKNOWN,"Fetching auth token failed: "+e.message);return this.dr(t)}))}))}lr(t){const e=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((()=>{e((()=>(this.state=2,this.listener.Ii())))})),this.stream.Ri((t=>{e((()=>this.dr(t)))})),this.stream.onMessage((t=>{e((()=>this.onMessage(t)))}))}nr(){this.state=4,this.Zi.ji((async()=>{this.state=0,this.start()}))}dr(t){return br("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(3,t)}hr(t){return e=>{this.Se.enqueueAndForget((()=>this.Yi===t?e():(br("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Wa extends Xa{constructor(t,e,n,r,i){super(t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i),this.R=r}wr(t){return this.Hi.Mi("Listen",t)}onMessage(t){this.Zi.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:xr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.I?(Sr(void 0===e||"string"==typeof e),qr.fromBase64String(e||"")):(Sr(void 0===e||e instanceof Uint8Array),qr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?gr.UNKNOWN:Ns(t.code);return new vr(e,t.message||"")}(o);n=new Zs(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=mo(t,r.document.name),s=lo(r.document.updateTime),o=new hi({mapValue:{fields:r.document.fields}}),a=di.newFoundDocument(i,s,o),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Qs(u,c,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=mo(t,r.document),s=r.readTime?lo(r.readTime):Dr.min(),o=di.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Qs([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=mo(t,r.document),s=r.removedTargetIds||[];n=new Qs([],s,i,null)}else{if(!("filter"in e))return xr();{e.filter;const t=e.filter;t.targetId;const r=t.count||0,i=new Cs(r),s=t.targetId;n=new Js(s,i)}}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Dr.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Dr.min():e.readTime?lo(e.readTime):Dr.min()}(t);return this.listener._r(e,n)}mr(t){const e={};e.database=yo(this.R),e.addTarget=function(t,e){let n;const r=e.target;return n=yi(r)?{documents:To(t,r)}:{query:_o(t,r)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=uo(t,e.resumeToken):e.snapshotVersion.compareTo(Dr.min())>0&&(n.readTime=ao(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return xr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)}gr(t){const e={};e.database=yo(this.R),e.removeTarget=t,this.cr(e)}}class Ya extends Xa{constructor(t,e,n,r,i){super(t,"write_stream_connection_backoff","write_stream_idle",e,n,i),this.R=r,this.yr=!1}get pr(){return this.yr}start(){this.yr=!1,this.lastStreamToken=void 0,super.start()}ar(){this.yr&&this.Er([])}wr(t){return this.Hi.Mi("Write",t)}onMessage(t){if(Sr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.yr){this.Zi.reset();const e=function(t,e){return t&&t.length>0?(Sr(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?lo(t.updateTime):lo(e);return n.isEqual(Dr.min())&&(n=lo(e)),new ds(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=lo(t.commitTime);return this.listener.Tr(n,e)}return Sr(!t.writeResults||0===t.writeResults.length),this.yr=!0,this.listener.Ir()}Ar(){const t={};t.database=yo(this.R),this.cr(t)}Er(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>Eo(this.R,t)))};this.cr(e)}}class Qa extends class{}{constructor(t,e,n){super(),this.credentials=t,this.Hi=e,this.R=n,this.Rr=!1}Pr(){if(this.Rr)throw new vr(gr.FAILED_PRECONDITION,"The client has already been terminated.")}Ni(t,e,n){return this.Pr(),this.credentials.getToken().then((r=>this.Hi.Ni(t,e,n,r))).catch((t=>{throw t.code===gr.UNAUTHENTICATED&&this.credentials.invalidateToken(),t}))}$i(t,e,n){return this.Pr(),this.credentials.getToken().then((r=>this.Hi.$i(t,e,n,r))).catch((t=>{throw t.code===gr.UNAUTHENTICATED&&this.credentials.invalidateToken(),t}))}terminate(){this.Rr=!1}}class Ja{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.br=0,this.vr=null,this.Vr=!0}Sr(){0===this.br&&(this.Dr("Unknown"),this.vr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.vr=null,this.Cr("Backend didn't respond within 10 seconds."),this.Dr("Offline"),Promise.resolve()))))}Nr(t){"Online"===this.state?this.Dr("Unknown"):(this.br++,this.br>=1&&(this.kr(),this.Cr(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Dr("Offline")))}set(t){this.kr(),this.br=0,"Online"===t&&(this.Vr=!1),this.Dr(t)}Dr(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}Cr(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(Er(e),this.Vr=!1):br("OnlineStateTracker",e)}kr(){null!==this.vr&&(this.vr.cancel(),this.vr=null)}}class Za{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Or=[],this.$r=new Map,this.Mr=new Set,this.Fr=[],this.Lr=i,this.Lr.di((t=>{n.enqueueAndForget((async()=>{uu(this)&&(br("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Ar(t);e.Mr.add(4),await eu(e),e.Br.set("Unknown"),e.Mr.delete(4),await tu(e)}(this))}))})),this.Br=new Ja(n,r)}}async function tu(t){if(uu(t))for(const e of t.Fr)await e(!0)}async function eu(t){for(const e of t.Fr)await e(!1)}function nu(t,e){const n=Ar(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),au(n)?ou(n):Su(n).er()&&iu(n,e))}function ru(t,e){const n=Ar(t),r=Su(n);n.$r.delete(e),r.er()&&su(n,e),0===n.$r.size&&(r.er()?r.ir():uu(n)&&n.Br.set("Unknown"))}function iu(t,e){t.qr.U(e.targetId),Su(t).mr(e)}function su(t,e){t.qr.U(e),Su(t).gr(e)}function ou(t){t.qr=new eo({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.$r.get(e)||null}),Su(t).start(),t.Br.Sr()}function au(t){return uu(t)&&!Su(t).tr()&&t.$r.size>0}function uu(t){return 0===Ar(t).Mr.size}function cu(t){t.qr=void 0}async function lu(t){t.$r.forEach(((e,n)=>{iu(t,e)}))}async function hu(t,e){cu(t),au(t)?(t.Br.Nr(e),ou(t)):t.Br.set("Unknown")}async function fu(t,e,n){if(t.Br.set("Online"),e instanceof Zs&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.$r.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.$r.delete(r),t.qr.removeTarget(r))}(t,e)}catch(n){br("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await du(t,n)}else if(e instanceof Qs?t.qr.X(e):e instanceof Js?t.qr.rt(e):t.qr.et(e),!n.isEqual(Dr.min()))try{const e=await Ea(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.qr.ut(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((e=>{const n=t.$r.get(e);if(!n)return;t.$r.set(e,n.withResumeToken(qr.EMPTY_BYTE_STRING,n.snapshotVersion)),su(t,e);const r=new sa(n.target,e,1,n.sequenceNumber);iu(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){br("RemoteStore","Failed to raise snapshot:",e),await du(t,e)}}async function du(t,e,n){if(!na(e))throw e;t.Mr.add(1),await eu(t),t.Br.set("Offline"),n||(n=()=>Ea(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{br("RemoteStore","Retrying IndexedDB access"),await n(),t.Mr.delete(1),await tu(t)}))}function pu(t,e){return e().catch((n=>du(t,n,e)))}async function mu(t){const e=Ar(t),n=Au(e);let r=e.Or.length>0?e.Or[e.Or.length-1].batchId:-1;for(;gu(e);)try{const t=await _a(e.localStore,r);if(null===t){0===e.Or.length&&n.ir();break}r=t.batchId,vu(e,t)}catch(t){await du(e,t)}yu(e)&&wu(e)}function gu(t){return uu(t)&&t.Or.length<10}function vu(t,e){t.Or.push(e);const n=Au(t);n.er()&&n.pr&&n.Er(e.mutations)}function yu(t){return uu(t)&&!Au(t).tr()&&t.Or.length>0}function wu(t){Au(t).start()}async function bu(t){Au(t).Ar()}async function Eu(t){const e=Au(t);for(const n of t.Or)e.Er(n.mutations)}async function Tu(t,e,n){const r=t.Or.shift(),i=ia.from(r,e,n);await pu(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await mu(t)}async function _u(t,e){e&&Au(t).pr&&await async function(t,e){if(Ds(n=e.code)&&n!==gr.ABORTED){const n=t.Or.shift();Au(t).sr(),await pu(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await mu(t)}var n}(t,e),yu(t)&&wu(t)}async function xu(t,e){const n=Ar(t);e?(n.Mr.delete(2),await tu(n)):e||(n.Mr.add(2),await eu(n),n.Br.set("Unknown"))}function Su(t){return t.Ur||(t.Ur=function(t,e,n){const r=Ar(t);return r.Pr(),new Wa(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:lu.bind(null,t),Ri:hu.bind(null,t),_r:fu.bind(null,t)}),t.Fr.push((async e=>{e?(t.Ur.sr(),au(t)?ou(t):t.Br.set("Unknown")):(await t.Ur.stop(),cu(t))}))),t.Ur}function Au(t){return t.Kr||(t.Kr=function(t,e,n){const r=Ar(t);return r.Pr(),new Ya(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:bu.bind(null,t),Ri:_u.bind(null,t),Ir:Eu.bind(null,t),Tr:Tu.bind(null,t)}),t.Fr.push((async e=>{e?(t.Kr.sr(),await mu(t)):(await t.Kr.stop(),t.Or.length>0&&(br("RemoteStore",`Stopping write stream with ${t.Or.length} pending writes`),t.Or=[]))}))),t.Kr}class Iu{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ta,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new Iu(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new vr(gr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ku(t,e){if(Er("AsyncQueue",`${e}: ${t}`),na(t))return new vr(gr.UNAVAILABLE,`${e}: ${t}`);throw t}class Cu{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Jr.comparator(e.key,n.key):(t,e)=>Jr.comparator(t.key,e.key),this.keyedMap=js(),this.sortedSet=new Ls(this.comparator)}static emptySet(t){return new Cu(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Cu))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Cu;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Ru{constructor(){this.Qr=new Ls(Jr.comparator)}track(t){const e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):xr():this.Qr=this.Qr.insert(e,t)}jr(){const t=[];return this.Qr.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Pu{constructor(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,r){const i=[];return e.forEach((t=>{i.push({type:0,doc:t})})),new Pu(t,e,Cu.emptySet(e),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ki(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class Du{constructor(){this.Wr=void 0,this.listeners=[]}}class Nu{constructor(){this.queries=new da((t=>Gi(t)),Ki),this.onlineState="Unknown",this.Gr=new Set}}async function Lu(t,e){const n=Ar(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Du),i)try{s.Wr=await n.onListen(r)}catch(t){const n=ku(t,`Initialization of query '${$i(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&Uu(n)}async function Ou(t,e){const n=Ar(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Mu(t,e){const n=Ar(t);let r=!1;for(const t of e){const e=t.query,i=n.queries.get(e);if(i){for(const e of i.listeners)e.Hr(t)&&(r=!0);i.Wr=t}}r&&Uu(n)}function Vu(t,e,n){const r=Ar(t),i=r.queries.get(e);if(i)for(const t of i.listeners)t.onError(n);r.queries.delete(e)}function Uu(t){t.Gr.forEach((t=>{t.next()}))}class Fu{constructor(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}Hr(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Pu(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),e=!0):this.eo(t,this.onlineState)&&(this.no(t),e=!0),this.Xr=t,e}onError(t){this.Jr.error(t)}zr(t){this.onlineState=t;let e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e}eo(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)}Zr(t){if(t.docChanges.length>0)return!0;const e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}no(t){t=Pu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)}}class Bu{constructor(t){this.key=t}}class qu{constructor(t){this.key=t}}class ju{constructor(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Gs(),this.mutatedKeys=Gs(),this.lo=Wi(t),this.fo=new Cu(this.lo)}get wo(){return this.uo}_o(t,e){const n=e?e.mo:new Ru,r=e?e.fo:this.fo;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=Vi(this.query)&&r.size===this.query.limit?r.last():null,u=Ui(this.query)&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const c=r.get(t),l=Xi(this.query,e)?e:null,h=!!c&&this.mutatedKeys.has(c.key),f=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let d=!1;c&&l?c.data.isEqual(l.data)?h!==f&&(n.track({type:3,doc:l}),d=!0):this.yo(c,l)||(n.track({type:2,doc:l}),d=!0,(a&&this.lo(l,a)>0||u&&this.lo(l,u)<0)&&(o=!0)):!c&&l?(n.track({type:0,doc:l}),d=!0):c&&!l&&(n.track({type:1,doc:c}),d=!0,(a||u)&&(o=!0)),d&&(l?(s=s.add(l),i=f?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))})),Vi(this.query)||Ui(this.query))for(;s.size>this.query.limit;){const t=Vi(this.query)?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{fo:s,mo:n,Nn:o,mutatedKeys:i}}yo(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const r=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;const i=t.mo.jr();i.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xr()}};return n(t)-n(e)}(t.type,e.type)||this.lo(t.doc,e.doc))),this.po(n);const s=e?this.Eo():[],o=0===this.ho.size&&this.current?1:0,a=o!==this.ao;return this.ao=o,0!==i.length||a?{snapshot:new Pu(this.query,t.fo,r,i,t.mutatedKeys,0===o,a,!1),To:s}:{To:s}}zr(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Ru,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}}Io(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations}po(t){t&&(t.addedDocuments.forEach((t=>this.uo=this.uo.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.uo=this.uo.delete(t))),this.current=t.current)}Eo(){if(!this.current)return[];const t=this.ho;this.ho=Gs(),this.fo.forEach((t=>{this.Io(t.key)&&(this.ho=this.ho.add(t.key))}));const e=[];return t.forEach((t=>{this.ho.has(t)||e.push(new qu(t))})),this.ho.forEach((n=>{t.has(n)||e.push(new Bu(n))})),e}Ao(t){this.uo=t.Bn,this.ho=Gs();const e=this._o(t.documents);return this.applyChanges(e,!0)}Ro(){return Pu.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)}}class Hu{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class zu{constructor(t){this.key=t,this.Po=!1}}class Ku{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.bo={},this.vo=new da((t=>Gi(t)),Ki),this.Vo=new Map,this.So=new Set,this.Do=new Ls(Jr.comparator),this.Co=new Map,this.No=new ka,this.xo={},this.ko=new Map,this.Oo=ha.Yt(),this.onlineState="Unknown",this.$o=void 0}get isPrimaryClient(){return!0===this.$o}}async function Gu(t,e){const n=lc(t);let r,i;const s=n.vo.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ro();else{const t=await xa(n.localStore,Hi(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,i=await $u(n,e,r,"current"===s),n.isPrimaryClient&&nu(n.remoteStore,t)}return i}async function $u(t,e,n,r){t.Mo=(e,n,r)=>async function(t,e,n,r){let i=e.view._o(n);i.Nn&&(i=await Aa(t.localStore,e.query,!1).then((({documents:t})=>e.view._o(t,i))));const s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s);return ic(t,e.targetId,o.To),o.snapshot}(t,e,n,r);const i=await Aa(t.localStore,e,!0),s=new ju(e,i.Bn),o=s._o(i.documents),a=Ys.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a);ic(t,n,u.To);const c=new Hu(e,n,s);return t.vo.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot}async function Xu(t,e){const n=Ar(t),r=n.vo.get(e),i=n.Vo.get(r.targetId);if(i.length>1)return n.Vo.set(r.targetId,i.filter((t=>!Ki(t,e)))),void n.vo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Sa(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),ru(n.remoteStore,r.targetId),nc(n,r.targetId)})).catch(fa)):(nc(n,r.targetId),await Sa(n.localStore,r.targetId,!0))}async function Wu(t,e){const n=Ar(t);try{const t=await function(t,e){const n=Ar(t),r=e.snapshotVersion;let i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.Mn.newChangeBuffer({trackRemovals:!0});i=n.kn;const o=[];e.targetChanges.forEach(((e,s)=>{const a=i.get(s);if(!a)return;o.push(n.qe.removeMatchingKeys(t,e.removedDocuments,s).next((()=>n.qe.addMatchingKeys(t,e.addedDocuments,s))));const u=e.resumeToken;if(u.approximateByteSize()>0){const c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,c),function(t,e,n){return Sr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&o.push(n.qe.updateTargetData(t,c))}}));let a=Bs();if(e.documentUpdates.forEach(((r,i)=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(Ta(t,s,e.documentUpdates,r,void 0).next((t=>{a=t}))),!r.isEqual(Dr.min())){const e=n.qe.getLastRemoteSnapshotVersion(t).next((e=>n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return ea.waitFor(o).next((()=>s.apply(t))).next((()=>n.Fn.En(t,a))).next((()=>a))})).then((t=>(n.kn=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.Co.get(e);r&&(Sr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Po=!0:t.modifiedDocuments.size>0?Sr(r.Po):t.removedDocuments.size>0&&(Sr(r.Po),r.Po=!1))})),await ac(n,t,e)}catch(t){await fa(t)}}function Yu(t,e,n){const r=Ar(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.vo.forEach(((n,r)=>{const i=r.view.zr(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=Ar(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.zr(e)&&(r=!0)})),r&&Uu(n)}(r.eventManager,e),t.length&&r.bo._r(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Qu(t,e,n){const r=Ar(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Co.get(e),s=i&&i.key;if(s){let t=new Ls(Jr.comparator);t=t.insert(s,di.newNoDocument(s,Dr.min()));const n=Gs().add(s),i=new Ws(Dr.min(),new Map,new Vs(Cr),t,n);await Wu(r,i),r.Do=r.Do.remove(s),r.Co.delete(e),oc(r)}else await Sa(r.localStore,e,!1).then((()=>nc(r,e,n))).catch(fa)}async function Ju(t,e){const n=Ar(t),r=e.batch.batchId;try{const t=await function(t,e){const n=Ar(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),i=n.Mn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,s=i.keys();let o=ea.resolve();return s.forEach((t=>{o=o.next((()=>r.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);Sr(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),o.next((()=>t._n.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n._n.performConsistencyCheck(t))).next((()=>n.Fn.pn(t,r)))}))}(n.localStore,e);ec(n,r,null),tc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ac(n,t)}catch(t){await fa(t)}}async function Zu(t,e,n){const r=Ar(t);try{const t=await function(t,e){const n=Ar(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return n._n.lookupMutationBatch(t,e).next((e=>(Sr(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)))).next((()=>n._n.performConsistencyCheck(t))).next((()=>n.Fn.pn(t,r)))}))}(r.localStore,e);ec(r,e,n),tc(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ac(r,t)}catch(n){await fa(n)}}function tc(t,e){(t.ko.get(e)||[]).forEach((t=>{t.resolve()})),t.ko.delete(e)}function ec(t,e,n){const r=Ar(t);let i=r.xo[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function nc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Vo.get(e))t.vo.delete(r),n&&t.bo.Fo(r,n);t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((e=>{t.No.containsKey(e)||rc(t,e)}))}function rc(t,e){t.So.delete(e.path.canonicalString());const n=t.Do.get(e);null!==n&&(ru(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),oc(t))}function ic(t,e,n){for(const r of n)r instanceof Bu?(t.No.addReference(r.key,e),sc(t,r)):r instanceof qu?(br("SyncEngine","Document no longer in limbo: "+r.key),t.No.removeReference(r.key,e),t.No.containsKey(r.key)||rc(t,r.key)):xr()}function sc(t,e){const n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(br("SyncEngine","New document in limbo: "+n),t.So.add(r),oc(t))}function oc(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){const e=t.So.values().next().value;t.So.delete(e);const n=new Jr(Vr.fromString(e)),r=t.Oo.next();t.Co.set(r,new zu(n)),t.Do=t.Do.insert(n,r),nu(t.remoteStore,new sa(Hi(Mi(n.path)),r,2,mr.o))}}async function ac(t,e,n){const r=Ar(t),i=[],s=[],o=[];r.vo.isEmpty()||(r.vo.forEach(((t,a)=>{o.push(r.Mo(a,e,n).then((t=>{if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);const e=ga.vn(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.bo._r(i),await async function(t,e){const n=Ar(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>ea.forEach(e,(e=>ea.forEach(e.Pn,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>ea.forEach(e.bn,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!na(t))throw t;br("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.kn.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.kn=n.kn.insert(e,i)}}}(r.localStore,s))}async function uc(t,e){const n=Ar(t);if(!n.currentUser.isEqual(e)){br("SyncEngine","User change. New user:",e.toKey());const t=await ba(n.localStore,e);n.currentUser=e,function(t,e){t.ko.forEach((t=>{t.forEach((t=>{t.reject(new vr(gr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await ac(n,t.Ln)}}function cc(t,e){const n=Ar(t),r=n.Co.get(e);if(r&&r.Po)return Gs().add(r.key);{let t=Gs();const r=n.Vo.get(e);if(!r)return t;for(const e of r){const r=n.vo.get(e);t=t.unionWith(r.view.wo)}return t}}function lc(t){const e=Ar(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wu.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cc.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Qu.bind(null,e),e.bo._r=Mu.bind(null,e.eventManager),e.bo.Fo=Vu.bind(null,e.eventManager),e}function hc(t){const e=Ar(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ju.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zu.bind(null,e),e}class fc{constructor(){this.synchronizeTabs=!1}async initialize(t){this.R=Ga(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),await this.persistence.start(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t)}Uo(t){return null}Ko(t){return wa(this.persistence,new va,t.initialUser,this.R)}qo(t){return new La(Ma.Ps,this.R)}Bo(t){return new Fa}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class dc{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Yu(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=uc.bind(null,this.syncEngine),await xu(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Nu}createDatastore(t){const e=Ga(t.databaseInfo.databaseId),n=(r=t.databaseInfo,new za(r));var r;return function(t,e,n){return new Qa(t,e,n)}(t.credentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=t=>Yu(this.syncEngine,t,0),s=qa.gt()?new qa:new Ba,new Za(e,n,r,i,s);var e,n,r,i,s}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new Ku(t,e,n,r,i,s);return o&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=Ar(t);br("RemoteStore","RemoteStore shutting down."),e.Mr.add(5),await eu(e),e.Lr.shutdown(),e.Br.set("Unknown")}(this.remoteStore)}}class pc{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.jo(this.observer.next,t)}error(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Wo(){this.muted=!0}jo(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class mc{constructor(t,e,n){this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Va.UNAUTHENTICATED,this.clientId=kr.u(),this.credentialListener=()=>{},this.receivedInitialUser=new ta,this.credentials.setChangeListener((t=>{br("FirestoreClient","Received user=",t.uid),this.user=t,this.credentialListener(t),this.receivedInitialUser.resolve()}))}async getConfiguration(){return await this.receivedInitialUser.promise,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.credentialListener=t,this.receivedInitialUser.promise.then((()=>this.credentialListener(this.user)))}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new vr(gr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ta;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.removeChangeListener(),t.resolve()}catch(e){const n=ku(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function gc(t,e){t.asyncQueue.verifyOperationInProgress(),br("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((n=>{r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable((async()=>{await ba(e.localStore,n)})))})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=e}async function vc(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yc(t);br("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener((n=>t.asyncQueue.enqueueRetryable((()=>async function(t,e){const n=Ar(t);n.asyncQueue.verifyOperationInProgress(),br("RemoteStore","RemoteStore received new credentials");const r=uu(n);n.Mr.add(3),await eu(n),r&&n.Br.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Mr.delete(3),await tu(n)}(e.remoteStore,n))))),t.onlineComponents=e}async function yc(t){return t.offlineComponents||(br("FirestoreClient","Using default OfflineComponentProvider"),await gc(t,new fc)),t.offlineComponents}async function wc(t){return t.onlineComponents||(br("FirestoreClient","Using default OnlineComponentProvider"),await vc(t,new dc)),t.onlineComponents}function bc(t){return wc(t).then((t=>t.syncEngine))}async function Ec(t){const e=await wc(t),n=e.eventManager;return n.onListen=Gu.bind(null,e.syncEngine),n.onUnlisten=Xu.bind(null,e.syncEngine),n}class Tc{constructor(t,e,n,r,i,s,o){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o}}class _c{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof _c&&t.projectId===this.projectId&&t.database===this.database}}const xc=new Map;class Sc{constructor(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${t}`}}class Ac{constructor(){this.changeListener=null}getToken(){return Promise.resolve(null)}invalidateToken(){}setChangeListener(t){this.changeListener=t,t(Va.UNAUTHENTICATED)}removeChangeListener(){this.changeListener=null}}class Ic{constructor(t){this.oc=null,this.currentUser=Va.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=()=>{this.cc++,this.currentUser=this.uc(),this.receivedInitialUser=!0,this.changeListener&&this.changeListener(this.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then((t=>{this.auth=t,this.oc&&this.auth.addAuthTokenListener(this.oc)}),(()=>{})))}getToken(){const t=this.cc,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.cc!==t?(br("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Sr("string"==typeof e.accessToken),new Sc(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}setChangeListener(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)}removeChangeListener(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null}uc(){const t=this.auth&&this.auth.getUid();return Sr(null===t||"string"==typeof t),new Va(t)}}class kc{constructor(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=Va.FIRST_PARTY}get authHeaders(){const t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t}}class Cc{constructor(t,e,n){this.ac=t,this.hc=e,this.lc=n}getToken(){return Promise.resolve(new kc(this.ac,this.hc,this.lc))}setChangeListener(t){t(Va.FIRST_PARTY)}removeChangeListener(){}invalidateToken(){}}function Rc(t,e,n){if(!n)throw new vr(gr.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Pc(t){if(!Jr.isDocumentKey(t))throw new vr(gr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dc(t){if(Jr.isDocumentKey(t))throw new vr(gr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nc(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){if(t.constructor){const e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":xr()}function Lc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new vr(gr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nc(t);throw new vr(gr.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class Oc{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new vr(gr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new vr(gr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,function(t,e,n,r){if(!0===e&&!0===r)throw new vr(gr.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties}}class Mc{constructor(t,e){this._persistenceKey="(lite)",this._settings=new Oc({}),this._settingsFrozen=!1,t instanceof _c?(this._databaseId=t,this._credentials=new Ac):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new vr(gr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _c(t.options.projectId)}(t),this._credentials=new Ic(e))}get app(){if(!this._app)throw new vr(gr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new vr(gr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Oc(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Ac;switch(t.type){case"gapi":const e=t.client;return Sr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Cc(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new vr(gr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=xc.get(t);e&&(br("ComponentProvider","Removing Datastore"),xc.delete(t),e.terminate())}(this),Promise.resolve()}}class Vc{constructor(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fc(this.firestore,this._converter,this._key.path.popLast())}withConverter(t){return new Vc(this.firestore,t,this._key)}}class Uc{constructor(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Uc(this.firestore,t,this._query)}}class Fc extends Uc{constructor(t,e,n){super(t,e,Mi(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Vc(this.firestore,null,new Jr(t))}withConverter(t){return new Fc(this.firestore,t,this._path)}}function Bc(t,e,...n){if(t=(0,o.m9)(t),Rc("collection","path",e),t instanceof Mc){const r=Vr.fromString(e,...n);return Dc(r),new Fc(t,null,r)}{if(!(t instanceof Vc||t instanceof Fc))throw new vr(gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=Vr.fromString(t.path,...n).child(Vr.fromString(e));return Dc(r),new Fc(t.firestore,null,r)}}function qc(t,e,...n){if(t=(0,o.m9)(t),1===arguments.length&&(e=kr.u()),Rc("doc","path",e),t instanceof Mc){const r=Vr.fromString(e,...n);return Pc(r),new Vc(t,null,new Jr(r))}{if(!(t instanceof Vc||t instanceof Fc))throw new vr(gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Vr.fromString(e,...n));return Pc(r),new Vc(t.firestore,t instanceof Fc?t._converter:null,new Jr(r))}}class jc{constructor(){this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.gc=!1,this.yc=[],this.Zi=new $a(this,"async_queue_retry"),this.Ec=()=>{const t=Ka();t&&br("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Zi.Gi()};const t=Ka();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ec)}get isShuttingDown(){return this.wc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Tc(),this.Ic(t)}enterRestrictedMode(){if(!this.wc){this.wc=!0;const t=Ka();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}}enqueue(t){return this.Tc(),this.wc?new Promise((t=>{})):this.Ic(t)}enqueueRetryable(t){this.enqueueAndForget((()=>(this.dc.push(t),this.Ac())))}async Ac(){if(0!==this.dc.length){try{await this.dc[0](),this.dc.shift(),this.Zi.reset()}catch(t){if(!na(t))throw t;br("AsyncQueue","Operation failed with retryable error: "+t)}this.dc.length>0&&this.Zi.ji((()=>this.Ac()))}}Ic(t){const e=this.fc.then((()=>(this.gc=!0,t().catch((t=>{throw this.mc=t,this.gc=!1,Er("INTERNAL UNHANDLED ERROR: ",function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((t=>(this.gc=!1,t))))));return this.fc=e,e}enqueueAfterDelay(t,e,n){this.Tc(),this.yc.indexOf(t)>-1&&(e=0);const r=Iu.createAndSchedule(this,t,e,n,(t=>this.Rc(t)));return this._c.push(r),r}Tc(){this.mc&&xr()}verifyOperationInProgress(){}async Pc(){let t;do{t=this.fc,await t}while(t!==this.fc)}bc(t){for(const e of this._c)if(e.timerId===t)return!0;return!1}vc(t){return this.Pc().then((()=>{this._c.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this._c)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Pc()}))}Vc(t){this.yc.push(t)}Rc(t){const e=this._c.indexOf(t);this._c.splice(e,1)}}function Hc(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const t of["next","error","complete"])if(t in n&&"function"==typeof n[t])return!0;return!1}(t)}class zc extends Mc{constructor(t,e){super(t,e),this._queue=new jc,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||$c(this),this._firestoreClient.terminate()}}function Kc(t=(0,r.Mq)()){return(0,r.qX)(t,"firestore-exp").getImmediate()}function Gc(t){return t._firestoreClient||$c(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function $c(t){var e;const n=t._freezeSettings(),r=function(t,e,n,r){return new Tc(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new mc(t._credentials,t._queue,r)}class Xc{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new vr(gr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fr(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Wc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Wc(qr.fromBase64String(t))}catch(t){throw new vr(gr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Wc(qr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Yc{constructor(t){this._methodName=t}}class Qc{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new vr(gr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new vr(gr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Cr(this._lat,t._lat)||Cr(this._long,t._long)}}const Jc=/^__.*__$/;class Zc{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new _s(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ts(t,this.data,e,this.fieldTransforms)}}class tl{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new _s(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function el(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xr()}}class nl{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Dc(){return this.settings.Dc}Cc(t){return new nl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Nc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.kc(t),r}Oc(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r}$c(t){return this.Cc({path:void 0,xc:!0})}Mc(t){return vl(t,this.settings.methodName,this.settings.Fc||!1,this.path,this.settings.Lc)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Sc(){if(this.path)for(let t=0;t<this.path.length;t++)this.kc(this.path.get(t))}kc(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(el(this.Dc)&&Jc.test(t))throw this.Mc('Document fields cannot begin and end with "__"')}}class rl{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Ga(t)}Bc(t,e,n,r=!1){return new nl({Dc:t,methodName:e,Lc:n,path:Fr.emptyPath(),xc:!1,Fc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)}}function il(t){const e=t._freezeSettings(),n=Ga(t._databaseId);return new rl(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sl(t,e,n,r,i,s={}){const o=t.Bc(s.merge||s.mergeFields?2:0,e,n,i);dl("Data must be an object, but it was:",o,r);const a=hl(r,o);let u,c;if(s.merge)u=new Br(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const r of s.mergeFields){const i=pl(e,r,n);if(!o.contains(i))throw new vr(gr.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);yl(t,i)||t.push(i)}u=new Br(t),c=o.fieldTransforms.filter((t=>u.covers(t.field)))}else u=null,c=o.fieldTransforms;return new Zc(new hi(a),u,c)}class ol extends Yc{_toFieldTransform(t){if(2!==t.Dc)throw 1===t.Dc?t.Mc(`${this._methodName}() can only appear at the top level of your update data`):t.Mc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ol}}class al extends Yc{_toFieldTransform(t){return new fs(t.path,new is)}isEqual(t){return t instanceof al}}function ul(t,e,n,r){const i=t.Bc(1,e,n);dl("Data must be an object, but it was:",i,r);const s=[],a=hi.empty();Lr(r,((t,r)=>{const u=gl(e,t,n);r=(0,o.m9)(r);const c=i.Oc(u);if(r instanceof ol)s.push(u);else{const t=ll(r,c);null!=t&&(s.push(u),a.set(u,t))}}));const u=new Br(s);return new tl(a,u,i.fieldTransforms)}function cl(t,e,n,r,i,s){const a=t.Bc(1,e,n),u=[pl(e,r,n)],c=[i];if(s.length%2!=0)throw new vr(gr.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<s.length;t+=2)u.push(pl(e,s[t])),c.push(s[t+1]);const l=[],h=hi.empty();for(let t=u.length-1;t>=0;--t)if(!yl(l,u[t])){const e=u[t];let n=c[t];n=(0,o.m9)(n);const r=a.Oc(e);if(n instanceof ol)l.push(e);else{const t=ll(n,r);null!=t&&(l.push(e),h.set(e,t))}}const f=new Br(l);return new tl(h,f,a.fieldTransforms)}function ll(t,e){if(fl(t=(0,o.m9)(t)))return dl("Unsupported field value:",e,t),hl(t,e);if(t instanceof Yc)return function(t,e){if(!el(e.Dc))throw e.Mc(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Mc(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.Mc("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=ll(i,e.$c(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,o.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Zi(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Pr.fromDate(t);return{timestampValue:ao(e.R,n)}}if(t instanceof Pr){const n=new Pr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ao(e.R,n)}}if(t instanceof Qc)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Wc)return{bytesValue:uo(e.R,t._byteString)};if(t instanceof Vc){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Mc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ho(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc(`Unsupported field value: ${Nc(t)}`)}(t,e)}function hl(t,e){const n={};return Or(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lr(t,((t,r)=>{const i=ll(r,e.Nc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function fl(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Pr||t instanceof Qc||t instanceof Wc||t instanceof Vc||t instanceof Yc)}function dl(t,e,n){if(!fl(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=Nc(n);throw"an object"===r?e.Mc(t+" a custom object"):e.Mc(t+" "+r)}}function pl(t,e,n){if((e=(0,o.m9)(e))instanceof Xc)return e._internalPath;if("string"==typeof e)return gl(t,e);throw vl("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}const ml=new RegExp("[~\\*/\\[\\]]");function gl(t,e,n){if(e.search(ml)>=0)throw vl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xc(...e.split("."))._internalPath}catch(r){throw vl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vl(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new vr(gr.INVALID_ARGUMENT,a+t+u)}function yl(t,e){return t.some((t=>t.isEqual(e)))}class wl{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Vc(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new bl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}}get(t){if(this._document){const e=this._document.data.field(El("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class bl extends wl{data(){return super.data()}}function El(t,e){return"string"==typeof e?gl(t,e):e instanceof Xc?e._internalPath:e._delegate._internalPath}class Tl{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class _l extends wl{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new xl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(El("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class xl extends _l{data(t={}){return super.data(t)}}class Sl{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Tl(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new xl(this._firestore,this._userDataWriter,n.key,n,new Tl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query._converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new vr(gr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e,n=0;return t._snapshot.docChanges.map((r=>{const i=new xl(t._firestore,t._userDataWriter,r.doc.key,r.doc,new Tl(t._snapshot.mutatedKeys.has(r.doc.key),t._snapshot.fromCache),t.query._converter);return e=r.doc,{type:"added",doc:i,oldIndex:-1,newIndex:n++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new xl(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Tl(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:Al(e.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Al(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xr()}}function Il(t){if(Ui(t)&&0===t.explicitOrderBy.length)throw new vr(gr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kl{}function Cl(t,...e){for(const n of e)t=n._apply(t);return t}class Rl extends kl{constructor(t,e){super(),this.Kc=t,this.Wc=e,this.type="orderBy"}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new vr(gr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new vr(gr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Ri(e,n);return function(t,e){if(null===Fi(t)){const n=Bi(t);null!==n&&Dl(t,n,e.field)}}(t,r),r}(t._query,this.Kc,this.Wc);return new Uc(t.firestore,t._converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new Li(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}function Pl(t,e="asc"){const n=e,r=El("orderBy",t);return new Rl(r,n)}function Dl(t,e,n){if(!n.isEqual(e))throw new vr(gr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Nl{convertValue(t,e="none"){switch(Zr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Kr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw xr()}}convertObject(t,e){const n={};return Lr(t.fields||{},((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertGeoPoint(t){return new Qc(zr(t.latitude),zr(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=$r(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Xr(t));default:return null}}convertTimestamp(t){const e=Hr(t);return new Pr(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Vr.fromString(t);Sr(Oo(n));const r=new _c(n.get(1),n.get(3)),i=new Jr(n.popFirst(5));return r.isEqual(e)||Er(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}function Ll(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ol extends Nl{constructor(t){super(),this.firestore=t}convertBytes(t){return new Wc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Vc(this.firestore,null,e)}}function Ml(t,e,n,...r){t=Lc(t,Vc);const i=Lc(t.firestore,zc),s=il(i);let a;return a="string"==typeof(e=(0,o.m9)(e))||e instanceof Xc?cl(s,"updateDoc",t._key,e,n,r):ul(s,"updateDoc",t._key,e),Fl(i,[a.toMutation(t._key,ps.exists(!0))])}function Vl(t,e){const n=Lc(t.firestore,zc),r=qc(t),i=Ll(t._converter,e);return Fl(n,[sl(il(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,ps.exists(!1))]).then((()=>r))}function Ul(t,...e){var n,r,i;t=(0,o.m9)(t);let s={includeMetadataChanges:!1},a=0;"object"!=typeof e[a]||Hc(e[a])||(s=e[a],a++);const u={includeMetadataChanges:s.includeMetadataChanges};if(Hc(e[a])){const t=e[a];e[a]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[a+1]=null===(r=t.error)||void 0===r?void 0:r.bind(t),e[a+2]=null===(i=t.complete)||void 0===i?void 0:i.bind(t)}let c,l,h;if(t instanceof Vc)l=Lc(t.firestore,zc),h=Mi(t._key.path),c={next:n=>{e[a]&&e[a](Bl(l,t,n))},error:e[a+1],complete:e[a+2]};else{const n=Lc(t,Uc);l=Lc(n.firestore,zc),h=n._query;const r=new Ol(l);c={next:t=>{e[a]&&e[a](new Sl(l,r,n,t))},error:e[a+1],complete:e[a+2]},Il(t._query)}return function(t,e,n,r){const i=new pc(r),s=new Fu(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>Lu(await Ec(t),s))),()=>{i.Wo(),t.asyncQueue.enqueueAndForget((async()=>Ou(await Ec(t),s)))}}(Gc(l),h,u,c)}function Fl(t,e){return function(t,e){const n=new ta;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const r=hc(t);try{const t=await function(t,e){const n=Ar(t),r=Pr.now(),i=e.reduce(((t,e)=>t.add(e.key)),Gs());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>n.Fn.pn(t,i).next((i=>{s=i;const o=[];for(const t of e){const e=ws(t,s.get(t.key));null!=e&&o.push(new _s(t.key,e,fi(e.toProto().mapValue),ps.exists(!0)))}return n._n.addMutationBatch(t,r,o,e)})))).then((t=>(t.applyToLocalDocumentSet(s),{batchId:t.batchId,changes:s})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.xo[t.currentUser.toKey()];r||(r=new Ls(Cr)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,t.batchId,n),await ac(r,t.changes),await mu(r.remoteStore)}catch(t){const e=ku(t,"Failed to persist write");n.reject(e)}}(await bc(t),e,n))),n.promise}(Gc(t),e)}function Bl(t,e,n){const r=n.docs.get(e._key),i=new Ol(t);return new _l(t,i,e._key,r,new Tl(n.hasPendingWrites,n.fromCache),e._converter)}function ql(){return new al("serverTimestamp")}(0,r.Xd)(new i.wA("firestore-exp",((t,{options:e})=>{const n=t.getProvider("app-exp").getImmediate(),r=new zc(n,t.getProvider("auth-internal"));return e&&r._setSettings(e),r}),"PUBLIC")),(0,r.KN)("@firebase/firestore","0.0.900-exp.894b5da5a",undefined)},4929:function(t,e,n){"use strict";n.d(e,{Jt:function(){return It},cF:function(){return Ct},iH:function(){return kt},B0:function(){return At}});var r,i=n(3464),s=n(1988),o=n(9259);!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(r||(r={}));const a="firebasestorage.googleapis.com";class u extends s.ZR{constructor(t,e){super(c(t),`Firebase Storage: ${e} (${c(t)})`),this.customData={serverResponse:null},Object.setPrototypeOf(this,u.prototype)}_codeEquals(t){return c(t)===this.code}get message(){return this.customData.serverResponse?`${this.message}\n${this.customData.serverResponse}`:this.message}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t}}function c(t){return"storage/"+t}function l(){return new u("unknown","An unknown error occurred, please check the error payload for server response.")}function h(){return new u("canceled","User canceled the upload/download.")}function f(){return new u("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function d(t){return new u("invalid-argument",t)}function p(){return new u("app-deleted","The Firebase app was deleted.")}function m(t,e){return new u("invalid-format","String does not match format '"+t+"': "+e)}function g(t){throw new u("internal-error","Internal error: "+t)}class v{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=r.NO_ERROR,this.sendPromise_=new Promise((t=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=r.ABORT,t(this)})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=r.NETWORK_ERROR,t(this)})),this.xhr_.addEventListener("load",(()=>{t(this)}))}))}send(t,e,n,r){if(this.sent_)throw g("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const t in r)r.hasOwnProperty(t)&&this.xhr_.setRequestHeader(t,r[t].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw g("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw g("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponseText(){if(!this.sent_)throw g("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}class y{createXhrIo(){return new v}}class w{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let n;try{n=w.makeFromUrl(t,e)}catch(e){return new w(t,"")}if(""===n.path)return n;throw new u("invalid-default-bucket","Invalid default bucket '"+t+"'.")}static makeFromUrl(t,e){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}const o=e.replace(/[.]/g,"\\."),c=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${e===a?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let e=0;e<c.length;e++){const r=c[e],i=r.regex.exec(t);if(i){const t=i[r.indices.bucket];let e=i[r.indices.path];e||(e=""),n=new w(t,e),r.postModify(n);break}}if(null==n)throw function(t){return new u("invalid-url","Invalid URL '"+t+"'.")}(t);return n}}class b{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function E(t){return"string"==typeof t||t instanceof String}function T(t){return _()&&t instanceof Blob}function _(){return"undefined"!=typeof Blob}function x(t,e,n,r){if(r<e)throw d(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw d(`Invalid value for '${t}'. Expected ${n} or less.`)}function S(t,e){const n=e.match(/^(\w+):\/\/.+/);let r=e;return null==(null==n?void 0:n[1])&&(r=`https://${e}`),`${r}/v0${t}`}function A(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1),n}class I{constructor(t,e,n,r,i,s,o,a,u,c,l){this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=s.slice(),this.callback_=o,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(((t,e)=>{this.resolve_=t,this.reject_=e,this.start_()}))}start_(){const t=this;function e(e,n){const r=t.resolve_,i=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{const e=t.callback_(s,s.getResponseText());void 0!==e?r(e):r()}catch(t){i(t)}else if(null!==s){const e=l();e.serverResponse=s.getResponseText(),t.errorCallback_?i(t.errorCallback_(s,e)):i(e)}else if(n.canceled){i(t.appDelete_?p():h())}else{i(new u("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}}this.canceled_?e(0,new k(!1,null,!0)):this.backoffId_=function(t,e,n){let r=1,i=null,s=!1,o=0;function a(){return 2===o}let u=!1;function c(...t){u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((()=>{i=null,t(h,a())}),e)}function h(t,...e){if(u)return;if(t)return void c.call(null,t,...e);if(a()||s)return void c.call(null,t,...e);let n;r<64&&(r*=2),1===o?(o=2,n=0):n=1e3*(r+Math.random()),l(n)}let f=!1;function d(t){f||(f=!0,u||(null!==i?(t||(o=2),clearTimeout(i),l(0)):t||(o=1)))}return l(0),setTimeout((()=>{s=!0,d(!0)}),n),d}((function(e,n){if(n)return void e(!1,new k(!1,null,!0));const i=t.pool_.createXhrIo();function s(e){const n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}t.pendingXhr_=i,null!==t.progressCallback_&&i.addUploadProgressListener(s),i.send(t.url_,t.method_,t.body_,t.headers_).then((n=>{null!==t.progressCallback_&&n.removeUploadProgressListener(s),t.pendingXhr_=null;const i=(n=n).getErrorCode()===r.NO_ERROR,o=n.getStatus();if(!i||t.isRetryStatusCode_(o)){const t=n.getErrorCode()===r.ABORT;return void e(!1,new k(!1,null,t))}const a=-1!==t.successCodes_.indexOf(o);e(!0,new k(a,n))}))}),e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r}}class k{constructor(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}function C(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function R(...t){const e=C();if(void 0!==e){const n=new e;for(let e=0;e<t.length;e++)n.append(t[e]);return n.getBlob()}if(_())return new Blob(t);throw new u("unsupported-environment","This browser doesn't seem to support creating Blobs")}const P="raw",D="base64",N="base64url",L="data_url";class O{constructor(t,e){this.data=t,this.contentType=e||null}}function M(t,e){switch(t){case P:return new O(V(e));case D:case N:return new O(U(t,e));case L:return new O(function(t){const e=new F(t);return e.base64?U(D,e.rest):function(t){let e;try{e=decodeURIComponent(t)}catch(t){throw m(L,"Malformed data URL.")}return V(e)}(e.rest)}(e),new F(e).contentType)}throw l()}function V(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r)){if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189)}else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function U(t,e){switch(t){case D:{const n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r){throw m(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case N:{const n=-1!==e.indexOf("+"),r=-1!==e.indexOf("/");if(n||r){throw m(t,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=atob(e)}catch(e){throw m(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return r}class F{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw m(L,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=e[1]||null;null!=n&&(this.base64=function(t,e){if(!(t.length>=e.length))return!1;return t.substring(t.length-e.length)===e}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)}}class B{constructor(t,e){let n=0,r="";T(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(T(this.data_)){const n=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,t,e);return null===n?null:new B(n)}{const n=new Uint8Array(this.data_.buffer,t,e-t);return new B(n,!0)}}static getBlob(...t){if(_()){const e=t.map((t=>t instanceof B?t.data_:t));return new B(R.apply(null,e))}{const e=t.map((t=>E(t)?M(P,t).data:t.data_));let n=0;e.forEach((t=>{n+=t.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((t=>{for(let e=0;e<t.length;e++)r[i++]=t[e]})),new B(r,!0)}}uploadData(){return this.data_}}function q(t){let e;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e;var n}function j(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function H(t,e){return e}class z{constructor(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||H}}let K=null;function G(){if(K)return K;const t=[];t.push(new z("bucket")),t.push(new z("generation")),t.push(new z("metageneration")),t.push(new z("name","fullPath",!0));const e=new z("name");e.xform=function(t,e){return function(t){return!E(t)||t.length<2?t:j(t)}(e)},t.push(e);const n=new z("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new z("timeCreated")),t.push(new z("updated")),t.push(new z("md5Hash",null,!0)),t.push(new z("cacheControl",null,!0)),t.push(new z("contentDisposition",null,!0)),t.push(new z("contentEncoding",null,!0)),t.push(new z("contentLanguage",null,!0)),t.push(new z("contentType",null,!0)),t.push(new z("metadata","customMetadata",!0)),K=t,K}function $(t,e,n){const r={type:"file"},i=n.length;for(let t=0;t<i;t++){const i=n[t];r[i.local]=i.xform(r,e[i.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){const n=t.bucket,r=t.fullPath,i=new w(n,r);return e._makeStorageReference(i)}})}(r,t),r}function X(t,e,n){const r=q(e);if(null===r)return null;return $(t,r,n)}function W(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const r=e[i];r.writable&&(n[r.server]=t[r.local])}return JSON.stringify(n)}class Y{constructor(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Q(t){if(!t)throw l()}function J(t,e){return function(n,r){const i=X(t,r,e);return Q(null!==i),i}}function Z(t,e){return function(n,r){const i=X(t,r,e);return Q(null!==i),function(t,e,n){const r=q(e);if(null===r)return null;if(!E(r.downloadTokens))return null;const i=r.downloadTokens;if(0===i.length)return null;const s=encodeURIComponent;return i.split(",").map((e=>{const r=t.bucket,i=t.fullPath;return S("/b/"+s(r)+"/o/"+s(i),n)+A({alt:"media",token:e})}))[0]}(i,r,t.host)}}function tt(t){return function(e,n){let r;var i,s;return 401===e.getStatus()?r=new u("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(s=t.bucket,r=new u("quota-exceeded","Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new u("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function et(t){const e=tt(t);return function(n,r){let i=e(n,r);var s;return 404===n.getStatus()&&(s=t.path,i=new u("object-not-found","Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function nt(t,e,n){const r=S(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,s=new Y(r,"GET",J(t,n),i);return s.errorHandler=et(e),s}function rt(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}function it(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let t="";for(let e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();o["Content-Type"]="multipart/related; boundary="+a;const u=rt(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+W(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+a+"--",h=B.getBlob(c,r,l);if(null===h)throw f();const d={name:u.fullPath},p=S(s,t.host),m=t.maxUploadRetryTime,g=new Y(p,"POST",J(t,n),m);return g.urlParams=d,g.headers=o,g.body=h.uploadData(),g.errorHandler=tt(e),g}class st{constructor(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}function ot(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){Q(!1)}return Q(!!n&&-1!==(e||["active"]).indexOf(n)),n}const at=262144;function ut(t,e,n,r,i,s,o,a){const c=new st(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new u("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const l=c.total-c.current;let h=l;i>0&&(h=Math.min(h,i));const d=c.current,p=d+h,m={"X-Goog-Upload-Command":h===l?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},g=r.slice(d,p);if(null===g)throw f();const v=e.maxUploadRetryTime,y=new Y(n,"POST",(function(t,n){const i=ot(t,["active","final"]),o=c.current+h,a=r.size();let u;return u="final"===i?J(e,s)(t,n):null,new st(o,a,"final"===i,u)}),v);return y.headers=m,y.body=g.uploadData(),y.progressCallback=a||null,y.errorHandler=tt(t),y}const ct="running",lt="paused",ht="success",ft="canceled",dt="error";function pt(t){switch(t){case"running":case"pausing":case"canceling":return ct;case"paused":return lt;case"success":return ht;case"canceled":return ft;case"error":default:return dt}}class mt{constructor(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{const e=t;this.next=e.next,this.error=e.error,this.complete=e.complete}}}function gt(t){return(...e)=>{Promise.resolve().then((()=>t(...e)))}}class vt{constructor(t,e,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=G(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=t=>{this._request=void 0,this._chunkMultiplier=1,t._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=t,this._transition("error"))},this._metadataErrorHandler=t=>{this._request=void 0,t._codeEquals("canceled")?this.completeTransitions_():(this._error=t,this._transition("error"))},this._promise=new Promise(((t,e)=>{this._resolve=t,this._reject=e,this._start()})),this._promise.then(null,(()=>{}))}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){this._ref.storage._getAuthToken().then((e=>{switch(this._state){case"running":t(e);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken((t=>{const e=function(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=rt(e,r,i),a={name:o.fullPath},u=S(s,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=W(o,n),h=t.maxUploadRetryTime,f=new Y(u,"POST",(function(t){let e;ot(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){Q(!1)}return Q(E(e)),e}),h);return f.urlParams=a,f.headers=c,f.body=l,f.errorHandler=tt(e),f}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(e,t);this._request=n,n.getPromise().then((t=>{this._request=void 0,this._uploadUrl=t,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e=>{const n=function(t,e,n,r){const i=t.maxUploadRetryTime,s=new Y(n,"POST",(function(t){const e=ot(t,["active","final"]);let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){Q(!1)}n||Q(!1);const i=Number(n);return Q(!isNaN(i)),new st(i,r.size(),"final"===e)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=tt(e),s}(this._ref.storage,this._ref._location,t,this._blob),r=this._ref.storage._makeRequest(n,e);this._request=r,r.getPromise().then((t=>{t=t,this._request=void 0,this._updateProgress(t.current),this._needToFetchStatus=!1,t.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const t=at*this._chunkMultiplier,e=new st(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((r=>{let i;try{i=ut(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(t){return this._error=t,void this._transition("error")}const s=this._ref.storage._makeRequest(i,r);this._request=s,s.getPromise().then((t=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(t.current),t.finalized?(this._metadata=t.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){at*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t=>{const e=nt(this._ref.storage,this._ref._location,this._mappings),n=this._ref.storage._makeRequest(e,t);this._request=n,n.getPromise().then((t=>{this._request=void 0,this._metadata=t,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken((t=>{const e=it(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(e,t);this._request=n,n.getPromise().then((t=>{this._request=void 0,this._metadata=t,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=h(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=pt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,n,r){const i=new mt(e,n,r);return this._addObserver(i),()=>{this._removeObserver(i)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((t=>{this._notifyObserver(t)}))}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(pt(this._state)){case ht:gt(this._resolve.bind(null,this.snapshot))();break;case ft:case dt:gt(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(pt(this._state)){case ct:case lt:t.next&&gt(t.next.bind(t,this.snapshot))();break;case ht:t.complete&&gt(t.complete.bind(t))();break;case ft:case dt:t.error&&gt(t.error.bind(t,this._error))();break;default:t.error&&gt(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class yt{constructor(t,e){this._service=t,this._location=e instanceof w?e:w.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new yt(t,e)}get root(){const t=new w(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return j(this._location.path)}get storage(){return this._service}get parent(){const t=function(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;const e=new w(this._location.bucket,t);return new yt(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw function(t){return new u("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)}}async function wt(t){t._throwIfRoot("getDownloadURL");const e=await t.storage._getAuthToken(),n=function(t,e,n){const r=S(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,s=new Y(r,"GET",Z(t,n),i);return s.errorHandler=et(e),s}(t.storage,t._location,G());return t.storage._makeRequest(n,e).getPromise().then((t=>{if(null===t)throw new u("no-download-url","The given file does not have any download URLs.");return t}))}function bt(t,e){const n=function(t,e){const n=e.split("/").filter((t=>t.length>0)).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new w(t._location.bucket,n);return new yt(t.storage,r)}function Et(t,e){if(t instanceof xt){const n=t;if(null==n._bucket)throw new u("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");const r=new yt(n,n._bucket);return null!=e?Et(r,e):r}if(void 0!==e){if(e.includes(".."))throw d('`path` param cannot contain ".."');return bt(t,e)}return t}function Tt(t,e){if(e&&/^[A-Za-z]+:\/\//.test(e)){if(t instanceof xt)return new yt(t,e);throw d("To use ref(service, url), the first argument must be a Storage instance.")}return Et(t,e)}function _t(t,e){const n=null==e?void 0:e.storageBucket;return null==n?null:w.makeFromBucketSpec(n,t)}class xt{constructor(t,e,n,r,i){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=a,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?w.makeFromBucketSpec(r,this._host):_t(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,null!=this._url?this._bucket=w.makeFromBucketSpec(this._url,t):this._bucket=_t(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){x("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){x("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(null!==e)return e.accessToken}return null}_delete(){return this._deleted=!0,this._requests.forEach((t=>t.cancel())),this._requests.clear(),Promise.resolve()}_makeStorageReference(t){return new yt(this,t)}_makeRequest(t,e){if(this._deleted)return new b(p());{const n=function(t,e,n,r,i){const s=A(t.urlParams),o=t.url+s,a=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(a,i),new I(o,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(n),n.getPromise().then((()=>this._requests.delete(n)),(()=>this._requests.delete(n))),n}}}const St="storage-exp";function At(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new vt(t,new B(e),n)}(t=(0,s.m9)(t),e,n)}function It(t){return wt(t=(0,s.m9)(t))}function kt(t,e){return Tt(t=(0,s.m9)(t),e)}function Ct(t=(0,i.Mq)(),e){t=(0,s.m9)(t);return(0,i.qX)(t,St).getImmediate({identifier:e})}function Rt(t,{instanceIdentifier:e}){const n=t.getProvider("app-exp").getImmediate(),r=t.getProvider("auth-internal");return new xt(n,r,new y,e,i.Jn)}(0,i.Xd)(new o.wA(St,Rt,"PUBLIC").setMultipleInstances(!0)),(0,i.KN)("@firebase/storage","0.0.900-exp.894b5da5a")},3430:function(t,e,n){"use strict";n.d(e,{E:function(){return io}});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}Object.create;function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function u(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create;var c=n(7378),l=function(t){return{isEnabled:function(e){return t.some((function(t){return!!e[t]}))}}},h={measureLayout:l(["layout","layoutId","drag"]),animation:l(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag"]),exit:l(["exit"]),drag:l(["drag","dragControls"]),focus:l(["whileFocus"]),hover:l(["whileHover","onHoverStart","onHoverEnd"]),tap:l(["whileTap","onTap","onTapStart","onTapCancel"]),pan:l(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),layoutAnimation:l(["layout","layoutId"])};var f=(0,c.createContext)({strict:!1}),d=Object.keys(h),p=d.length;var m=(0,c.createContext)({transformPagePoint:function(t){return t},isStatic:!1}),g=(0,c.createContext)({});var v=(0,c.createContext)(null);function y(t){var e=(0,c.useRef)(null);return null===e.current&&(e.current=t()),e.current}function w(){var t=(0,c.useContext)(v);if(null===t)return[!0,null];var e=t.isPresent,n=t.onExitComplete,r=t.register,i=_();(0,c.useEffect)((function(){return r(i)}),[]);return!e&&n?[!1,function(){return null==n?void 0:n(i)}]:[!0]}function b(t){return null===t||t.isPresent}var E=0,T=function(){return E++},_=function(){return y(T)},x=(0,c.createContext)(null),S="undefined"!=typeof window,A=S?c.useLayoutEffect:c.useEffect;function I(t,e,n,r){var i=(0,c.useContext)(m),o=(0,c.useContext)(f),a=(0,c.useContext)(g).visualElement,u=(0,c.useContext)(v),l=function(t){var e=t.layoutId,n=(0,c.useContext)(x);return n&&void 0!==e?n+"-"+e:e}(n),h=(0,c.useRef)(void 0);r||(r=o.renderer),!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:s(s({},n),{layoutId:l}),presenceId:null==u?void 0:u.id,blockInitialAnimation:!1===(null==u?void 0:u.initial)}));var d=h.current;return A((function(){d&&(d.setProps(s(s(s({},i),n),{layoutId:l})),d.isPresent=b(u),d.isPresenceRoot=!a||a.presenceId!==(null==u?void 0:u.id),d.syncRender())})),(0,c.useEffect)((function(){var t;d&&(null===(t=d.animationState)||void 0===t||t.animateChanges())})),A((function(){return function(){return null==d?void 0:d.notifyUnmount()}}),[]),d}function k(t){return"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function C(t){return Array.isArray(t)}function R(t){return"string"==typeof t||C(t)}function P(t,e,n,r,i){var s;return void 0===r&&(r={}),void 0===i&&(i={}),"string"==typeof e&&(e=null===(s=t.variants)||void 0===s?void 0:s[e]),"function"==typeof e?e(null!=n?n:t.custom,r,i):e}function D(t,e,n){var r=t.getProps();return P(r,e,null!=n?n:r.custom,function(t){var e={};return t.forEachValue((function(t,n){return e[n]=t.get()})),e}(t),function(t){var e={};return t.forEachValue((function(t,n){return e[n]=t.getVelocity()})),e}(t))}function N(t){var e;return"function"==typeof(null===(e=t.animate)||void 0===e?void 0:e.start)||R(t.initial)||R(t.animate)||R(t.whileHover)||R(t.whileDrag)||R(t.whileTap)||R(t.whileFocus)||R(t.exit)}function L(t){return Boolean(N(t)||t.variants)}function O(t,e){var n=function(t,e){if(N(t)){var n=t.initial,r=t.animate;return{initial:!1===n||R(n)?n:void 0,animate:R(r)?r:void 0}}return!1!==t.inherit?e:{}}(t,(0,c.useContext)(g)),r=n.initial,i=n.animate;return(0,c.useMemo)((function(){return{initial:r,animate:i}}),e?[M(r),M(i)]:[])}function M(t){return Array.isArray(t)?t.join(" "):t}function V(t){var e=t.preloadedFeatures,n=t.createVisualElement,r=t.useRender,i=t.useVisualState,o=t.Component;return e&&function(t){for(var e in t){var n=t[e];null!==n&&(h[e].Component=n)}}(e),(0,c.forwardRef)((function(t,e){var a=(0,c.useContext)(m).isStatic,u=null,l=O(t,a),v=i(t,a);return!a&&S&&(l.visualElement=I(o,v,t,n),u=function(t,e,n){var r=[];if((0,c.useContext)(f),!e)return null;for(var i=0;i<p;i++){var o=d[i],a=h[o],u=a.isEnabled,l=a.Component;u(t)&&l&&r.push(c.createElement(l,s({key:o},t,{visualElement:e})))}return r}(t,l.visualElement)),c.createElement(c.Fragment,null,c.createElement(g.Provider,{value:l},r(o,t,function(t,e,n){return(0,c.useCallback)((function(r){var i;r&&(null===(i=t.mount)||void 0===i||i.call(t,r)),e&&(r?e.mount(r):e.unmount()),n&&("function"==typeof n?n(r):k(n)&&(n.current=r))}),[e])}(v,l.visualElement,e),v,a)),u)}))}function U(t){function e(e,n){return void 0===n&&(n={}),V(t(e,n))}var n=new Map;return new Proxy(e,{get:function(t,r){return n.has(r)||n.set(r,e(r)),n.get(r)}})}var F=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function B(t){return"string"==typeof t&&!t.includes("-")&&!!(F.indexOf(t)>-1||/[A-Z]/.test(t))}var q={};var j=["","X","Y","Z"],H=["transformPerspective","x","y","z"];function z(t,e){return H.indexOf(t)-H.indexOf(e)}["translate","scale","rotate","skew"].forEach((function(t){return j.forEach((function(e){return H.push(t+e)}))}));var K=new Set(H);function G(t){return K.has(t)}var $=new Set(["originX","originY","originZ"]);function X(t){return $.has(t)}function W(t,e){var n=e.layout,r=e.layoutId;return G(t)||X(t)||(n||void 0!==r)&&(!!q[t]||"opacity"===t)}var Y=function(t){return null!==t&&"object"==typeof t&&t.getVelocity},Q={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function J(t){return t.startsWith("--")}var Z=function(t,e){return e&&"number"==typeof t?e.transform(t):t};var tt=function(){return(tt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create;Object.create;var et=function(t,e){return function(n){return Math.max(Math.min(n,e),t)}},nt=function(t){return t%1?Number(t.toFixed(5)):t},rt=/(-)?([\d]*\.?[\d])+/g,it=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,st=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function ot(t){return"string"==typeof t}var at=function(t){return{test:function(e){return ot(e)&&e.endsWith(t)&&1===e.split(" ").length},parse:parseFloat,transform:function(e){return""+e+t}}},ut=at("deg"),ct=at("%"),lt=at("px"),ht=at("vh"),ft=at("vw"),dt=tt(tt({},ct),{parse:function(t){return ct.parse(t)/100},transform:function(t){return ct.transform(100*t)}}),pt={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},mt=tt(tt({},pt),{transform:et(0,1)}),gt=tt(tt({},pt),{default:1}),vt=s(s({},pt),{transform:Math.round}),yt={borderWidth:lt,borderTopWidth:lt,borderRightWidth:lt,borderBottomWidth:lt,borderLeftWidth:lt,borderRadius:lt,radius:lt,borderTopLeftRadius:lt,borderTopRightRadius:lt,borderBottomRightRadius:lt,borderBottomLeftRadius:lt,width:lt,maxWidth:lt,height:lt,maxHeight:lt,size:lt,top:lt,right:lt,bottom:lt,left:lt,padding:lt,paddingTop:lt,paddingRight:lt,paddingBottom:lt,paddingLeft:lt,margin:lt,marginTop:lt,marginRight:lt,marginBottom:lt,marginLeft:lt,rotate:ut,rotateX:ut,rotateY:ut,rotateZ:ut,scale:gt,scaleX:gt,scaleY:gt,scaleZ:gt,skew:ut,skewX:ut,skewY:ut,distance:lt,translateX:lt,translateY:lt,translateZ:lt,x:lt,y:lt,z:lt,perspective:lt,transformPerspective:lt,opacity:mt,originX:dt,originY:dt,originZ:lt,zIndex:vt,fillOpacity:mt,strokeOpacity:mt,numOctaves:vt};function wt(t,e,n,r,i,s,o,a){var u,c=t.style,l=t.vars,h=t.transform,f=t.transformKeys,d=t.transformOrigin;f.length=0;var p=!1,m=!1,g=!0;for(var v in e){var y=e[v];if(J(v))l[v]=y;else{var w=yt[v],b=Z(y,w);if(G(v)){if(p=!0,h[v]=b,f.push(v),!g)continue;y!==(null!==(u=w.default)&&void 0!==u?u:0)&&(g=!1)}else if(X(v))d[v]=b,m=!0;else if(r&&n&&r.isHydrated&&q[v]){var E=q[v].process(y,r,n),T=q[v].applyTo;if(T)for(var _=T.length,x=0;x<_;x++)c[T[x]]=E;else c[v]=E}else c[v]=b}}r&&n&&o&&a?(c.transform=o(r.deltaFinal,r.treeScale,p?h:void 0),s&&(c.transform=s(h,c.transform)),c.transformOrigin=a(r)):(p&&(c.transform=function(t,e,n,r){var i=t.transform,s=t.transformKeys,o=e.enableHardwareAcceleration,a=void 0===o||o,u=e.allowTransformNone,c=void 0===u||u,l="";s.sort(z);for(var h=!1,f=s.length,d=0;d<f;d++){var p=s[d];l+=(Q[p]||p)+"("+i[p]+") ","z"===p&&(h=!0)}return!h&&a?l+="translateZ(0)":l=l.trim(),r?l=r(i,n?"":l):c&&n&&(l="none"),l}(t,i,g,s)),m&&(c.transformOrigin=function(t){var e=t.originX,n=void 0===e?"50%":e,r=t.originY,i=void 0===r?"50%":r,s=t.originZ;return n+" "+i+" "+(void 0===s?0:s)}(d)))}var bt=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function Et(t,e,n){for(var r in e)Y(e[r])||W(r,n)||(t[r]=e[r])}function Tt(t,e,n){var r={};return Et(r,t.style||{},t),Object.assign(r,function(t,e,n){var r=t.transformTemplate;return(0,c.useMemo)((function(){var t={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};wt(t,e,void 0,void 0,{enableHardwareAcceleration:!n},r);var i=t.style;return s(s({},t.vars),i)}),[e])}(t,e,n)),t.transformValues&&(r=t.transformValues(r)),r}function _t(t,e,n){var r={},i=Tt(t,e,n);return Boolean(t.drag)&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),r.style=i,r}var xt=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","onLayoutAnimationComplete","onViewportBoxUpdate","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover"]);function St(t){return xt.has(t)}var At=function(t){return!St(t)};try{var It=n(9438).Z;At=function(t){return t.startsWith("on")?!St(t):It(t)}}catch(t){}function kt(t,e,n){return"string"==typeof t?t:lt.transform(e+n*t)}var Ct=function(t,e){return lt.transform(t*e)},Rt={offset:"stroke-dashoffset",array:"stroke-dasharray"},Pt={offset:"strokeDashoffset",array:"strokeDasharray"};function Dt(t,e,n,r,i,s,a,u){var c=e.attrX,l=e.attrY,h=e.originX,f=e.originY,d=e.pathLength,p=e.pathSpacing,m=void 0===p?1:p,g=e.pathOffset,v=void 0===g?0:g;wt(t,o(e,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,r,i,s,a,u),t.attrs=t.style,t.style={};var y=t.attrs,w=t.style,b=t.dimensions,E=t.totalPathLength;y.transform&&(b&&(w.transform=y.transform),delete y.transform),b&&(void 0!==h||void 0!==f||w.transform)&&(w.transformOrigin=function(t,e,n){return kt(e,t.x,t.width)+" "+kt(n,t.y,t.height)}(b,void 0!==h?h:.5,void 0!==f?f:.5)),void 0!==c&&(y.x=c),void 0!==l&&(y.y=l),void 0!==E&&void 0!==d&&function(t,e,n,r,i,s){void 0===r&&(r=1),void 0===i&&(i=0),void 0===s&&(s=!0);var o=s?Rt:Pt;t[o.offset]=Ct(-i,e);var a=Ct(n,e),u=Ct(r,e);t[o.array]=a+" "+u}(y,E,d,m,v,!1)}var Nt=function(){return s(s({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function Lt(t,e){var n=(0,c.useMemo)((function(){var n=Nt();return Dt(n,e,void 0,void 0,{enableHardwareAcceleration:!1},t.transformTemplate),s(s({},n.attrs),{style:s({},n.style)})}),[e]);if(t.style){var r={};Et(r,t.style,t),n.style=s(s({},r),n.style)}return n}function Ot(t){void 0===t&&(t=!1);return function(e,n,r,i,o){var a=i.latestValues,u=(B(e)?Lt:_t)(n,a,o),l=function(t,e,n){var r={};for(var i in t)(At(i)||!0===n&&St(i)||!e&&!St(i))&&(r[i]=t[i]);return r}(n,"string"==typeof e,t),h=s(s(s({},l),u),{ref:r});return(0,c.createElement)(e,h)}}var Mt=/([a-z])([A-Z])/g,Vt=function(t){return t.replace(Mt,"$1-$2").toLowerCase()};function Ut(t,e){var n=e.style,r=e.vars;for(var i in Object.assign(t.style,n),r)t.style.setProperty(i,r[i])}var Ft=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox"]);function Bt(t,e){for(var n in Ut(t,e),e.attrs)t.setAttribute(Ft.has(n)?n:Vt(n),e.attrs[n])}function qt(t){var e=t.style,n={};for(var r in e)(Y(e[r])||W(r,t))&&(n[r]=e[r]);return n}function jt(t){var e=qt(t);for(var n in t){if(Y(t[n]))e["x"===n||"y"===n?"attr"+n.toUpperCase():n]=t[n]}return e}function Ht(t){return"object"==typeof t&&"function"==typeof t.start}var zt=function(t){return Array.isArray(t)};function Kt(t){var e,n=Y(t)?t.get():t;return e=n,Boolean(e&&"object"==typeof e&&e.mix&&e.toValue)?n.toValue():n}function Gt(t,e,n,r){var i=t.scrapeMotionValuesFromProps,s=t.createRenderState,o=t.onMount,a={latestValues:Xt(e,n,r,i),renderState:s()};return o&&(a.mount=function(t){return o(e,t,a)}),a}var $t=function(t){return function(e,n){var r=(0,c.useContext)(g),i=(0,c.useContext)(v);return n?Gt(t,e,r,i):y((function(){return Gt(t,e,r,i)}))}};function Xt(t,e,n,r){var i={},s=!1===(null==n?void 0:n.initial),a=r(t);for(var u in a)i[u]=Kt(a[u]);var c=t.initial,l=t.animate,h=N(t),f=L(t);e&&f&&!h&&!1!==t.inherit&&(null!=c||(c=e.initial),null!=l||(l=e.animate));var d=s||!1===c?l:c;d&&"boolean"!=typeof d&&!Ht(d)&&(Array.isArray(d)?d:[d]).forEach((function(e){var n=P(t,e);if(n){var r=n.transitionEnd;n.transition;var s=o(n,["transitionEnd","transition"]);for(var a in s)i[a]=s[a];for(var a in r)i[a]=r[a]}}));return i}var Wt={useVisualState:$t({scrapeMotionValuesFromProps:jt,createRenderState:Nt,onMount:function(t,e,n){var r=n.renderState,i=n.latestValues;try{r.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(t){r.dimensions={x:0,y:0,width:0,height:0}}"path"===e.tagName&&(r.totalPathLength=e.getTotalLength()),Dt(r,i,void 0,void 0,{enableHardwareAcceleration:!1},t.transformTemplate),Bt(e,r)}})};var Yt,Qt={useVisualState:$t({scrapeMotionValuesFromProps:qt,createRenderState:bt})};function Jt(t,e,n,r){return t.addEventListener(e,n,r),function(){return t.removeEventListener(e,n,r)}}function Zt(t,e,n,r){(0,c.useEffect)((function(){var i=t.current;if(n&&i)return Jt(i,e,n,r)}),[t,e,n,r])}function te(t){return"undefined"!=typeof PointerEvent&&t instanceof PointerEvent?!("mouse"!==t.pointerType):t instanceof MouseEvent}function ee(t){return!!t.touches}!function(t){t.Animate="animate",t.Hover="whileHover",t.Tap="whileTap",t.Drag="whileDrag",t.Focus="whileFocus",t.Exit="exit"}(Yt||(Yt={}));var ne={pageX:0,pageY:0};function re(t,e){void 0===e&&(e="page");var n=t.touches[0]||t.changedTouches[0]||ne;return{x:n[e+"X"],y:n[e+"Y"]}}function ie(t,e){return void 0===e&&(e="page"),{x:t[e+"X"],y:t[e+"Y"]}}function se(t,e){return void 0===e&&(e="page"),{point:ee(t)?re(t,e):ie(t,e)}}function oe(t){return se(t,"client")}var ae=function(t,e){void 0===e&&(e=!1);var n,r=function(e){return t(e,se(e))};return e?(n=r,function(t){var e=t instanceof MouseEvent;(!e||e&&0===t.button)&&n(t)}):r},ue={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},ce={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function le(t){return S&&null===window.onpointerdown?t:S&&null===window.ontouchstart?ce[t]:S&&null===window.onmousedown?ue[t]:t}function he(t,e,n,r){return Jt(t,le(e),ae(n,"pointerdown"===e),r)}function fe(t,e,n,r){return Zt(t,le(e),n&&ae(n,"pointerdown"===e),r)}function de(t){var e=null;return function(){return null===e&&(e=t,function(){e=null})}}var pe=de("dragHorizontal"),me=de("dragVertical");function ge(t){var e=!1;if("y"===t)e=me();else if("x"===t)e=pe();else{var n=pe(),r=me();n&&r?e=function(){n(),r()}:(n&&n(),r&&r())}return e}function ve(){var t=ge(!0);return!t||(t(),!1)}function ye(t,e,n){return function(r,i){var s;te(r)&&t.isHoverEventsEnabled&&!ve()&&(null==n||n(r,i),null===(s=t.animationState)||void 0===s||s.setActive(Yt.Hover,e))}}var we=function(t,e){return!!e&&(t===e||we(t,e.parentElement))};function be(t){return(0,c.useEffect)((function(){return function(){return t()}}),[])}var Ee=function(t,e){return function(n){return e(t(n))}},Te=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(Ee)};var _e=function(t){return function(e){return t(e),null}},xe={tap:_e((function(t){var e=t.onTap,n=t.onTapStart,r=t.onTapCancel,i=t.whileTap,s=t.visualElement,o=e||n||r||i,a=(0,c.useRef)(!1),u=(0,c.useRef)(null);function l(){var t;null===(t=u.current)||void 0===t||t.call(u),u.current=null}function h(){var t;return l(),a.current=!1,null===(t=s.animationState)||void 0===t||t.setActive(Yt.Tap,!1),!ve()}function f(t,n){h()&&(we(s.getInstance(),t.target)?null==e||e(t,n):null==r||r(t,n))}function d(t,e){h()&&(null==r||r(t,e))}fe(s,"pointerdown",o?function(t,e){var r;l(),a.current||(a.current=!0,u.current=Te(he(window,"pointerup",f),he(window,"pointercancel",d)),null==n||n(t,e),null===(r=s.animationState)||void 0===r||r.setActive(Yt.Tap,!0))}:void 0),be(l)})),focus:_e((function(t){var e=t.whileFocus,n=t.visualElement;Zt(n,"focus",e?function(){var t;null===(t=n.animationState)||void 0===t||t.setActive(Yt.Focus,!0)}:void 0),Zt(n,"blur",e?function(){var t;null===(t=n.animationState)||void 0===t||t.setActive(Yt.Focus,!1)}:void 0)})),hover:_e((function(t){var e=t.onHoverStart,n=t.onHoverEnd,r=t.whileHover,i=t.visualElement;fe(i,"pointerenter",e||r?ye(i,!0,e):void 0),fe(i,"pointerleave",n||r?ye(i,!1,n):void 0)}))};function Se(t,e){if(!Array.isArray(e))return!1;var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}var Ae=function(){return(Ae=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ie(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}Object.create;Object.create;var ke=function(t,e,n){return Math.min(Math.max(n,t),e)},Ce=.001;function Re(t){var e,n,r=t.duration,i=void 0===r?800:r,s=t.bounce,o=void 0===s?.25:s,a=t.velocity,u=void 0===a?0:a,c=t.mass,l=void 0===c?1:c,h=1-o;h=ke(.05,1,h),i=ke(.01,10,i/1e3),h<1?(e=function(t){var e=t*h,n=e*i,r=e-u,s=Pe(t,h),o=Math.exp(-n);return Ce-r/s*o},n=function(t){var n=t*h*i,r=n*u+u,s=Math.pow(h,2)*Math.pow(t,2)*i,o=Math.exp(-n),a=Pe(Math.pow(t,2),h);return(-e(t)+Ce>0?-1:1)*((r-s)*o)/a}):(e=function(t){return Math.exp(-t*i)*((t-u)*i+1)-.001},n=function(t){return Math.exp(-t*i)*(i*i*(u-t))});var f=function(t,e,n){for(var r=n,i=1;i<12;i++)r-=t(r)/e(r);return r}(e,n,5/i);if(isNaN(f))return{stiffness:100,damping:10};var d=Math.pow(f,2)*l;return{stiffness:d,damping:2*h*Math.sqrt(l*d)}}function Pe(t,e){return t*Math.sqrt(1-e*e)}var De=["duration","bounce"],Ne=["stiffness","damping","mass"];function Le(t,e){return e.some((function(e){return void 0!==t[e]}))}function Oe(t){var e=t.from,n=void 0===e?0:e,r=t.to,i=void 0===r?1:r,s=t.restSpeed,o=void 0===s?2:s,a=t.restDelta,u=Ie(t,["from","to","restSpeed","restDelta"]),c={done:!1,value:n},l=function(t){var e=Ae({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},t);if(!Le(t,Ne)&&Le(t,De)){var n=Re(t);(e=Ae(Ae(Ae({},e),n),{velocity:0,mass:1})).isResolvedFromDuration=!0}return e}(u),h=l.stiffness,f=l.damping,d=l.mass,p=l.velocity,m=l.isResolvedFromDuration,g=Me,v=Me;function y(){var t=p?-p/1e3:0,e=i-n,r=f/(2*Math.sqrt(h*d)),s=Math.sqrt(h/d)/1e3;if(null!=a||(a=Math.abs(i-n)<=1?.01:.4),r<1){var o=Pe(s,r);g=function(n){var a=Math.exp(-r*s*n);return i-a*((t+r*s*e)/o*Math.sin(o*n)+e*Math.cos(o*n))},v=function(n){var i=Math.exp(-r*s*n);return r*s*i*(Math.sin(o*n)*(t+r*s*e)/o+e*Math.cos(o*n))-i*(Math.cos(o*n)*(t+r*s*e)-o*e*Math.sin(o*n))}}else if(1===r)g=function(n){return i-Math.exp(-s*n)*(e+(t+s*e)*n)};else{var u=s*Math.sqrt(r*r-1);g=function(n){var o=Math.exp(-r*s*n),a=Math.min(u*n,300);return i-o*((t+r*s*e)*Math.sinh(a)+u*e*Math.cosh(a))/u}}}return y(),{next:function(t){var e=g(t);if(m)c.done=t>=u.duration;else{var n=1e3*v(t),r=Math.abs(n)<=o,s=Math.abs(i-e)<=a;c.done=r&&s}return c.value=c.done?i:e,c},flipTarget:function(){var t;p=-p,n=(t=[i,n])[0],i=t[1],y()}}}Oe.needsInterpolation=function(t,e){return"string"==typeof t||"string"==typeof e};var Me=function(t){return 0},Ve=function(t,e,n){var r=e-t;return 0===r?1:(n-t)/r},Ue=function(t,e,n){return-n*t+n*e+t},Fe=function(t,e){return function(n){return Boolean(ot(n)&&st.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e))}},Be=function(t,e,n){return function(r){var i;if(!ot(r))return r;var s=r.match(rt),o=s[0],a=s[1],u=s[2],c=s[3];return(i={})[t]=parseFloat(o),i[e]=parseFloat(a),i[n]=parseFloat(u),i.alpha=void 0!==c?parseFloat(c):1,i}},qe=et(0,255),je=tt(tt({},pt),{transform:function(t){return Math.round(qe(t))}}),He={test:Fe("rgb","red"),parse:Be("red","green","blue"),transform:function(t){var e=t.red,n=t.green,r=t.blue,i=t.alpha,s=void 0===i?1:i;return"rgba("+je.transform(e)+", "+je.transform(n)+", "+je.transform(r)+", "+nt(mt.transform(s))+")"}};var ze={test:Fe("#"),parse:function(t){var e="",n="",r="",i="";return t.length>5?(e=t.substr(1,2),n=t.substr(3,2),r=t.substr(5,2),i=t.substr(7,2)):(e=t.substr(1,1),n=t.substr(2,1),r=t.substr(3,1),i=t.substr(4,1),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:He.transform},Ke={test:Fe("hsl","hue"),parse:Be("hue","saturation","lightness"),transform:function(t){var e=t.hue,n=t.saturation,r=t.lightness,i=t.alpha,s=void 0===i?1:i;return"hsla("+Math.round(e)+", "+ct.transform(nt(n))+", "+ct.transform(nt(r))+", "+nt(mt.transform(s))+")"}},Ge=function(t,e,n){var r=t*t,i=e*e;return Math.sqrt(Math.max(0,n*(i-r)+r))},$e=[ze,He,Ke],Xe=function(t){return $e.find((function(e){return e.test(t)}))},We=function(t){return"'"+t+"' is not an animatable color. Use the equivalent color code instead."},Ye=function(t,e){var n=Xe(t),r=Xe(e);We(t),We(e),n.transform,r.transform;var i=n.parse(t),s=r.parse(e),o=Ae({},i),a=n===Ke?Ue:Ge;return function(t){for(var e in o)"alpha"!==e&&(o[e]=a(i[e],s[e],t));return o.alpha=Ue(i.alpha,s.alpha,t),n.transform(o)}},Qe={test:function(t){return He.test(t)||ze.test(t)||Ke.test(t)},parse:function(t){return He.test(t)?He.parse(t):Ke.test(t)?Ke.parse(t):ze.parse(t)},transform:function(t){return ot(t)?t:t.hasOwnProperty("red")?He.transform(t):Ke.transform(t)}},Je="${c}",Ze="${n}";function tn(t){var e=[],n=0,r=t.match(it);r&&(n=r.length,t=t.replace(it,Je),e.push.apply(e,r.map(Qe.parse)));var i=t.match(rt);return i&&(t=t.replace(rt,Ze),e.push.apply(e,i.map(pt.parse))),{values:e,numColors:n,tokenised:t}}function en(t){return tn(t).values}function nn(t){var e=tn(t),n=e.values,r=e.numColors,i=e.tokenised,s=n.length;return function(t){for(var e=i,n=0;n<s;n++)e=e.replace(n<r?Je:Ze,n<r?Qe.transform(t[n]):nt(t[n]));return e}}var rn=function(t){return"number"==typeof t?0:t};var sn={test:function(t){var e,n,r,i;return isNaN(t)&&ot(t)&&(null!==(n=null===(e=t.match(rt))||void 0===e?void 0:e.length)&&void 0!==n?n:0)+(null!==(i=null===(r=t.match(it))||void 0===r?void 0:r.length)&&void 0!==i?i:0)>0},parse:en,createTransformer:nn,getAnimatableNone:function(t){var e=en(t);return nn(t)(e.map(rn))}},on=function(t){return"number"==typeof t};function an(t,e){return on(t)?function(n){return Ue(t,e,n)}:Qe.test(t)?Ye(t,e):hn(t,e)}var un=function(t,e){var n=function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}([],t),r=n.length,i=t.map((function(t,n){return an(t,e[n])}));return function(t){for(var e=0;e<r;e++)n[e]=i[e](t);return n}},cn=function(t,e){var n=Ae(Ae({},t),e),r={};for(var i in n)void 0!==t[i]&&void 0!==e[i]&&(r[i]=an(t[i],e[i]));return function(t){for(var e in r)n[e]=r[e](t);return n}};function ln(t){for(var e=sn.parse(t),n=e.length,r=0,i=0,s=0,o=0;o<n;o++)r||"number"==typeof e[o]?r++:void 0!==e[o].hue?s++:i++;return{parsed:e,numNumbers:r,numRGB:i,numHSL:s}}var hn=function(t,e){var n=sn.createTransformer(e),r=ln(t),i=ln(e);return r.numHSL===i.numHSL&&r.numRGB===i.numRGB&&(r.numNumbers,i.numNumbers),Te(un(r.parsed,i.parsed),n)},fn=function(t,e){return function(n){return Ue(t,e,n)}};function dn(t,e,n){for(var r,i=[],s=n||("number"==typeof(r=t[0])?fn:"string"==typeof r?Qe.test(r)?Ye:hn:Array.isArray(r)?un:"object"==typeof r?cn:void 0),o=t.length-1,a=0;a<o;a++){var u=s(t[a],t[a+1]);if(e){var c=Array.isArray(e)?e[a]:e;u=Te(c,u)}i.push(u)}return i}function pn(t,e,n){var r=void 0===n?{}:n,i=r.clamp,s=void 0===i||i,o=r.ease,a=r.mixer,u=t.length;e.length,!o||!Array.isArray(o)||o.length,t[0]>t[u-1]&&(t=[].concat(t),e=[].concat(e),t.reverse(),e.reverse());var c=dn(e,o,a),l=2===u?function(t,e){var n=t[0],r=t[1],i=e[0];return function(t){return i(Ve(n,r,t))}}(t,c):function(t,e){var n=t.length,r=n-1;return function(i){var s=0,o=!1;if(i<=t[0]?o=!0:i>=t[r]&&(s=r-1,o=!0),!o){for(var a=1;a<n&&!(t[a]>i||a===r);a++);s=a-1}var u=Ve(t[s],t[s+1],i);return e[s](u)}}(t,c);return s?function(e){return l(ke(t[0],t[u-1],e))}:l}var mn,gn=function(t){return function(e){return 1-t(1-e)}},vn=function(t){return function(e){return e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2}},yn=function(t){return function(e){return e*e*((t+1)*e-t)}},wn=function(t){return t},bn=(mn=2,function(t){return Math.pow(t,mn)}),En=gn(bn),Tn=vn(bn),_n=function(t){return 1-Math.sin(Math.acos(t))},xn=gn(_n),Sn=vn(xn),An=yn(1.525),In=gn(An),kn=vn(An),Cn=function(t){var e=yn(t);return function(t){return(t*=2)<1?.5*e(t):.5*(2-Math.pow(2,-10*(t-1)))}}(1.525),Rn=function(t){if(1===t||0===t)return t;var e=t*t;return t<.36363636363636365?7.5625*e:t<.7272727272727273?9.075*e-9.9*t+3.4:t<.9?12.066481994459833*e-19.63545706371191*t+8.898060941828255:10.8*t*t-20.52*t+10.72},Pn=gn(Rn);function Dn(t,e){return t.map((function(){return e||Tn})).splice(0,t.length-1)}function Nn(t){var e=t.from,n=void 0===e?0:e,r=t.to,i=void 0===r?1:r,s=t.ease,o=t.offset,a=t.duration,u=void 0===a?300:a,c={done:!1,value:n},l=Array.isArray(i)?i:[n,i],h=function(t,e){return t.map((function(t){return t*e}))}(o&&o.length===l.length?o:function(t){var e=t.length;return t.map((function(t,n){return 0!==n?n/(e-1):0}))}(l),u);function f(){return pn(h,l,{ease:Array.isArray(s)?s:Dn(l,s)})}var d=f();return{next:function(t){return c.value=d(t),c.done=t>=u,c},flipTarget:function(){l.reverse(),d=f()}}}var Ln={keyframes:Nn,spring:Oe,decay:function(t){var e=t.velocity,n=void 0===e?0:e,r=t.from,i=void 0===r?0:r,s=t.power,o=void 0===s?.8:s,a=t.timeConstant,u=void 0===a?350:a,c=t.restDelta,l=void 0===c?.5:c,h=t.modifyTarget,f={done:!1,value:i},d=o*n,p=i+d,m=void 0===h?p:h(p);return m!==p&&(d=m-i),{next:function(t){var e=-d*Math.exp(-t/u);return f.done=!(e>l||e<-l),f.value=f.done?m:m+e,f},flipTarget:function(){}}}};var On=1/60*1e3,Mn="undefined"!=typeof performance?function(){return performance.now()}:function(){return Date.now()},Vn="undefined"!=typeof window?function(t){return window.requestAnimationFrame(t)}:function(t){return setTimeout((function(){return t(Mn())}),On)};var Un=!0,Fn=!1,Bn=!1,qn={delta:0,timestamp:0},jn=["read","update","preRender","render","postRender"],Hn=jn.reduce((function(t,e){return t[e]=function(t){var e=[],n=[],r=0,i=!1,s=new WeakSet,o={schedule:function(t,o,a){void 0===o&&(o=!1),void 0===a&&(a=!1);var u=a&&i,c=u?e:n;return o&&s.add(t),-1===c.indexOf(t)&&(c.push(t),u&&i&&(r=e.length)),t},cancel:function(t){var e=n.indexOf(t);-1!==e&&n.splice(e,1),s.delete(t)},process:function(a){var u;if(i=!0,e=(u=[n,e])[0],(n=u[1]).length=0,r=e.length)for(var c=0;c<r;c++){var l=e[c];l(a),s.has(l)&&(o.schedule(l),t())}i=!1}};return o}((function(){return Fn=!0})),t}),{}),zn=jn.reduce((function(t,e){var n=Hn[e];return t[e]=function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),Fn||Wn(),n.schedule(t,e,r)},t}),{}),Kn=jn.reduce((function(t,e){return t[e]=Hn[e].cancel,t}),{}),Gn=jn.reduce((function(t,e){return t[e]=function(){return Hn[e].process(qn)},t}),{}),$n=function(t){return Hn[t].process(qn)},Xn=function(t){Fn=!1,qn.delta=Un?On:Math.max(Math.min(t-qn.timestamp,40),1),qn.timestamp=t,Bn=!0,jn.forEach($n),Bn=!1,Fn&&(Un=!1,Vn(Xn))},Wn=function(){Fn=!0,Un=!0,Bn||Vn(Xn)},Yn=function(){return qn},Qn=zn;function Jn(t,e,n){return void 0===n&&(n=0),t-e-n}var Zn=function(t){var e=function(e){var n=e.delta;return t(n)};return{start:function(){return Qn.update(e,!0)},stop:function(){return Kn.update(e)}}};function tr(t){var e,n,r,i,s,o=t.from,a=t.autoplay,u=void 0===a||a,c=t.driver,l=void 0===c?Zn:c,h=t.elapsed,f=void 0===h?0:h,d=t.repeat,p=void 0===d?0:d,m=t.repeatType,g=void 0===m?"loop":m,v=t.repeatDelay,y=void 0===v?0:v,w=t.onPlay,b=t.onStop,E=t.onComplete,T=t.onRepeat,_=t.onUpdate,x=Ie(t,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]),S=x.to,A=0,I=x.duration,k=!1,C=!0,R=function(t){if(Array.isArray(t.to))return Nn;if(Ln[t.type])return Ln[t.type];var e=new Set(Object.keys(t));return e.has("ease")||e.has("duration")&&!e.has("dampingRatio")?Nn:e.has("dampingRatio")||e.has("stiffness")||e.has("mass")||e.has("damping")||e.has("restSpeed")||e.has("restDelta")?Oe:Nn}(x);(null===(n=(e=R).needsInterpolation)||void 0===n?void 0:n.call(e,o,S))&&(s=pn([0,100],[o,S],{clamp:!1}),o=0,S=100);var P=R(Ae(Ae({},x),{from:o,to:S}));function D(){A++,"reverse"===g?f=function(t,e,n,r){return void 0===n&&(n=0),void 0===r&&(r=!0),r?Jn(e+-t,e,n):e-(t-e)+n}(f,I,y,C=A%2==0):(f=Jn(f,I,y),"mirror"===g&&P.flipTarget()),k=!1,T&&T()}function N(t){if(C||(t=-t),f+=t,!k){var e=P.next(Math.max(0,f));i=e.value,s&&(i=s(i)),k=C?e.done:f<=0}null==_||_(i),k&&(0===A&&(null!=I||(I=f)),A<p?function(t,e,n,r){return r?t>=e+n:t<=-n}(f,I,y,C)&&D():(r.stop(),E&&E()))}return u&&(null==w||w(),(r=l(N)).start()),{stop:function(){null==b||b(),r.stop()}}}function er(t,e){return e?t*(1e3/e):0}var nr=function(t){return 1e3*t},rr=function(t,e){return 1-3*e+3*t},ir=function(t,e){return 3*e-6*t},sr=function(t){return 3*t},or=function(t,e,n){return((rr(e,n)*t+ir(e,n))*t+sr(e))*t},ar=function(t,e,n){return 3*rr(e,n)*t*t+2*ir(e,n)*t+sr(e)};var ur=.1;function cr(t,e,n,r){if(t===e&&n===r)return wn;for(var i=new Float32Array(11),s=0;s<11;++s)i[s]=or(s*ur,t,n);function o(e){for(var r=0,s=1;10!==s&&i[s]<=e;++s)r+=ur;--s;var o=r+(e-i[s])/(i[s+1]-i[s])*ur,a=ar(o,t,n);return a>=.001?function(t,e,n,r){for(var i=0;i<8;++i){var s=ar(e,n,r);if(0===s)return e;e-=(or(e,n,r)-t)/s}return e}(e,o,t,n):0===a?o:function(t,e,n,r,i){var s,o,a=0;do{(s=or(o=e+(n-e)/2,r,i)-t)>0?n=o:e=o}while(Math.abs(s)>1e-7&&++a<10);return o}(e,r,r+ur,t,n)}return function(t){return 0===t||1===t?t:or(o(t),e,r)}}var lr={linear:wn,easeIn:bn,easeInOut:Tn,easeOut:En,circIn:_n,circInOut:Sn,circOut:xn,backIn:An,backInOut:kn,backOut:In,anticipate:Cn,bounceIn:Pn,bounceInOut:function(t){return t<.5?.5*(1-Rn(1-2*t)):.5*Rn(2*t-1)+.5},bounceOut:Rn},hr=function(t){if(Array.isArray(t)){t.length;var e=a(t,4);return cr(e[0],e[1],e[2],e[3])}return"string"==typeof t?lr[t]:t},fr=function(t,e){return"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!sn.test(e)||e.startsWith("url(")))},dr=function(){return{type:"spring",stiffness:500,damping:25,restDelta:.5,restSpeed:10}},pr=function(t){return{type:"spring",stiffness:550,damping:0===t?2*Math.sqrt(550):30,restDelta:.01,restSpeed:10}},mr=function(){return{type:"keyframes",ease:"linear",duration:.3}},gr=function(t){return{type:"keyframes",duration:.8,values:t}},vr={x:dr,y:dr,z:dr,rotate:dr,rotateX:dr,rotateY:dr,rotateZ:dr,scaleX:pr,scaleY:pr,scale:pr,opacity:mr,backgroundColor:mr,color:mr,default:pr},yr=new Set(["brightness","contrast","saturate","opacity"]);function wr(t){var e=t.slice(0,-1).split("("),n=e[0],r=e[1];if("drop-shadow"===n)return t;var i=(r.match(rt)||[])[0];if(!i)return t;var s=r.replace(i,""),o=yr.has(n)?1:0;return i!==r&&(o*=100),n+"("+o+s+")"}var br=/([a-z-]*)\(.*?\)/g,Er=tt(tt({},sn),{getAnimatableNone:function(t){var e=t.match(br);return e?e.map(wr).join(" "):t}}),Tr=s(s({},yt),{color:Qe,backgroundColor:Qe,outlineColor:Qe,fill:Qe,stroke:Qe,borderColor:Qe,borderTopColor:Qe,borderRightColor:Qe,borderBottomColor:Qe,borderLeftColor:Qe,filter:Er,WebkitFilter:Er}),_r=function(t){return Tr[t]};function xr(t,e){var n,r=_r(t);return r!==Er&&(r=sn),null===(n=r.getAnimatableNone)||void 0===n?void 0:n.call(r,e)}function Sr(t){var e=t.ease,n=t.times,r=t.yoyo,i=t.flip,a=t.loop,u=o(t,["ease","times","yoyo","flip","loop"]),c=s({},u);return n&&(c.offset=n),u.duration&&(c.duration=nr(u.duration)),u.repeatDelay&&(c.repeatDelay=nr(u.repeatDelay)),e&&(c.ease=function(t){return Array.isArray(t)&&"number"!=typeof t[0]}(e)?e.map(hr):hr(e)),"tween"===u.type&&(c.type="keyframes"),(r||a||i)&&(!0,r?c.repeatType="reverse":a?c.repeatType="loop":i&&(c.repeatType="mirror"),c.repeat=a||r||i||u.repeat),"spring"!==u.type&&(c.type="keyframes"),c}function Ar(t,e,n){var r,i,c,l;return Array.isArray(e.to)&&(null!==(r=t.duration)&&void 0!==r||(t.duration=.8)),function(t){Array.isArray(t.to)&&null===t.to[0]&&(t.to=u([],a(t.to)),t.to[0]=t.from)}(e),function(t){t.when,t.delay,t.delayChildren,t.staggerChildren,t.staggerDirection,t.repeat,t.repeatType,t.repeatDelay,t.from;var e=o(t,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(e).length}(t)||(t=s(s({},t),(i=n,c=e.to,l=zt(c)?gr:vr[i]||vr.default,s({to:c},l(c))))),s(s({},e),Sr(t))}function Ir(t,e,n,r,i){var o,a=Rr(r,t),u=null!==(o=a.from)&&void 0!==o?o:e.get(),c=fr(t,n);"none"===u&&c&&"string"==typeof n?u=xr(t,n):kr(u)&&"string"==typeof n?u=Cr(n):!Array.isArray(n)&&kr(n)&&"string"==typeof u&&(n=Cr(u));var l=fr(t,u);return l&&c&&!1!==a.type?function(){var r={from:u,to:n,velocity:e.getVelocity(),onComplete:i,onUpdate:function(t){return e.set(t)}};return"inertia"===a.type||"decay"===a.type?function(t){var e,n=t.from,r=void 0===n?0:n,i=t.velocity,s=void 0===i?0:i,o=t.min,a=t.max,u=t.power,c=void 0===u?.8:u,l=t.timeConstant,h=void 0===l?750:l,f=t.bounceStiffness,d=void 0===f?500:f,p=t.bounceDamping,m=void 0===p?10:p,g=t.restDelta,v=void 0===g?1:g,y=t.modifyTarget,w=t.driver,b=t.onUpdate,E=t.onComplete;function T(t){return void 0!==o&&t<o||void 0!==a&&t>a}function _(t){return void 0===o?a:void 0===a||Math.abs(o-t)<Math.abs(a-t)?o:a}function x(t){null==e||e.stop(),e=tr(Ae(Ae({},t),{driver:w,onUpdate:function(e){var n;null==b||b(e),null===(n=t.onUpdate)||void 0===n||n.call(t,e)},onComplete:E}))}function S(t){x(Ae({type:"spring",stiffness:d,damping:m,restDelta:v},t))}if(T(r))S({from:r,velocity:s,to:_(r)});else{var A=c*s+r;void 0!==y&&(A=y(A));var I,k,C=_(A),R=C===o?-1:1;x({type:"decay",from:r,velocity:s,timeConstant:h,power:c,restDelta:v,modifyTarget:y,onUpdate:T(A)?function(t){I=k,k=t,s=er(t-I,Yn().delta),(1===R&&t>C||-1===R&&t<C)&&S({from:t,to:C,velocity:s})}:void 0})}return{stop:function(){return null==e?void 0:e.stop()}}}(s(s({},r),a)):tr(s(s({},Ar(a,r,t)),{onUpdate:function(t){var e;r.onUpdate(t),null===(e=a.onUpdate)||void 0===e||e.call(a,t)},onComplete:function(){var t;r.onComplete(),null===(t=a.onComplete)||void 0===t||t.call(a)}}))}:function(){var t;return e.set(n),i(),null===(t=null==a?void 0:a.onComplete)||void 0===t||t.call(a),{stop:function(){}}}}function kr(t){return 0===t||"string"==typeof t&&0===parseFloat(t)&&-1===t.indexOf(" ")}function Cr(t){return"number"==typeof t?0:xr("",t)}function Rr(t,e){return t[e]||t.default||t}function Pr(t,e,n,r){return void 0===r&&(r={}),e.start((function(i){var s,o,a=Ir(t,e,n,r,i),u=function(t,e){var n;return null!==(n=(Rr(t,e)||{}).delay)&&void 0!==n?n:0}(r,t),c=function(){return o=a()};return u?s=setTimeout(c,nr(u)):c(),function(){clearTimeout(s),null==o||o.stop()}}))}function Dr(t,e){-1===t.indexOf(e)&&t.push(e)}function Nr(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Lr=function(){function t(){this.subscriptions=[]}return t.prototype.add=function(t){var e=this;return Dr(this.subscriptions,t),function(){return Nr(e.subscriptions,t)}},t.prototype.notify=function(t,e,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](t,e,n);else for(var i=0;i<r;i++){var s=this.subscriptions[i];s&&s(t,e,n)}},t.prototype.getSize=function(){return this.subscriptions.length},t.prototype.clear=function(){this.subscriptions.length=0},t}(),Or=function(){function t(t){var e,n=this;this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new Lr,this.velocityUpdateSubscribers=new Lr,this.renderSubscribers=new Lr,this.canTrackVelocity=!1,this.updateAndNotify=function(t,e){void 0===e&&(e=!0),n.prev=n.current,n.current=t;var r=Yn(),i=r.delta,s=r.timestamp;n.lastUpdated!==s&&(n.timeDelta=i,n.lastUpdated=s,Qn.postRender(n.scheduleVelocityCheck)),n.prev!==n.current&&n.updateSubscribers.notify(n.current),n.velocityUpdateSubscribers.getSize()&&n.velocityUpdateSubscribers.notify(n.getVelocity()),e&&n.renderSubscribers.notify(n.current)},this.scheduleVelocityCheck=function(){return Qn.postRender(n.velocityCheck)},this.velocityCheck=function(t){t.timestamp!==n.lastUpdated&&(n.prev=n.current,n.velocityUpdateSubscribers.notify(n.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(e=this.current,!isNaN(parseFloat(e)))}return t.prototype.onChange=function(t){return this.updateSubscribers.add(t)},t.prototype.clearListeners=function(){this.updateSubscribers.clear()},t.prototype.onRenderRequest=function(t){return t(this.get()),this.renderSubscribers.add(t)},t.prototype.attach=function(t){this.passiveEffect=t},t.prototype.set=function(t,e){void 0===e&&(e=!0),e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)},t.prototype.get=function(){return this.current},t.prototype.getPrevious=function(){return this.prev},t.prototype.getVelocity=function(){return this.canTrackVelocity?er(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},t.prototype.start=function(t){var e=this;return this.stop(),new Promise((function(n){e.hasAnimated=!0,e.stopAnimation=t(n)})).then((function(){return e.clearAnimation()}))},t.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},t.prototype.isAnimating=function(){return!!this.stopAnimation},t.prototype.clearAnimation=function(){this.stopAnimation=null},t.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},t}();function Mr(t){return new Or(t)}var Vr=function(t){return function(e){return e.test(t)}},Ur=[pt,lt,ct,ut,ft,ht,{test:function(t){return"auto"===t},parse:function(t){return t}}],Fr=function(t){return Ur.find(Vr(t))},Br=u(u([],a(Ur)),[Qe,sn]),qr=function(t){return Br.find(Vr(t))};function jr(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Mr(n))}function Hr(t,e){var n=D(t,e),r=n?t.makeTargetAnimatable(n,!1):{},i=r.transitionEnd,a=void 0===i?{}:i;r.transition;var u,c=o(r,["transitionEnd","transition"]);for(var l in c=s(s({},c),a)){jr(t,l,(u=c[l],zt(u)?u[u.length-1]||0:u))}}function zr(t,e){if(e)return(e[t]||e.default||e).from}function Kr(t,e,n){var r;void 0===n&&(n={});var i=D(t,e,n.custom),o=(i||{}).transition,u=void 0===o?t.getDefaultTransition()||{}:o;n.transitionOverride&&(u=n.transitionOverride);var c=i?function(){return Gr(t,i,n)}:function(){return Promise.resolve()},l=(null===(r=t.variantChildren)||void 0===r?void 0:r.size)?function(r){void 0===r&&(r=0);var i=u.delayChildren,o=void 0===i?0:i,a=u.staggerChildren,c=u.staggerDirection;return function(t,e,n,r,i,o){void 0===n&&(n=0);void 0===r&&(r=0);void 0===i&&(i=1);var a=[],u=(t.variantChildren.size-1)*r,c=1===i?function(t){return void 0===t&&(t=0),t*r}:function(t){return void 0===t&&(t=0),u-t*r};return Array.from(t.variantChildren).sort($r).forEach((function(t,r){a.push(Kr(t,e,s(s({},o),{delay:n+c(r)})).then((function(){return t.notifyAnimationComplete(e)})))})),Promise.all(a)}(t,e,o+r,a,c,n)}:function(){return Promise.resolve()},h=u.when;if(h){var f=a("beforeChildren"===h?[c,l]:[l,c],2),d=f[0],p=f[1];return d().then(p)}return Promise.all([c(),l(n.delay)])}function Gr(t,e,n){var r,i=void 0===n?{}:n,a=i.delay,u=void 0===a?0:a,c=i.transitionOverride,l=i.type,h=t.makeTargetAnimatable(e),f=h.transition,d=void 0===f?t.getDefaultTransition():f,p=h.transitionEnd,m=o(h,["transition","transitionEnd"]);c&&(d=c);var g=[],v=l&&(null===(r=t.animationState)||void 0===r?void 0:r.getState()[l]);for(var y in m){var w=t.getValue(y),b=m[y];if(!(!w||void 0===b||v&&Xr(v,y))){var E=Pr(y,w,b,s({delay:u},d));g.push(E)}}return Promise.all(g).then((function(){p&&Hr(t,p)}))}function $r(t,e){return t.sortNodePosition(e)}function Xr(t,e){var n=t.protectedKeys,r=t.needsAnimating,i=n.hasOwnProperty(e)&&!0!==r[e];return r[e]=!1,i}var Wr=[Yt.Animate,Yt.Hover,Yt.Tap,Yt.Drag,Yt.Focus,Yt.Exit],Yr=u([],a(Wr)).reverse(),Qr=Wr.length;function Jr(t){return function(e){return Promise.all(e.map((function(e){var n=e.animation,r=e.options;return function(t,e,n){var r;if(void 0===n&&(n={}),t.notifyAnimationStart(),Array.isArray(e)){var i=e.map((function(e){return Kr(t,e,n)}));r=Promise.all(i)}else if("string"==typeof e)r=Kr(t,e,n);else{var s="function"==typeof e?D(t,e,n.custom):e;r=Gr(t,s,n)}return r.then((function(){return t.notifyAnimationComplete(e)}))}(t,n,r)})))}}function Zr(t){var e,n=Jr(t),r=((e={})[Yt.Animate]=ti(!0),e[Yt.Hover]=ti(),e[Yt.Tap]=ti(),e[Yt.Drag]=ti(),e[Yt.Focus]=ti(),e[Yt.Exit]=ti(),e),i={},c=!0,l=function(e,n){var r=D(t,n);if(r){r.transition;var i=r.transitionEnd,a=o(r,["transition","transitionEnd"]);e=s(s(s({},e),a),i)}return e};function h(e,o){for(var h,f=t.getProps(),d=t.getVariantContext(!0)||{},p=[],m=new Set,g={},v=1/0,y=function(n){var i=Yr[n],y=r[i],w=null!==(h=f[i])&&void 0!==h?h:d[i],b=R(w),E=i===o?y.isActive:null;!1===E&&(v=n);var T=w===d[i]&&w!==f[i]&&b;if(T&&c&&t.manuallyAnimateOnMount&&(T=!1),y.protectedKeys=s({},g),!y.isActive&&null===E||!w&&!y.prevProp||Ht(w)||"boolean"==typeof w)return"continue";var _=function(t,e){if("string"==typeof e)return e!==t;if(C(e))return!Se(e,t);return!1}(y.prevProp,w)||i===o&&y.isActive&&!T&&b||n>v&&b,x=Array.isArray(w)?w:[w],S=x.reduce(l,{});!1===E&&(S={});var A=y.prevResolvedValues,I=void 0===A?{}:A,k=s(s({},I),S),P=function(t){_=!0,m.delete(t),y.needsAnimating[t]=!0};for(var D in k){var N=S[D],L=I[D];g.hasOwnProperty(D)||(N!==L?zt(N)&&zt(L)?Se(N,L)?y.protectedKeys[D]=!0:P(D):void 0!==N?P(D):m.add(D):void 0!==N&&m.has(D)?P(D):y.protectedKeys[D]=!0)}y.prevProp=w,y.prevResolvedValues=S,y.isActive&&(g=s(s({},g),S)),c&&t.blockInitialAnimation&&(_=!1),_&&!T&&p.push.apply(p,u([],a(x.map((function(t){return{animation:t,options:s({type:i},e)}})))))},w=0;w<Qr;w++)y(w);if(i=s({},g),m.size){var b={};m.forEach((function(e){var n=t.getBaseTarget(e);void 0!==n&&(b[e]=n)})),p.push({animation:b})}var E=Boolean(p.length);return c&&!1===f.initial&&!t.manuallyAnimateOnMount&&(E=!1),c=!1,E?n(p):Promise.resolve()}return{isAnimated:function(t){return void 0!==i[t]},animateChanges:h,setActive:function(e,n,i){var s;return r[e].isActive===n?Promise.resolve():(null===(s=t.variantChildren)||void 0===s||s.forEach((function(t){var r;return null===(r=t.animationState)||void 0===r?void 0:r.setActive(e,n)})),r[e].isActive=n,h(i,e))},setAnimateFunction:function(e){n=e(t)},getState:function(){return r}}}function ti(t){return void 0===t&&(t=!1),{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var ei={animation:_e((function(t){var e=t.visualElement,n=t.animate;e.animationState||(e.animationState=Zr(e)),Ht(n)&&(0,c.useEffect)((function(){return n.subscribe(e)}),[n])})),exit:_e((function(t){var e=t.custom,n=t.visualElement,r=a(w(),2),i=r[0],s=r[1],o=(0,c.useContext)(v);(0,c.useEffect)((function(){var t,r,a=null===(t=n.animationState)||void 0===t?void 0:t.setActive(Yt.Exit,!i,{custom:null!==(r=null==o?void 0:o.custom)&&void 0!==r?r:e});!i&&(null==a||a.then(s))}),[i])}))},ni=function(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")},ri=function(t){return ni(t)&&t.hasOwnProperty("z")},ii=function(t,e){return Math.abs(t-e)};function si(t,e){if(on(t)&&on(e))return ii(t,e);if(ni(t)&&ni(e)){var n=ii(t.x,e.x),r=ii(t.y,e.y),i=ri(t)&&ri(e)?ii(t.z,e.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2))}}var oi=function(){function t(t,e,n){var r=this,i=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var t=ci(r.lastMoveEventInfo,r.history),e=null!==r.startEvent,n=si(t.offset,{x:0,y:0})>=3;if(e||n){var i=t.point,o=Yn().timestamp;r.history.push(s(s({},i),{timestamp:o}));var a=r.handlers,u=a.onStart,c=a.onMove;e||(u&&u(r.lastMoveEvent,t),r.startEvent=r.lastMoveEvent),c&&c(r.lastMoveEvent,t)}}},this.handlePointerMove=function(t,e){r.lastMoveEvent=t,r.lastMoveEventInfo=ai(e,r.transformPagePoint),te(t)&&0===t.buttons?r.handlePointerUp(t,e):Qn.update(r.updatePoint,!0)},this.handlePointerUp=function(t,e){r.end();var n=r.handlers.onEnd;if(n&&r.startEvent){var i=ci(ai(e,r.transformPagePoint),r.history);n&&n(t,i)}},!(ee(t)&&t.touches.length>1)){this.handlers=e,this.transformPagePoint=i;var o=ai(se(t),this.transformPagePoint),a=o.point,u=Yn().timestamp;this.history=[s(s({},a),{timestamp:u})];var c=e.onSessionStart;c&&c(t,ci(o,this.history)),this.removeListeners=Te(he(window,"pointermove",this.handlePointerMove),he(window,"pointerup",this.handlePointerUp),he(window,"pointercancel",this.handlePointerUp))}}return t.prototype.updateHandlers=function(t){this.handlers=t},t.prototype.end=function(){this.removeListeners&&this.removeListeners(),Kn.update(this.updatePoint)},t}();function ai(t,e){return e?{point:e(t.point)}:t}function ui(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ci(t,e){var n=t.point;return{point:n,delta:ui(n,hi(e)),offset:ui(n,li(e)),velocity:fi(e,.1)}}function li(t){return t[0]}function hi(t){return t[t.length-1]}function fi(t,e){if(t.length<2)return{x:0,y:0};for(var n=t.length-1,r=null,i=hi(t);n>=0&&(r=t[n],!(i.timestamp-r.timestamp>nr(e)));)n--;if(!r)return{x:0,y:0};var s=(i.timestamp-r.timestamp)/1e3;if(0===s)return{x:0,y:0};var o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function di(t){return t}function pi(t){var e=t.top;return{x:{min:t.left,max:t.right},y:{min:e,max:t.bottom}}}var mi={translate:0,scale:1,origin:0,originPoint:0};function gi(){return{x:s({},mi),y:s({},mi)}}function vi(t){return[t("x"),t("y")]}function yi(t,e,n){var r=e.min,i=e.max;return void 0!==r&&t<r?t=n?Ue(r,t,n.min):Math.max(t,r):void 0!==i&&t>i&&(t=n?Ue(i,t,n.max):Math.min(t,i)),t}function wi(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function bi(t,e){var n,r=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&(r=(n=a([i,r],2))[0],i=n[1]),{min:t.min+r,max:t.min+i}}function Ei(t,e,n){return{min:Ti(t,e),max:Ti(t,n)}}function Ti(t,e){var n;return"number"==typeof t?t:null!==(n=t[e])&&void 0!==n?n:0}function _i(t,e){return pi(function(t,e){var n=t.top,r=t.left,i=t.bottom,s=t.right;void 0===e&&(e=di);var o=e({x:r,y:n}),a=e({x:s,y:i});return{top:o.y,left:o.x,bottom:a.y,right:a.x}}(t.getBoundingClientRect(),e))}function xi(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=.01),si(t,e)<n}function Si(t){return t.max-t.min}function Ai(t,e){var n=.5,r=Si(t),i=Si(e);return i>r?n=Ve(e.min,e.max-r,t.min):r>i&&(n=Ve(t.min,t.max-i,e.min)),ke(0,1,n)}function Ii(t,e,n,r){void 0===r&&(r=.5),t.origin=r,t.originPoint=Ue(e.min,e.max,t.origin),t.scale=Si(n)/Si(e),xi(t.scale,1,1e-4)&&(t.scale=1),t.translate=Ue(n.min,n.max,t.origin)-t.originPoint,xi(t.translate)&&(t.translate=0)}function ki(t,e,n,r){Ii(t.x,e.x,n.x,Ci(r.originX)),Ii(t.y,e.y,n.y,Ci(r.originY))}function Ci(t){return"number"==typeof t?t:.5}function Ri(t,e,n){t.min=n.min+e.min,t.max=t.min+Si(e)}var Pi=function(t,e){return t.depth-e.depth};function Di(t,e){Ni(t,(function(){Oi(function(t){var e=[],n=function(t){t.projection.isEnabled&&e.push(t),t.children.forEach(n)};return t.children.forEach(n),e.sort(Pi)}(t)),Li(t)})),!e&&t.rebaseProjectionTarget(!0,t.measureViewportBox(!1))}function Ni(t,e){var n=t.parent,r=t.projection.isEnabled;r&&t.resetTransform(),n?Ni(n,e):e(),r&&t.restoreTransform()}function Li(t){var e,n=t.getLayoutState();t.notifyBeforeLayoutMeasure(n.layout),n.isHydrated=!0,n.layout=t.measureViewportBox(),n.layoutCorrected=(e=n.layout,{x:s({},e.x),y:s({},e.y)}),t.notifyLayoutMeasure(n.layout,t.prevViewportBox||n.layout),Qn.update((function(){return t.rebaseProjectionTarget()}))}function Oi(t){t.forEach((function(t){return t.resetTransform()})),t.forEach(Li)}function Mi(t,e){return{min:e.min-t.min,max:e.max-t.min}}function Vi(t,e){return{x:Mi(t.x,e.x),y:Mi(t.y,e.y)}}function Ui(t,e){var n=t.getLayoutId(),r=e.getLayoutId();return n!==r||void 0===r&&t!==e}function Fi(t){var e=t.getProps(),n=e.drag,r=e._dragX;return n&&!r}function Bi(t,e){t.min=e.min,t.max=e.max}function qi(t,e,n){return n+e*(t-n)}function ji(t,e,n,r,i){return void 0!==i&&(t=qi(t,i,r)),qi(t,n,r)+e}function Hi(t,e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=1),t.min=ji(t.min,e,n,r,i),t.max=ji(t.max,e,n,r,i)}function zi(t,e){var n=e.x,r=e.y;Hi(t.x,n.translate,n.scale,n.originPoint),Hi(t.y,r.translate,r.scale,r.originPoint)}function Ki(t,e,n,r){var i=a(r,3),s=i[0],o=i[1],u=i[2];t.min=e.min,t.max=e.max;var c=void 0!==n[u]?n[u]:.5,l=Ue(e.min,e.max,c);Hi(t,n[s],n[o],l,n.scale)}var Gi=["x","scaleX","originX"],$i=["y","scaleY","originY"];function Xi(t,e,n){Ki(t.x,e.x,n,Gi),Ki(t.y,e.y,n,$i)}function Wi(t,e,n,r,i){return t=qi(t-=e,1/n,r),void 0!==i&&(t=qi(t,1/i,r)),t}function Yi(t,e,n){var r=a(n,3),i=r[0],s=r[1],o=r[2];!function(t,e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=.5);var s=Ue(t.min,t.max,r)-e;t.min=Wi(t.min,e,n,s,i),t.max=Wi(t.max,e,n,s,i)}(t,e[i],e[s],e[o],e.scale)}function Qi(t,e){Yi(t.x,e,Gi),Yi(t.y,e,$i)}var Ji,Zi=new WeakMap,ts=function(){function t(t){var e=t.visualElement;this.isDragging=!1,this.currentDirection=null,this.constraints=!1,this.elastic={x:{min:0,max:1},y:{min:0,max:1}},this.props={},this.hasMutatedConstraints=!1,this.cursorProgress={x:.5,y:.5},this.originPoint={},this.openGlobalLock=null,this.panSession=null,this.visualElement=e,this.visualElement.enableLayoutProjection(),Zi.set(e,this)}return t.prototype.start=function(t,e){var n=this,r=void 0===e?{}:e,i=r.snapToCursor,s=void 0!==i&&i,o=r.cursorProgress,a=this.props.transformPagePoint;this.panSession=new oi(t,{onSessionStart:function(e){n.stopMotion(),n.updateLayoutMeasurements(),s&&n.snapToCursor(t),n.isLayoutDrag()&&n.visualElement.lockProjectionTarget();var r=oe(e).point;vi((function(t){var e=n.visualElement.projection.target[t],i=e.min,s=e.max;n.cursorProgress[t]=o?o[t]:Ve(i,s,r[t]);var a=n.getAxisMotionValue(t);a&&(n.originPoint[t]=a.get())}))},onStart:function(t,e){var r,i,s,o=n.props,a=o.drag,u=o.dragPropagation;(!a||u||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=ge(a),n.openGlobalLock))&&(n.resolveDragConstraints(),n.isDragging=!0,n.currentDirection=null,null===(i=(r=n.props).onDragStart)||void 0===i||i.call(r,t,e),null===(s=n.visualElement.animationState)||void 0===s||s.setActive(Yt.Drag,!0))},onMove:function(t,e){var r,i,s,o,a=n.props,u=a.dragPropagation,c=a.dragDirectionLock;if(u||n.openGlobalLock){var l=e.offset;if(c&&null===n.currentDirection)return n.currentDirection=function(t,e){void 0===e&&(e=10);var n=null;Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x");return n}(l),void(null!==n.currentDirection&&(null===(i=(r=n.props).onDirectionLock)||void 0===i||i.call(r,n.currentDirection)));n.updateAxis("x",t,l),n.updateAxis("y",t,l),null===(o=(s=n.props).onDrag)||void 0===o||o.call(s,t,e),Ji=t}},onEnd:function(t,e){return n.stop(t,e)}},{transformPagePoint:a})},t.prototype.updateLayoutMeasurements=function(){Di(this.visualElement,Boolean(this.getAxisMotionValue("x")&&!this.isExternalDrag()))},t.prototype.resolveDragConstraints=function(){var t=this,e=this.props,n=e.dragConstraints,r=e.dragElastic;this.visualElement.updateLayoutProjection();var i=this.visualElement.getLayoutState().layoutCorrected;this.constraints=!!n&&(k(n)?this.resolveRefConstraints(i,n):function(t,e){var n=e.top,r=e.left,i=e.bottom,s=e.right;return{x:wi(t.x,r,s),y:wi(t.y,n,i)}}(i,n)),this.elastic=function(t){return!1===t?t=0:!0===t&&(t=.35),{x:Ei(t,"left","right"),y:Ei(t,"top","bottom")}}(r),this.constraints&&!this.hasMutatedConstraints&&vi((function(e){t.getAxisMotionValue(e)&&(t.constraints[e]=function(t,e){var n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(i[e],t.constraints[e]))}))},t.prototype.resolveRefConstraints=function(t,e){var n=this.props,r=n.onMeasureDragConstraints,i=n.transformPagePoint,s=e.current;this.constraintsBox=_i(s,i);var o=function(t,e){return{x:bi(t.x,e.x),y:bi(t.y,e.y)}}(t,this.constraintsBox);if(r){var a=r(function(t){var e=t.x,n=t.y;return{top:n.min,bottom:n.max,left:e.min,right:e.max}}(o));this.hasMutatedConstraints=!!a,a&&(o=pi(a))}return o},t.prototype.cancelDrag=function(){var t;this.isDragging=!1,this.panSession&&this.panSession.end(),this.panSession=null,!this.props.dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(Yt.Drag,!1)},t.prototype.stop=function(t,e){var n,r,i;this.visualElement.unlockProjectionTarget(),null===(n=this.panSession)||void 0===n||n.end(),this.panSession=null;var s=this.isDragging;if(this.cancelDrag(),s){var o=e.velocity;this.animateDragEnd(o),null===(i=(r=this.props).onDragEnd)||void 0===i||i.call(r,t,e)}},t.prototype.snapToCursor=function(t){var e=this;vi((function(n){if(es(n,e.props.drag,e.currentDirection)){var r=e.getAxisMotionValue(n);if(r){var i=oe(t).point,s=e.visualElement.getLayoutState().layout,o=s[n].max-s[n].min,a=s[n].min+o/2,u=i[n]-a;e.originPoint[n]=i[n],r.set(u)}else e.cursorProgress[n]=.5,e.updateVisualElementAxis(n,t)}}))},t.prototype.updateAxis=function(t,e,n){if(es(t,this.props.drag,this.currentDirection))return this.getAxisMotionValue(t)?this.updateAxisMotionValue(t,n):this.updateVisualElementAxis(t,e)},t.prototype.updateAxisMotionValue=function(t,e){var n=this.getAxisMotionValue(t);if(e&&n){var r=this.originPoint[t]+e[t],i=this.constraints?yi(r,this.constraints[t],this.elastic[t]):r;n.set(i)}},t.prototype.updateVisualElementAxis=function(t,e){var n,r=this.visualElement.getLayoutState().layout[t],i=r.max-r.min,s=this.cursorProgress[t],o=function(t,e,n,r,i){var s=t-e*n;return r?yi(s,r,i):s}(oe(e).point[t],i,s,null===(n=this.constraints)||void 0===n?void 0:n[t],this.elastic[t]);this.visualElement.setProjectionTargetAxis(t,o,o+i)},t.prototype.setProps=function(t){var e=t.drag,n=void 0!==e&&e,r=t.dragDirectionLock,i=void 0!==r&&r,a=t.dragPropagation,u=void 0!==a&&a,c=t.dragConstraints,l=void 0!==c&&c,h=t.dragElastic,f=void 0===h?.35:h,d=t.dragMomentum,p=void 0===d||d,m=o(t,["drag","dragDirectionLock","dragPropagation","dragConstraints","dragElastic","dragMomentum"]);this.props=s({drag:n,dragDirectionLock:i,dragPropagation:u,dragConstraints:l,dragElastic:f,dragMomentum:p},m)},t.prototype.getAxisMotionValue=function(t){var e=this.props,n=e.layout,r=e.layoutId,i="_drag"+t.toUpperCase();return this.props[i]?this.props[i]:n||void 0!==r?void 0:this.visualElement.getValue(t,0)},t.prototype.isLayoutDrag=function(){return!this.getAxisMotionValue("x")},t.prototype.isExternalDrag=function(){var t=this.props,e=t._dragX,n=t._dragY;return e||n},t.prototype.animateDragEnd=function(t){var e=this,n=this.props,r=n.drag,i=n.dragMomentum,o=n.dragElastic,a=n.dragTransition,u=function(t,e){void 0===e&&(e=!0);var n,r=t.getProjectionParent();return!!r&&(e?Qi(n=Vi(r.projection.target,t.projection.target),r.getLatestValues()):n=Vi(r.getLayoutState().layout,t.getLayoutState().layout),vi((function(e){return t.setProjectionTargetAxis(e,n[e].min,n[e].max,!0)})),!0)}(this.visualElement,this.isLayoutDrag()&&!this.isExternalDrag()),c=this.constraints||{};if(u&&Object.keys(c).length&&this.isLayoutDrag()){var l=this.visualElement.getProjectionParent();if(l){var h=Vi(l.projection.targetFinal,c);vi((function(t){var e=h[t],n=e.min,r=e.max;c[t]={min:isNaN(n)?void 0:n,max:isNaN(r)?void 0:r}}))}}var f=vi((function(n){var l;if(es(n,r,e.currentDirection)){var h=null!==(l=null==c?void 0:c[n])&&void 0!==l?l:{},f=o?200:1e6,d=o?40:1e7,p=s(s({type:"inertia",velocity:i?t[n]:0,bounceStiffness:f,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},a),h);return e.getAxisMotionValue(n)?e.startAxisValueAnimation(n,p):e.visualElement.startLayoutAnimation(n,p,u)}}));return Promise.all(f).then((function(){var t,n;null===(n=(t=e.props).onDragTransitionEnd)||void 0===n||n.call(t)}))},t.prototype.stopMotion=function(){var t=this;vi((function(e){var n=t.getAxisMotionValue(e);n?n.stop():t.visualElement.stopLayoutAnimation()}))},t.prototype.startAxisValueAnimation=function(t,e){var n=this.getAxisMotionValue(t);if(n){var r=n.get();return n.set(r),n.set(r),Pr(t,n,0,e)}},t.prototype.scalePoint=function(){var t=this,e=this.props,n=e.drag;if(k(e.dragConstraints)&&this.constraintsBox){this.stopMotion();var r={x:0,y:0};vi((function(e){r[e]=Ai(t.visualElement.projection.target[e],t.constraintsBox[e])})),this.updateLayoutMeasurements(),this.resolveDragConstraints(),vi((function(e){if(es(e,n,null)){var i=function(t,e,n){var r=t.max-t.min,i=Ue(e.min,e.max-r,n);return{min:i,max:i+r}}(t.visualElement.projection.target[e],t.constraintsBox[e],r[e]),s=i.min,o=i.max;t.visualElement.setProjectionTargetAxis(e,s,o)}}))}},t.prototype.mount=function(t){var e=this,n=he(t.getInstance(),"pointerdown",(function(t){var n=e.props,r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&e.start(t)})),r=Jt(window,"resize",(function(){e.scalePoint()})),i=t.onLayoutUpdate((function(){e.isDragging&&e.resolveDragConstraints()})),s=t.prevDragCursor;return s&&this.start(Ji,{cursorProgress:s}),function(){null==n||n(),null==r||r(),null==i||i(),e.cancelDrag()}},t}();function es(t,e,n){return!(!0!==e&&e!==t||null!==n&&n!==t)}var ns,rs,is={pan:_e((function(t){var e=t.onPan,n=t.onPanStart,r=t.onPanEnd,i=t.onPanSessionStart,s=t.visualElement,o=e||n||r||i,a=(0,c.useRef)(null),u=(0,c.useContext)(m).transformPagePoint,l={onSessionStart:i,onStart:n,onMove:e,onEnd:function(t,e){a.current=null,r&&r(t,e)}};(0,c.useEffect)((function(){null!==a.current&&a.current.updateHandlers(l)})),fe(s,"pointerdown",o&&function(t){a.current=new oi(t,l,{transformPagePoint:u})}),be((function(){return a.current&&a.current.end()}))})),drag:_e((function(t){var e=t.dragControls,n=t.visualElement,r=(0,c.useContext)(m).transformPagePoint,i=y((function(){return new ts({visualElement:n})}));i.setProps(s(s({},t),{transformPagePoint:r})),(0,c.useEffect)((function(){return e&&e.subscribe(i)}),[i]),(0,c.useEffect)((function(){return i.mount(n)}),[])}))};function ss(t){return"string"==typeof t&&t.startsWith("var(--")}!function(t){t[t.Entering=0]="Entering",t[t.Present=1]="Present",t[t.Exiting=2]="Exiting"}(ns||(ns={})),function(t){t[t.Hide=0]="Hide",t[t.Show=1]="Show"}(rs||(rs={}));var os=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function as(t,e,n){void 0===n&&(n=1);var r=a(function(t){var e=os.exec(t);if(!e)return[,];var n=a(e,3);return[n[1],n[2]]}(t),2),i=r[0],s=r[1];if(i){var o=window.getComputedStyle(e).getPropertyValue(i);return o?o.trim():ss(s)?as(s,e,n+1):s}}function us(t,e){return t/(e.max-e.min)*100}var cs="_$css";var ls={process:function(t,e,n){var r=n.target;if("string"==typeof t){if(!lt.test(t))return t;t=parseFloat(t)}return us(t,r.x)+"% "+us(t,r.y)+"%"}},hs={borderRadius:s(s({},ls),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:ls,borderTopRightRadius:ls,borderBottomLeftRadius:ls,borderBottomRightRadius:ls,boxShadow:{process:function(t,e){var n=e.delta,r=e.treeScale,i=t,s=t.includes("var("),o=[];s&&(t=t.replace(os,(function(t){return o.push(t),cs})));var a=sn.parse(t);if(a.length>5)return i;var u=sn.createTransformer(t),c="number"!=typeof a[0]?1:0,l=n.x.scale*r.x,h=n.y.scale*r.y;a[0+c]/=l,a[1+c]/=h;var f=Ue(l,h,.5);"number"==typeof a[2+c]&&(a[2+c]/=f),"number"==typeof a[3+c]&&(a[3+c]/=f);var d=u(a);if(s){var p=0;d=d.replace(cs,(function(){var t=o[p];return p++,t}))}return d}}},fs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameTarget={x:{min:0,max:1},y:{min:0,max:1}},e.currentAnimationTarget={x:{min:0,max:1},y:{min:0,max:1}},e.isAnimating={x:!1,y:!1},e.stopAxisAnimation={x:void 0,y:void 0},e.isAnimatingTree=!1,e.animate=function(t,n,r){void 0===r&&(r={});var i=r.originBox,a=r.targetBox,u=r.visibilityAction,c=r.shouldStackAnimate,l=r.onComplete,h=r.prevParent,f=o(r,["originBox","targetBox","visibilityAction","shouldStackAnimate","onComplete","prevParent"]),d=e.props,p=d.visualElement,m=d.layout;if(!1===c)return e.isAnimatingTree=!1,e.safeToRemove();if(!e.isAnimatingTree||!0===c){c&&(e.isAnimatingTree=!0),n=i||n,t=a||t;var g=!1,v=p.getProjectionParent();if(v){var y=v.prevViewportBox,w=v.getLayoutState().layout;h&&(a&&(w=h.getLayoutState().layout),i&&!Ui(h,v)&&h.prevViewportBox&&(y=h.prevViewportBox)),y&&ys(h,i,a)&&(g=!0,n=Vi(y,n),t=Vi(w,t))}var b=ds(n,t),E=vi((function(r){var i,o;if("position"===m){var a=t[r].max-t[r].min;n[r].max=n[r].min+a}if(!p.projection.isTargetLocked)return void 0===u?b?e.animateAxis(r,t[r],n[r],s(s({},f),{isRelative:g})):(null===(o=(i=e.stopAxisAnimation)[r])||void 0===o||o.call(i),p.setProjectionTargetAxis(r,t[r].min,t[r].max,g)):void p.setVisibility(u===rs.Show)}));return p.syncRender(),Promise.all(E).then((function(){e.isAnimatingTree=!1,l&&l(),p.notifyLayoutAnimationComplete()}))}},e}return i(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props.visualElement;e.animateMotionValue=Pr,e.enableLayoutProjection(),this.unsubLayoutReady=e.onLayoutUpdate(this.animate),e.layoutSafeToRemove=function(){return t.safeToRemove()},function(t){for(var e in t)q[e]=t[e]}(hs)},e.prototype.componentWillUnmount=function(){var t=this;this.unsubLayoutReady(),vi((function(e){var n,r;return null===(r=(n=t.stopAxisAnimation)[e])||void 0===r?void 0:r.call(n)}))},e.prototype.animateAxis=function(t,e,n,r){var i,s,o=this,a=void 0===r?{}:r,u=a.transition,c=a.isRelative;if(!this.isAnimating[t]||!gs(e,this.currentAnimationTarget[t])){null===(s=(i=this.stopAxisAnimation)[t])||void 0===s||s.call(i),this.isAnimating[t]=!0;var l=this.props.visualElement,h=this.frameTarget[t],f=l.getProjectionAnimationProgress()[t];f.clearListeners(),f.set(0),f.set(0);var d=function(){var r=f.get()/1e3;!function(t,e,n,r){t.min=Ue(e.min,n.min,r),t.max=Ue(e.max,n.max,r)}(h,n,e,r),l.setProjectionTargetAxis(t,h.min,h.max,c)};d();var p=f.onChange(d);this.stopAxisAnimation[t]=function(){o.isAnimating[t]=!1,f.stop(),p()},this.currentAnimationTarget[t]=e;var m=u||l.getDefaultTransition()||vs;return Pr("x"===t?"layoutX":"layoutY",f,1e3,m&&Rr(m,"layout")).then(this.stopAxisAnimation[t])}},e.prototype.safeToRemove=function(){var t,e;null===(e=(t=this.props).safeToRemove)||void 0===e||e.call(t)},e.prototype.render=function(){return null},e}(c.Component);function ds(t,e){return!(ms(t)||ms(e)||gs(t.x,e.x)&&gs(t.y,e.y))}var ps={min:0,max:0};function ms(t){return gs(t.x,ps)&&gs(t.y,ps)}function gs(t,e){return t.min===e.min&&t.max===e.max}var vs={duration:.45,ease:[.4,0,.1,1]};function ys(t,e,n){return t||!t&&!(e||n)}var ws={layoutReady:function(t){return t.notifyLayoutReady()}};function bs(){var t=new Set;return{add:function(e){return t.add(e)},flush:function(e){var n=void 0===e?ws:e,r=n.layoutReady,i=n.parent,s=Array.from(t).sort(Pi);i?Ni(i,(function(){Oi(s)})):Oi(s),s.forEach(r),s.forEach((function(t){t.isPresent&&(t.presence=ns.Present)})),Gn.preRender(),Gn.render(),Qn.postRender((function(){return s.forEach(Es)})),t.clear()}}}function Es(t){t.prevViewportBox=t.projection.target}var Ts=(0,c.createContext)(bs()),_s=(0,c.createContext)(bs());function xs(t){return!!t.forceUpdate}var Ss=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){var t=this.props,e=t.syncLayout,n=t.framerSyncLayout,r=t.visualElement;xs(e)&&e.register(r),xs(n)&&n.register(r),r.onUnmount((function(){xs(e)&&e.remove(r),xs(n)&&n.remove(r)}))},e.prototype.getSnapshotBeforeUpdate=function(){var t=this.props,e=t.syncLayout,n=t.visualElement;return xs(e)?e.syncUpdate():(!function(t){t.prevViewportBox=t.measureViewportBox(!1),t.rebaseProjectionTarget(!1,t.prevViewportBox)}(n),e.add(n)),null},e.prototype.componentDidUpdate=function(){var t=this.props.syncLayout;xs(t)||t.flush()},e.prototype.render=function(){return null},e}(c.Component);var As={measureLayout:function(t){var e=(0,c.useContext)(Ts),n=(0,c.useContext)(_s);return c.createElement(Ss,s({},t,{syncLayout:e,framerSyncLayout:n}))},layoutAnimation:function(t){var e=a(w(),2)[1];return c.createElement(fs,s({},t,{safeToRemove:e}))}};function Is(){return{isHydrated:!1,layout:{x:{min:0,max:1},y:{min:0,max:1}},layoutCorrected:{x:{min:0,max:1},y:{min:0,max:1}},treeScale:{x:1,y:1},delta:gi(),deltaFinal:gi(),deltaTransform:""}}var ks=Is();function Cs(t,e,n){var r=t.x,i=t.y,s="translate3d("+r.translate/e.x+"px, "+i.translate/e.y+"px, 0) ";if(n){var o=n.rotate,a=n.rotateX,u=n.rotateY;o&&(s+="rotate("+o+") "),a&&(s+="rotateX("+a+") "),u&&(s+="rotateY("+u+") ")}return s+="scale("+r.scale+", "+i.scale+")",n||s!==Ps?s:""}function Rs(t){var e=t.deltaFinal;return 100*e.x.origin+"% "+100*e.y.origin+"% 0"}var Ps=Cs(ks.delta,ks.treeScale,{x:1,y:1}),Ds=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","SetAxisTarget","Unmount"];function Ns(t,e,n,r){var i,s,o=t.delta,a=t.layout,u=t.layoutCorrected,c=t.treeScale,l=e.target;s=a,Bi((i=u).x,s.x),Bi(i.y,s.y),function(t,e,n){var r=n.length;if(r){var i,s;e.x=e.y=1;for(var o=0;o<r;o++)s=(i=n[o]).getLayoutState().delta,e.x*=s.x.scale,e.y*=s.y.scale,zi(t,s),Fi(i)&&Xi(t,t,i.getLatestValues())}}(u,c,n),ki(o,u,l,r)}var Ls=function(){function t(){this.children=[],this.isDirty=!1}return t.prototype.add=function(t){Dr(this.children,t),this.isDirty=!0},t.prototype.remove=function(t){Nr(this.children,t),this.isDirty=!0},t.prototype.forEach=function(t){this.isDirty&&this.children.sort(Pi),this.isDirty=!1,this.children.forEach(t)},t}();var Os=function(t){var e=t.treeType,n=void 0===e?"":e,r=t.build,i=t.getBaseTarget,o=t.makeTargetAnimatable,c=t.measureViewportBox,l=t.render,h=t.readValueFromInstance,f=t.resetTransform,d=t.restoreTransform,p=t.removeValueFromRenderState,m=t.sortNodePosition,g=t.scrapeMotionValuesFromProps;return function(t,e){var v=t.parent,y=t.props,w=t.presenceId,b=t.blockInitialAnimation,E=t.visualState;void 0===e&&(e={});var T,_,x,S,A,I,k=E.latestValues,C=E.renderState,P=function(){var t=Ds.map((function(){return new Lr})),e={},n={clearAllListeners:function(){return t.forEach((function(t){return t.clear()}))},updatePropListeners:function(t){return Ds.forEach((function(r){var i;null===(i=e[r])||void 0===i||i.call(e);var s="on"+r,o=t[s];o&&(e[r]=n[s](o))}))}};return t.forEach((function(t,e){n["on"+Ds[e]]=function(e){return t.add(e)},n["notify"+Ds[e]]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.notify.apply(t,u([],a(e)))}})),n}(),D={isEnabled:!1,isTargetLocked:!1,target:{x:{min:0,max:1},y:{min:0,max:1}},targetFinal:{x:{min:0,max:1},y:{min:0,max:1}}},O=D,M=k,V=Is(),U=!1,F=new Map,B=new Map,q={},j=s({},k);function H(){T&&(Z.isProjectionReady()&&(Xi(O.targetFinal,O.target,M),ki(V.deltaFinal,V.layoutCorrected,O.targetFinal,k)),z(),l(T,C))}function z(){var t=k;if(S&&S.isActive()){var n=S.getCrossfadeState(Z);n&&(t=n)}r(Z,C,t,O,V,e,y)}function K(){P.notifyUpdate(k)}function G(){Z.layoutTree.forEach(Vs)}var $=g(y);for(var X in $){var W=$[X];void 0!==k[X]&&Y(W)&&W.set(k[X],!1)}var Q=N(y),J=L(y),Z=s(s({treeType:n,current:null,depth:v?v.depth+1:0,parent:v,children:new Set,path:v?u(u([],a(v.path)),[v]):[],layoutTree:v?v.layoutTree:new Ls,presenceId:w,projection:D,variantChildren:J?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null==v?void 0:v.isMounted()),blockInitialAnimation:b,isHoverEventsEnabled:!0,isMounted:function(){return Boolean(T)},mount:function(t){T=Z.current=t,Z.pointTo(Z),J&&v&&!Q&&(I=null==v?void 0:v.addVariantChild(Z)),null==v||v.children.add(Z)},unmount:function(){Kn.update(K),Kn.render(H),Kn.preRender(Z.updateLayoutProjection),B.forEach((function(t){return t()})),Z.stopLayoutAnimation(),Z.layoutTree.remove(Z),null==I||I(),null==v||v.children.delete(Z),null==x||x(),P.clearAllListeners()},addVariantChild:function(t){var e,n=Z.getClosestVariantNode();if(n)return null===(e=n.variantChildren)||void 0===e||e.add(t),function(){return n.variantChildren.delete(t)}},sortNodePosition:function(t){return m&&n===t.treeType?m(Z.getInstance(),t.getInstance()):0},getClosestVariantNode:function(){return J?Z:null==v?void 0:v.getClosestVariantNode()},scheduleUpdateLayoutProjection:v?v.scheduleUpdateLayoutProjection:function(){return Qn.preRender(Z.updateTreeLayoutProjection,!1,!0)},getLayoutId:function(){return y.layoutId},getInstance:function(){return T},getStaticValue:function(t){return k[t]},setStaticValue:function(t,e){return k[t]=e},getLatestValues:function(){return k},setVisibility:function(t){Z.isVisible!==t&&(Z.isVisible=t,Z.scheduleRender())},makeTargetAnimatable:function(t,e){return void 0===e&&(e=!0),o(Z,t,y,e)},suspendHoverEvents:function(){Z.isHoverEventsEnabled=!1,Qn.postRender((function(){return setTimeout((function(){return Z.isHoverEventsEnabled=!0}),10)}))},addValue:function(t,e){Z.hasValue(t)&&Z.removeValue(t),F.set(t,e),k[t]=e.get(),function(t,e){var n=e.onChange((function(e){k[t]=e,y.onUpdate&&Qn.update(K,!1,!0)})),r=e.onRenderRequest(Z.scheduleRender);B.set(t,(function(){n(),r()}))}(t,e)},removeValue:function(t){var e;F.delete(t),null===(e=B.get(t))||void 0===e||e(),B.delete(t),delete k[t],p(t,C)},hasValue:function(t){return F.has(t)},getValue:function(t,e){var n=F.get(t);return void 0===n&&void 0!==e&&(n=Mr(e),Z.addValue(t,n)),n},forEachValue:function(t){return F.forEach(t)},readValue:function(t){var n;return null!==(n=k[t])&&void 0!==n?n:h(T,t,e)},setBaseTarget:function(t,e){j[t]=e},getBaseTarget:function(t){if(i){var e=i(y,t);if(void 0!==e&&!Y(e))return e}return j[t]}},P),{build:function(){return z(),C},scheduleRender:function(){Qn.render(H,!1,!0)},syncRender:H,setProps:function(t){y=t,P.updatePropListeners(t),q=function(t,e,n){var r;for(var i in e){var s=e[i],o=n[i];if(Y(s))t.addValue(i,s);else if(Y(o))t.addValue(i,Mr(s));else if(o!==s)if(t.hasValue(i)){var a=t.getValue(i);!a.hasAnimated&&a.set(s)}else t.addValue(i,Mr(null!==(r=t.getStaticValue(i))&&void 0!==r?r:s))}for(var i in n)void 0===e[i]&&t.removeValue(i);return e}(Z,g(y),q)},getProps:function(){return y},getVariant:function(t){var e;return null===(e=y.variants)||void 0===e?void 0:e[t]},getDefaultTransition:function(){return y.transition},getVariantContext:function(t){if(void 0===t&&(t=!1),t)return null==v?void 0:v.getVariantContext();if(!Q){var e=(null==v?void 0:v.getVariantContext())||{};return void 0!==y.initial&&(e.initial=y.initial),e}for(var n={},r=0;r<Bs;r++){var i=Fs[r],s=y[i];(R(s)||!1===s)&&(n[i]=s)}return n},enableLayoutProjection:function(){D.isEnabled=!0,Z.layoutTree.add(Z)},lockProjectionTarget:function(){D.isTargetLocked=!0},unlockProjectionTarget:function(){Z.stopLayoutAnimation(),D.isTargetLocked=!1},getLayoutState:function(){return V},setCrossfader:function(t){S=t},isProjectionReady:function(){return D.isEnabled&&V.isHydrated},startLayoutAnimation:function(t,e,n){void 0===n&&(n=!1);var r=Z.getProjectionAnimationProgress()[t],i=n?D.relativeTarget[t]:D.target[t],s=i.min,o=i.max-s;return r.clearListeners(),r.set(s),r.set(s),r.onChange((function(e){Z.setProjectionTargetAxis(t,e,e+o,n)})),Z.animateMotionValue(t,r,0,e)},stopLayoutAnimation:function(){vi((function(t){return Z.getProjectionAnimationProgress()[t].stop()}))},measureViewportBox:function(t){void 0===t&&(t=!0);var n=c(T,e);return t||Qi(n,k),n},getProjectionAnimationProgress:function(){return A||(A={x:Mr(0),y:Mr(0)}),A},setProjectionTargetAxis:function(t,e,n,r){var i;void 0===r&&(r=!1),r?(D.relativeTarget||(D.relativeTarget={x:{min:0,max:1},y:{min:0,max:1}}),i=D.relativeTarget[t]):(D.relativeTarget=void 0,i=D.target[t]),i.min=e,i.max=n,U=!0,P.notifySetAxisTarget()},rebaseProjectionTarget:function(t,e){void 0===e&&(e=V.layout);var n=Z.getProjectionAnimationProgress(),r=n.x,i=n.y,s=!(D.relativeTarget||D.isTargetLocked||r.isAnimating()||i.isAnimating());(t||s)&&vi((function(t){var n=e[t],r=n.min,i=n.max;Z.setProjectionTargetAxis(t,r,i)}))},notifyLayoutReady:function(t){!function(t){var e=t.getProjectionParent();if(e){var n=Vi(e.getLayoutState().layout,t.getLayoutState().layout);vi((function(e){t.setProjectionTargetAxis(e,n[e].min,n[e].max,!0)}))}else t.rebaseProjectionTarget()}(Z),Z.notifyLayoutUpdate(V.layout,Z.prevViewportBox||V.layout,t)},resetTransform:function(){return f(Z,T,y)},restoreTransform:function(){return d(T,C)},updateLayoutProjection:function(){var t=V.delta,e=V.treeScale,n=e.x,r=e.x,i=V.deltaTransform;Ns(V,O,Z.path,k),U&&Z.notifyViewportBoxUpdate(O.target,t),U=!1;var s=Cs(t,e);s===i&&n===e.x&&r===e.y||Z.scheduleRender(),V.deltaTransform=s},updateTreeLayoutProjection:function(){Z.layoutTree.forEach(Ms),Qn.preRender(G,!1,!0)},getProjectionParent:function(){if(void 0===_){for(var t=!1,e=Z.path.length-1;e>=0;e--){var n=Z.path[e];if(n.projection.isEnabled){t=n;break}}_=t}return _},resolveRelativeTargetBox:function(){var t=Z.getProjectionParent();if(D.relativeTarget&&t&&(function(t,e){Ri(t.target.x,t.relativeTarget.x,e.target.x),Ri(t.target.y,t.relativeTarget.y,e.target.y)}(D,t.projection),Fi(t))){var e=D.target;Xi(e,e,t.getLatestValues())}},pointTo:function(t){O=t.projection,M=t.getLatestValues(),null==x||x(),x=Te(t.onSetAxisTarget(Z.scheduleUpdateLayoutProjection),t.onLayoutAnimationComplete((function(){var t;Z.isPresent?Z.presence=ns.Present:null===(t=Z.layoutSafeToRemove)||void 0===t||t.call(Z)})))},isPresent:!0,presence:ns.Entering});return Z}};function Ms(t){t.resolveRelativeTargetBox()}function Vs(t){t.updateLayoutProjection()}var Us,Fs=u(["initial"],a(Wr)),Bs=Fs.length,qs=new Set(["width","height","top","left","right","bottom","x","y"]),js=function(t){return qs.has(t)},Hs=function(t,e){t.set(e,!1),t.set(e)},zs=function(t){return t===pt||t===lt};!function(t){t.width="width",t.height="height",t.left="left",t.right="right",t.top="top",t.bottom="bottom"}(Us||(Us={}));var Ks=function(t,e){return parseFloat(t.split(", ")[e])},Gs=function(t,e){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var s=i.match(/^matrix3d\((.+)\)$/);if(s)return Ks(s[1],e);var o=i.match(/^matrix\((.+)\)$/);return o?Ks(o[1],t):0}},$s=new Set(["x","y","z"]),Xs=H.filter((function(t){return!$s.has(t)}));var Ws={width:function(t){var e=t.x;return e.max-e.min},height:function(t){var e=t.y;return e.max-e.min},top:function(t,e){var n=e.top;return parseFloat(n)},left:function(t,e){var n=e.left;return parseFloat(n)},bottom:function(t,e){var n=t.y,r=e.top;return parseFloat(r)+(n.max-n.min)},right:function(t,e){var n=t.x,r=e.left;return parseFloat(r)+(n.max-n.min)},x:Gs(4,13),y:Gs(5,14)},Ys=function(t,e,n,r){void 0===n&&(n={}),void 0===r&&(r={}),e=s({},e),r=s({},r);var i=Object.keys(e).filter(js),o=[],u=!1,c=[];if(i.forEach((function(i){var s=t.getValue(i);if(t.hasValue(i)){var a,l=n[i],h=e[i],f=Fr(l);if(zt(h))for(var d=h.length,p=null===h[0]?1:0;p<d;p++)a?Fr(h[p]):(a=Fr(h[p]))===f||zs(f)&&zs(a);else a=Fr(h);if(f!==a)if(zs(f)&&zs(a)){var m=s.get();"string"==typeof m&&s.set(parseFloat(m)),"string"==typeof h?e[i]=parseFloat(h):Array.isArray(h)&&a===lt&&(e[i]=h.map(parseFloat))}else(null==f?void 0:f.transform)&&(null==a?void 0:a.transform)&&(0===l||0===h)?0===l?s.set(a.transform(l)):e[i]=f.transform(h):(u||(o=function(t){var e=[];return Xs.forEach((function(n){var r=t.getValue(n);void 0!==r&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),e.length&&t.syncRender(),e}(t),u=!0),c.push(i),r[i]=void 0!==r[i]?r[i]:e[i],Hs(s,h))}})),c.length){var l=function(t,e,n){var r=e.measureViewportBox(),i=e.getInstance(),s=getComputedStyle(i),o=s.display,a={top:s.top,left:s.left,bottom:s.bottom,right:s.right,transform:s.transform};"none"===o&&e.setStaticValue("display",t.display||"block"),e.syncRender();var u=e.measureViewportBox();return n.forEach((function(n){var i=e.getValue(n);Hs(i,Ws[n](r,a)),t[n]=Ws[n](u,s)})),t}(e,t,c);return o.length&&o.forEach((function(e){var n=a(e,2),r=n[0],i=n[1];t.getValue(r).set(i)})),t.syncRender(),{target:l,transitionEnd:r}}return{target:e,transitionEnd:r}};function Qs(t,e,n,r){return function(t){return Object.keys(t).some(js)}(e)?Ys(t,e,n,r):{target:e,transitionEnd:r}}var Js=function(t,e,n,r){var i=function(t,e,n){var r,i=o(e,[]),a=t.getInstance();if(!(a instanceof HTMLElement))return{target:i,transitionEnd:n};for(var u in n&&(n=s({},n)),t.forEachValue((function(t){var e=t.get();if(ss(e)){var n=as(e,a);n&&t.set(n)}})),i){var c=i[u];if(ss(c)){var l=as(c,a);l&&(i[u]=l,n&&(null!==(r=n[u])&&void 0!==r||(n[u]=c)))}}return{target:i,transitionEnd:n}}(t,e,r);return Qs(t,e=i.target,n,r=i.transitionEnd)};var Zs={treeType:"dom",readValueFromInstance:function(t,e){if(G(e)){var n=_r(e);return n&&n.default||0}var r,i=(r=t,window.getComputedStyle(r));return(J(e)?i.getPropertyValue(e):i[e])||0},sortNodePosition:function(t,e){return 2&t.compareDocumentPosition(e)?1:-1},getBaseTarget:function(t,e){var n;return null===(n=t.style)||void 0===n?void 0:n[e]},measureViewportBox:function(t,e){return _i(t,e.transformPagePoint)},resetTransform:function(t,e,n){t.suspendHoverEvents();var r=n.transformTemplate;e.style.transform=r?r({},""):"none",t.scheduleRender()},restoreTransform:function(t,e){t.style.transform=e.style.transform},removeValueFromRenderState:function(t,e){var n=e.vars,r=e.style;delete n[t],delete r[t]},makeTargetAnimatable:function(t,e,n,r){var i=n.transformValues;void 0===r&&(r=!0);var a=e.transition,u=e.transitionEnd,c=o(e,["transition","transitionEnd"]),l=function(t,e,n){var r,i,s={};for(var o in t)s[o]=null!==(r=zr(o,e))&&void 0!==r?r:null===(i=n.getValue(o))||void 0===i?void 0:i.get();return s}(c,a||{},t);if(i&&(u&&(u=i(u)),c&&(c=i(c)),l&&(l=i(l))),r){!function(t,e,n){var r,i,s,o,a=Object.keys(e).filter((function(e){return!t.hasValue(e)})),u=a.length;if(u)for(var c=0;c<u;c++){var l=a[c],h=e[l],f=null;Array.isArray(h)&&(f=h[0]),null===f&&(f=null!==(i=null!==(r=n[l])&&void 0!==r?r:t.readValue(l))&&void 0!==i?i:e[l]),null!=f&&("string"==typeof f&&/^\-?\d*\.?\d+$/.test(f)?f=parseFloat(f):!qr(f)&&sn.test(h)&&(f=xr(l,h)),t.addValue(l,Mr(f)),null!==(s=(o=n)[l])&&void 0!==s||(o[l]=f),t.setBaseTarget(l,f))}}(t,c,l);var h=Js(t,c,l,u);u=h.transitionEnd,c=h.target}return s({transition:a,transitionEnd:u},c)},scrapeMotionValuesFromProps:qt,build:function(t,e,n,r,i,s,o){void 0!==t.isVisible&&(e.style.visibility=t.isVisible?"visible":"hidden");var a=r.isEnabled&&i.isHydrated;wt(e,n,r,i,s,o.transformTemplate,a?Cs:void 0,a?Rs:void 0)},render:Ut},to=Os(Zs),eo=Os(s(s({},Zs),{getBaseTarget:function(t,e){return t[e]},readValueFromInstance:function(t,e){var n;return G(e)?(null===(n=_r(e))||void 0===n?void 0:n.default)||0:(e=Ft.has(e)?e:Vt(e),t.getAttribute(e))},scrapeMotionValuesFromProps:jt,build:function(t,e,n,r,i,s,o){var a=r.isEnabled&&i.isHydrated;Dt(e,n,r,i,s,o.transformTemplate,a?Cs:void 0,a?Rs:void 0)},render:Bt})),no=function(t,e){return B(t)?eo(e,{enableHardwareAcceleration:!1}):to(e,{enableHardwareAcceleration:!0})},ro=s(s(s(s({},ei),xe),is),As),io=U((function(t,e){return function(t,e,n,r){var i=e.forwardMotionProps,o=void 0!==i&&i,a=B(t)?Wt:Qt;return s(s({},a),{preloadedFeatures:n,useRender:Ot(o),createVisualElement:r,Component:t})}(t,e,ro,no)}))}}]);